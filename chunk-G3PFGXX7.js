import{f as R,m as T}from"./chunk-2UJ2GV6T.js";import{A as d,D as I,G as D,H as w,M as C,Q as m,S as l,V as S,Y as y,Z as v,c as h,g as u,k as s,l as p,q as c,r as b}from"./chunk-DWRMJDZW.js";var M=new y("CERTIFICATE_REPOSITORY"),E=class g{constructor(t,i){this.authService=t;this.certificateRepository=i;this.initializeService()}certificatesSubject=new u([]);templatesSubject=new u([]);loadingSubject=new u(!1);searchSubject=new u("");filtersSubject=new u({});certificateCache=new Map;templateCache=new Map;CACHE_TTL=5*60*1e3;bulkGenerationProgress=new u({inProgress:!1,processed:0,total:0});certificates$=this.certificatesSubject.asObservable();templates$=this.templatesSubject.asObservable();loading$=this.loadingSubject.asObservable();bulkProgress$=this.bulkGenerationProgress.asObservable();filteredCertificates$=b([this.certificates$,this.searchSubject.pipe(I(300),w()),this.filtersSubject]).pipe(c(([t,i,e])=>this.applyFiltersAndSearch(t,i,e)));initializeService(){this.loadTemplates().subscribe(),setInterval(()=>this.cleanupCache(),6e4)}getCertificates(t=1,i=20,e,r={field:"issued_at",direction:"desc"}){this.setLoading(!0);let a={page:t,pageSize:i,sortBy:r.field==="issued_at"?"created_at":r.field,sortDirection:r.direction,search:e?.search,userId:e?.userId,eventId:e?.eventId,participantRoleId:e?.participantRoleId,status:e?.status?.[0],templateId:e?.templateId,isValid:void 0,dateFrom:e?.issuedFrom,dateTo:e?.issuedTo};return this.certificateRepository.findAll(a).pipe(c(o=>{let n=o.items.map(f=>this.toCardViewModel(f));if(o.items.forEach(f=>{this.certificateCache.set(f.id,f)}),t===1)this.certificatesSubject.next(n);else{let f=this.certificatesSubject.value;this.certificatesSubject.next([...f,...n])}return{items:n,pagination:{currentPage:o.page,totalPages:o.totalPages,totalItems:o.total,itemsPerPage:o.pageSize,hasNextPage:o.hasNextPage,hasPrevPage:o.hasPreviousPage,nextPage:o.hasNextPage?o.page+1:void 0,prevPage:o.hasPreviousPage?o.page-1:void 0},sorting:{field:r.field,direction:r.direction}}}),d(o=>{throw console.error("Error cargando certificados:",o),new Error(o.message||"Error cargando certificados")}),l(()=>this.setLoading(!1)))}getCertificateById(t){let i=this.certificateCache.get(t);return i&&this.isCacheValid(i)?s(i):(this.setLoading(!0),this.certificateRepository.findById(t).pipe(c(e=>{if(!e.success||!e.data)throw new Error(e.error||"Certificado no encontrado");return this.certificateCache.set(t,e.data),e.data}),d(e=>{throw console.error("Error cargando certificado:",e),new Error(e.message||"Error cargando certificado")}),l(()=>this.setLoading(!1))))}getCertificateByShortCode(t){return!t||!t.trim()?p(()=>new Error("C\xF3digo de verificaci\xF3n requerido")):(this.setLoading(!0),this.certificateRepository.findByShortCode(t.trim()).pipe(c(i=>{if(!i.success||!i.data)throw new Error(i.error||"Certificado no encontrado con el c\xF3digo proporcionado");return this.certificateCache.set(i.data.id,i.data),i.data}),d(i=>{throw console.error("Error buscando certificado por c\xF3digo:",i),new Error(i.message||"No se pudo verificar el certificado")}),l(()=>this.setLoading(!1))))}verifyPublicCertificate(t){return!t||!t.trim()?p(()=>new Error("C\xF3digo de verificaci\xF3n requerido")):(this.setLoading(!0),this.certificateRepository.findByShortCode(t.trim()).pipe(c(i=>{if(!i.success||!i.data)return{success:!1,error:"Certificado no encontrado con el c\xF3digo proporcionado",message:"El c\xF3digo ingresado no corresponde a ning\xFAn certificado v\xE1lido.",verificationTimestamp:new Date().toISOString()};let e=i.data,r={certificateNumber:e.certificateNumber,shortCode:e.shortCode,issueDate:e.issueDate,isValid:e.isValid,verificationCount:e.verificationCount,participant:{fullName:e.participant?.fullName||"Informaci\xF3n no disponible",documentNumber:e.participant?.documentNumber,email:e.participant?.email,institution:e.participant?.institution},event:{title:e.event?.title||"Informaci\xF3n no disponible",startDate:e.event?.startDate||"",endDate:e.event?.endDate||"",durationHours:e.event?.durationHours,locationType:e.event?.locationType,venueName:e.event?.venueName,venueCity:e.event?.venueCity},participantRole:{name:e.roleInfo?.name||"Participante",certificateTitle:e.roleInfo?.certificateTitle||"Certificado de Participaci\xF3n",description:e.roleInfo?.certificateTextTemplate},verificationUrl:`${window.location.origin}/verificar/${e.shortCode}`,qrCodeData:e.qrData||e.shortCode,expiresDate:e.expiresDate,revocationReason:e.revocationReason,revokedAt:e.revokedAt};return this.certificateCache.set(e.id,e),{success:!0,certificate:r,message:e.isValid?"Certificado v\xE1lido y aut\xE9ntico":"Certificado encontrado pero no v\xE1lido",verificationTimestamp:new Date().toISOString()}}),d(i=>(console.error("Error verificando certificado:",i),s({success:!1,error:i.message||"Error al verificar el certificado",message:"Ocurri\xF3 un error durante la verificaci\xF3n. Intente nuevamente.",verificationTimestamp:new Date().toISOString()}))),l(()=>this.setLoading(!1))))}getCertificateTemplateData(t){return!t||!t.trim()?p(()=>new Error("C\xF3digo de verificaci\xF3n requerido")):(this.setLoading(!0),this.certificateRepository.findByShortCodeForTemplate(t.trim()).pipe(c(i=>!i.success||!i.data?null:i.data),d(i=>(console.error("Error obteniendo datos del certificado para template:",i),s(null))),l(()=>this.setLoading(!1))))}generateCertificate(t){let i=this.authService.currentUser;if(!i||i.role==="participant")return s({success:!1,message:"No tienes permisos para generar certificados"});let e=this.validateGenerationData(t);return e.length>0?s({success:!1,message:"Datos inv\xE1lidos",errors:e}):(this.setLoading(!0),this.certificateRepository.create(t).pipe(c(r=>!r.success||!r.data?{success:!1,message:r.error||"Error generando certificado"}:(this.certificateCache.set(r.data.id,r.data),this.updateCertificateInList(r.data),{success:!0,certificateId:r.data.id,templateId:r.data.templateId,downloadUrl:`/certificates/${r.data.id}/download`,verificationCode:r.data.verificationCode,shortCode:r.data.shortCode,message:"Certificado generado exitosamente"})),C(2),d(r=>s({success:!1,message:r.message||"Error generando certificado"})),l(()=>this.setLoading(!1))))}createQuickCertificate(t){let i=this.authService.currentUser;return!i||i.role==="participant"?s({success:!1,message:"No tienes permisos para crear certificados"}):!t.userId||!t.eventId||!t.participantRoleId||!t.templateId?s({success:!1,message:"Datos requeridos: userId, eventId, participantRoleId, templateId"}):(this.setLoading(!0),this.certificateRepository.createQuickCertificate(t).pipe(c(e=>!e.success||!e.data?{success:!1,message:e.error||"Error creando certificado r\xE1pido"}:(this.certificateCache.set(e.data.id,e.data),this.updateCertificateInList(e.data),{success:!0,certificateId:e.data.id,templateId:e.data.templateId,downloadUrl:`/certificates/${e.data.id}/download`,verificationCode:e.data.verificationCode,shortCode:e.data.shortCode,message:"Certificado r\xE1pido creado exitosamente"})),C(2),d(e=>s({success:!1,message:e.message||"Error creando certificado r\xE1pido"})),l(()=>this.setLoading(!1))))}generateBulkCertificates(t){let i=this.authService.currentUser;if(!i||i.role==="participant")return s({totalRequested:t.userIds.length,successful:0,failed:t.userIds.length,results:[],errors:["No tienes permisos para generar certificados"]});this.bulkGenerationProgress.next({inProgress:!0,processed:0,total:t.userIds.length}),this.setLoading(!0);let e={eventId:t.eventId,userIds:t.userIds,participantRoleId:t.participantRoleId,templateId:t.templateId,sendNotifications:t.sendNotifications||!1};return this.certificateRepository.generateBulk(e).pipe(m(r=>{if(!r.success)throw new Error(r.summary?.errors?.[0]||"Error en generaci\xF3n masiva");return this.simulateBulkProgressFromRepository(r)}),c(r=>{let a=r.results?.filter(n=>n.success&&n.data)||[];a.forEach(n=>{n.data&&this.certificateCache.set(n.data.id,n.data)});let o=[...a.map(n=>({success:!0,certificateId:n.data.id,templateId:n.data.templateId,downloadUrl:`/certificates/${n.data.id}/download`,verificationCode:n.data.verificationCode,shortCode:n.data.shortCode,message:"Generado exitosamente"})),...(r.results?.filter(n=>!n.success)||[]).map(n=>({success:!1,message:n.error||"Error desconocido",errors:[n.error||"Error desconocido"]}))];return{totalRequested:t.userIds.length,successful:r.summary?.successful||0,failed:r.summary?.failed||0,results:o,errors:r.summary?.errors||[]}}),d(r=>s({totalRequested:t.userIds.length,successful:0,failed:t.userIds.length,results:[],errors:[r.message||"Error en generaci\xF3n masiva"]})),l(()=>{this.setLoading(!1),this.bulkGenerationProgress.next({inProgress:!1,processed:0,total:0})}))}getEligibleRegistrationsForCertificates(t){let i=this.authService.currentUser;return!i||i.role==="participant"?s({items:[],summary:{total:0,withCertificates:0,pendingCertificates:0,eventTitle:"No autorizado",participantRole:"No autorizado"}}):(this.setLoading(!0),this.certificateRepository.findEligibleRegistrations(t).pipe(c(e=>{if(!e.success||!e.data)throw new Error(e.error||"Error cargando registros elegibles");return e.data}),d(e=>s({items:[],summary:{total:0,withCertificates:0,pendingCertificates:0,eventTitle:"Error",participantRole:"Error"}})),l(()=>this.setLoading(!1))))}verifyCertificate(t){if(!t.code?.trim())return s({isValid:!1,verificationDetails:{method:t.method||"qr",timestamp:new Date().toISOString(),result:"invalid"},message:"C\xF3digo de verificaci\xF3n requerido"});let i={code:t.code,method:t.method};return this.certificateRepository.verify(i).pipe(c(e=>{let r=new Date().toISOString();if(!e.success)return{isValid:!1,verificationDetails:{method:t.method||"qr",timestamp:r,ipAddress:t.ipAddress,userAgent:t.userAgent,result:"invalid"},message:e.error||"C\xF3digo no v\xE1lido"};let a=e.data?.isValid||!1;return a&&e.data?.certificate&&this.certificateCache.set(e.data.certificate.id,e.data.certificate),{isValid:a,certificate:e.data?.certificate,verificationDetails:{method:t.method||"qr",timestamp:r,ipAddress:t.ipAddress,userAgent:t.userAgent,result:a?"valid":"invalid"},message:this.getVerificationMessage(a?"valid":"invalid")}}),d(e=>s({isValid:!1,verificationDetails:{method:t.method||"qr",timestamp:new Date().toISOString(),result:"invalid"},message:"Error del sistema en verificaci\xF3n"})))}revokeCertificate(t,i){let e=this.authService.currentUser;if(!e||e.role==="participant")throw new Error("No tienes permisos para revocar certificados");return this.setLoading(!0),this.certificateRepository.revoke(t,i||"Revocado por administrador").pipe(c(r=>{if(!r.success)throw new Error(r.error||"Error revocando certificado");return this.getCertificateById(t).subscribe(a=>{this.certificateCache.set(t,a),this.updateCertificateInList(a)}),!0}),d(r=>{throw console.error("Error revocando certificado:",r),new Error(r.message||"Error revocando certificado")}),l(()=>this.setLoading(!1)))}regenerateCertificate(t){let i=this.authService.currentUser;return!i||i.role==="participant"?s({success:!1,message:"No tienes permisos para regenerar certificados"}):(this.setLoading(!0),this.getCertificateById(t).pipe(m(e=>{let r={userId:e.userId,eventId:e.eventId,participantRoleId:e.participantRoleId,templateId:e.templateId,customData:e.metadata};return this.certificateRepository.create(r)}),c(e=>!e.success||!e.data?{success:!1,message:e.error||"Error regenerando certificado"}:(this.certificateCache.set(e.data.id,e.data),this.updateCertificateInList(e.data),{success:!0,certificateId:e.data.id,templateId:e.data.templateId,downloadUrl:`/certificates/${e.data.id}/download`,verificationCode:e.data.verificationCode,shortCode:e.data.shortCode,message:"Certificado regenerado exitosamente"})),d(e=>s({success:!1,message:e.message||"Error regenerando certificado"})),l(()=>this.setLoading(!1))))}changeCertificateTemplate(t){let i=this.authService.currentUser;return!i||i.role==="participant"?s({success:!1,message:"No tienes permisos para cambiar plantillas de certificados"}):(this.setLoading(!0),this.certificateRepository.changeTemplate(t).pipe(c(e=>!e.success||!e.data?{success:!1,message:e.error||"Error cambiando plantilla de certificado"}:(this.certificateCache.delete(t.certificateId),this.updateCertificateInList(e.data),{success:!0,certificateId:e.data.id,newTemplateId:t.newTemplateId,message:"Plantilla de certificado actualizada exitosamente"})),d(e=>s({success:!1,message:e.message||"Error cambiando plantilla de certificado"})),l(()=>this.setLoading(!1))))}getTemplates(){let t=Array.from(this.templateCache.values());return t.length>0?s(t):this.loadTemplates()}getTemplateById(t){let i=this.templateCache.get(t);return i?s(i):this.mockApiCall("GET",`/certificate-templates/${t}`).pipe(c(e=>{if(!e.success||!e.data)throw new Error("Plantilla no encontrada");return this.templateCache.set(t,e.data),e.data}))}getCertificateStats(t){return this.mockApiCall("GET","/certificates/stats",t).pipe(c(i=>{if(!i.success||!i.data)throw new Error("Error obteniendo estad\xEDsticas");return i.data}))}exportCertificates(t,i){let e=this.authService.currentUser;if(!e||e.role==="participant")throw new Error("No tienes permisos para exportar datos");return this.mockApiCall("POST","/certificates/export",{format:t,filters:i}).pipe(c(r=>{if(!r.success||!r.data)throw new Error("Error exportando certificados");return r.data}))}updateSearchTerm(t){this.searchSubject.next(t)}updateFilters(t){this.filtersSubject.next(t)}clearFilters(){this.filtersSubject.next({}),this.searchSubject.next("")}validateGenerationData(t){let i=[];return(!t.userId||t.userId<=0)&&i.push("ID de usuario es requerido"),(!t.eventId||t.eventId<=0)&&i.push("ID de evento es requerido"),t.templateId&&t.templateId<=0&&i.push("ID de plantilla inv\xE1lido"),i}getVerificationMessage(t){return{valid:"Certificado v\xE1lido y aut\xE9ntico",invalid:"C\xF3digo de verificaci\xF3n no v\xE1lido",expired:"Certificado expirado",revoked:"Certificado revocado"}[t]||"Estado desconocido"}toCardViewModel(t){return{id:t.id,participantName:t.participant?.fullName||"Participante desconocido",participantEmail:t.participant?.email||"",eventTitle:t.event?.title||"Evento desconocido",eventDate:t.event?.startDate||"",roleName:t.roleInfo?.name||"Participante",status:t.status||"valid",issuedAt:t.createdAt,downloadCount:t.downloadCount||0,verificationCount:t.verificationCount||0,verificationCode:t.verificationCode,shortCode:t.shortCode,templateId:t.templateId,templateUrl:t.templateUrl,canRegenerate:t.status==="valid"&&this.canManageCertificates(),canRevoke:t.status==="valid"&&this.canManageCertificates(),canDownload:t.status==="valid"}}canManageCertificates(){let t=this.authService.currentUser;return t?.role==="admin"||t?.role==="organizer"}applyFiltersAndSearch(t,i,e){let r=[...t];if(i.trim()){let a=i.toLowerCase();r=r.filter(o=>o.participantName.toLowerCase().includes(a)||o.participantEmail.toLowerCase().includes(a)||o.eventTitle.toLowerCase().includes(a)||o.verificationCode.toLowerCase().includes(a)||o.shortCode.toLowerCase().includes(a))}return e.status&&e.status.length>0&&(r=r.filter(a=>e.status.includes(a.status))),e.hasBeenDownloaded!==void 0&&(r=r.filter(a=>e.hasBeenDownloaded?a.downloadCount>0:a.downloadCount===0)),e.hasBeenVerified!==void 0&&(r=r.filter(a=>e.hasBeenVerified?a.verificationCount>0:a.verificationCount===0)),r}updateCertificateInList(t){let i=this.certificatesSubject.value,e=this.toCardViewModel(t),r=i.findIndex(a=>a.id===t.id);r>=0?i[r]=e:i.unshift(e),this.certificatesSubject.next([...i])}loadTemplates(){return this.mockApiCall("GET","/certificate-templates").pipe(c(t=>{if(!t.success||!t.data)throw new Error("Error cargando plantillas");return t.data.forEach(i=>{this.templateCache.set(i.id,i)}),this.templatesSubject.next(t.data),t.data}),d(t=>(console.error("Error cargando plantillas:",t),s([]))))}simulateBulkProgressFromRepository(t){let i=t.summary?.total||0,e=0;return new h(r=>{let a=setInterval(()=>{e++,this.bulkGenerationProgress.next({inProgress:!0,processed:e,total:i,currentItem:e<=(t.summary?.successful||0)?`Certificado ${e}`:`Error ${e-(t.summary?.successful||0)}`}),e>=i&&(clearInterval(a),r.next(t),r.complete())},100)})}simulateBulkProgress(t){let i=t.summary.total,e=0;return new h(r=>{let a=setInterval(()=>{e++,this.bulkGenerationProgress.next({inProgress:!0,processed:e,total:i,currentItem:e<=t.summary.successful?`Certificado ${e}`:`Error ${e-t.summary.successful}`}),e>=i&&(clearInterval(a),r.next(t),r.complete())},100)})}isCacheValid(t){return t._cacheTimestamp?Date.now()-t._cacheTimestamp<this.CACHE_TTL:!1}cleanupCache(){let t=Date.now();for(let[i,e]of this.certificateCache.entries())this.isCacheValid(e)||this.certificateCache.delete(i);for(let[i,e]of this.templateCache.entries())t-e._cacheTimestamp>this.CACHE_TTL*6&&this.templateCache.delete(i)}setLoading(t){this.loadingSubject.next(t)}mockApiCall(t,i,e){return s(null).pipe(D(Math.random()*1e3+200),m(()=>{switch(`${t} ${i}`){case"GET /certificates":return this.generateMockCertificatesResponse(e?.page||1,e?.pageSize||20,e?.filters);case"POST /certificates/generate":return this.generateMockCertificateResponse(e);case"POST /certificates/bulk-generate":return this.generateMockBulkResponse(e);case"POST /certificates/verify":return this.generateMockVerificationResponse(e);case"GET /certificate-templates":return this.generateMockTemplatesResponse();case"GET /certificates/stats":return this.generateMockStatsResponse();default:return i.includes("/certificates/")&&t==="GET"?this.generateMockSingleCertificateResponse():s({success:!0,data:null,timestamp:new Date().toISOString()})}}))}generateMockCertificatesResponse(t,i,e){let a=(t-1)*i,o=[];for(let n=0;n<Math.min(i,147-a);n++){let f=a+n+1;o.push(this.generateMockCertificate(f))}return s({success:!0,data:{data:o,total:147,page:t,limit:i,hasNext:a+i<147,hasPrev:t>1},timestamp:new Date().toISOString()})}generateMockCertificate(t){let i=Object.values(R),e=new Date;return{id:t,userId:Math.floor(Math.random()*100)+1,eventId:Math.floor(Math.random()*20)+1,participantRoleId:1,templateId:Math.floor(Math.random()*5)+1,certificateNumber:`CERT-${new Date().getFullYear()}-${String(t).padStart(6,"0")}`,verificationCode:`CERT-${String(t).padStart(6,"0")}-${Math.random().toString(36).substring(2,8).toUpperCase()}`,shortCode:Math.random().toString(36).substring(2,8).toUpperCase(),issueDate:new Date(e.getTime()-Math.random()*30*24*60*60*1e3).toISOString(),expiresDate:new Date(e.getTime()+Math.random()*365*24*60*60*1e3).toISOString(),isValid:Math.random()>.1,downloadCount:Math.floor(Math.random()*10),verificationCount:Math.floor(Math.random()*5),lastDownloaded:Math.random()>.7?new Date(e.getTime()-Math.random()*7*24*60*60*1e3).toISOString():void 0,lastVerified:Math.random()>.8?new Date(e.getTime()-Math.random()*7*24*60*60*1e3).toISOString():void 0,certificateHash:`hash_${Math.random().toString(36).substring(2,32)}`,qrData:`${window.location.origin}/verify/${Math.random().toString(36).substring(2,8)}`,verificationUrl:`${window.location.origin}/verify/${Math.random().toString(36).substring(2,8)}`,metadata:{mockData:!0},createdAt:new Date(e.getTime()-Math.random()*30*24*60*60*1e3).toISOString(),updatedAt:e.toISOString(),participant:{id:Math.floor(Math.random()*100)+1,fullName:`Participante ${t}`,documentNumber:"12345678",institution:`Instituci\xF3n ${t}`},event:{id:Math.floor(Math.random()*20)+1,title:`Evento de Certificaci\xF3n ${Math.floor(Math.random()*10)+1}`,startDate:new Date(e.getTime()-Math.random()*60*24*60*60*1e3).toISOString(),endDate:new Date(e.getTime()-Math.random()*60*24*60*60*1e3+8*60*60*1e3).toISOString(),locationType:"virtual"}}}generateMockCertificateResponse(t){let i=this.generateMockCertificate(Math.floor(Math.random()*1e3)+1e3);return i.userId=t.userId,i.eventId=t.eventId,i.participantRoleId=t.participantRoleId||1,t.templateId&&(i.templateId=t.templateId),s({success:!0,data:i,timestamp:new Date().toISOString()})}generateMockBulkResponse(t){let i=[],e=[];return t.userIds.forEach((r,a)=>{if(Math.random()>.1){let o=this.generateMockCertificate(1e3+a);o.eventId=t.eventId,o.userId=r,t.templateId&&(o.templateId=t.templateId),i.push(o)}else e.push({error:`Error generando certificado para usuario ${r}`,details:"Usuario no cumple criterios de elegibilidad"})}),s({success:!0,data:{successful:i,errors:e,summary:{total:t.userIds.length,successful:i.length,failed:e.length}},timestamp:new Date().toISOString()})}generateMockVerificationResponse(t){let i=Math.random();if(i>.8)return s({success:!1,error:"C\xF3digo no encontrado",data:{verificationResult:"invalid"},timestamp:new Date().toISOString()});if(i>.95){let r=this.generateMockCertificate(Math.floor(Math.random()*1e3));return r.status="revoked",s({success:!0,data:{certificate:r,verificationResult:"revoked"},timestamp:new Date().toISOString()})}let e=this.generateMockCertificate(Math.floor(Math.random()*1e3));return e.status="valid",e.verificationCount=(e.verificationCount||0)+1,s({success:!0,data:{certificate:e,verificationResult:"valid"},timestamp:new Date().toISOString()})}generateMockSingleCertificateResponse(){return s({success:!0,data:this.generateMockCertificate(Math.floor(Math.random()*1e3)),timestamp:new Date().toISOString()})}generateMockTemplatesResponse(){let t=[{id:1,name:"Certificado de Participaci\xF3n",description:"Plantilla est\xE1ndar para participantes",eventTypeIds:[1,2,3],roleIds:[1],isActive:!0,isDefault:!0,design:{backgroundColor:"#ffffff",primaryColor:"#2563eb",secondaryColor:"#64748b",fontFamily:"Arial",logoUrl:"/assets/logo.png"},fields:[{key:"participantName",label:"Nombre del Participante",required:!0},{key:"eventTitle",label:"T\xEDtulo del Evento",required:!0},{key:"completionDate",label:"Fecha de Finalizaci\xF3n",required:!0},{key:"duration",label:"Duraci\xF3n",required:!1}],createdAt:new Date(Date.now()-2592e6).toISOString(),updatedAt:new Date().toISOString()},{id:2,name:"Certificado de Ponente",description:"Plantilla especial para ponentes y organizadores",eventTypeIds:[1,2],roleIds:[2,3],isActive:!0,isDefault:!1,design:{backgroundColor:"#f8fafc",primaryColor:"#059669",secondaryColor:"#374151",fontFamily:"Georgia",logoUrl:"/assets/logo-premium.png"},fields:[{key:"participantName",label:"Nombre del Ponente",required:!0},{key:"eventTitle",label:"T\xEDtulo del Evento",required:!0},{key:"role",label:"Rol Desempe\xF1ado",required:!0},{key:"competencies",label:"Competencias Desarrolladas",required:!1}],createdAt:new Date(Date.now()-5184e6).toISOString(),updatedAt:new Date(Date.now()-432e6).toISOString()}];return t.forEach(i=>i._cacheTimestamp=Date.now()),s({success:!0,data:t,timestamp:new Date().toISOString()})}generateMockStatsResponse(){let t=new Date,i=[];for(let r=5;r>=0;r--){let a=new Date(t.getFullYear(),t.getMonth()-r,1);i.push({month:a.toISOString().substring(0,7),issued:Math.floor(Math.random()*100)+20,downloaded:Math.floor(Math.random()*80)+15,verified:Math.floor(Math.random()*30)+5})}let e={totalIssued:1247,totalDownloaded:1108,totalVerified:234,downloadRate:88.9,verificationRate:18.8,byStatus:{valid:1156,revoked:47,expired:44},byTemplate:{"Certificado de Participaci\xF3n":987,"Certificado de Ponente":180,"Certificado Especial":80},monthlyTrends:i};return s({success:!0,data:e,timestamp:new Date().toISOString()})}static \u0275fac=function(i){return new(i||g)(v(T),v(M))};static \u0275prov=S({token:g,factory:g.\u0275fac,providedIn:"root"})};export{M as a,E as b};
