import{b as ye}from"./chunk-RI2EYGR4.js";import{a as Se}from"./chunk-PU57OF2V.js";import{a as he}from"./chunk-JJ6L3UIW.js";import{a as V,c as D}from"./chunk-IYGYDPGO.js";import{c as ce,e as de,f as me,h as pe,k as ue,l as _e,m as ve,n as be,o as Ce,s as ge,t as xe,u as fe}from"./chunk-GFCFUV6K.js";import{a as Ee}from"./chunk-MXHSEERB.js";import"./chunk-MPC7SZEK.js";import{a as le,b as se}from"./chunk-CF2QCA26.js";import{i as re,l as ae}from"./chunk-NUA5R5QO.js";import{$a as P,$b as w,A as G,Aa as Q,Ab as y,Ac as oe,Cb as L,D as q,Da as r,Eb as E,Fb as l,Gb as S,H as U,Hb as h,Ib as X,Na as K,Nb as Y,Q as j,Qb as Z,Rb as F,Ub as ee,Vb as te,_ as k,ab as N,bb as u,cb as _,da as v,ea as b,eb as I,fb as M,fc as ie,g as B,gb as p,hb as t,ia as H,ib as i,jb as d,k as O,ma as f,q as $,qb as x,rb as C,tb as c,yb as J,yc as ne,zb as W}from"./chunk-6O7NOF42.js";import"./chunk-LJ5XHLMQ.js";import{a as z,b as R}from"./chunk-FK42CRUA.js";var Fe=["confirmModal"],A=o=>["/eventos",o],Te=o=>["/eventos",o,"editar"],Le=()=>[6,12,24,48],Ve=(o,n)=>n.key;function ke(o,n){if(o&1&&(t(0,"span",15),l(1),i()),o&2){let e=c();r(),S(e.totalItems())}}function Pe(o,n){o&1&&d(0,"span",19)}function Ie(o,n){o&1&&d(0,"i",20)}function Me(o,n){if(o&1&&(t(0,"span",31),l(1),i()),o&2){let e=c();r(),S(e.activeFiltersCount())}}function De(o,n){if(o&1){let e=x();t(0,"button",63),C("click",function(){v(e);let s=c();return b(s.clearFilters())}),d(1,"i",64),i()}}function Ae(o,n){if(o&1){let e=x();t(0,"button",85),C("click",function(){v(e),c();let s=y(10);return c().clearSearch(),b(s.focus())}),d(1,"i",86),i()}}function Ne(o,n){if(o&1&&(t(0,"option",76),l(1),i()),o&2){let e=n.$implicit;p("value",e.key),r(),S(e.value.name)}}function ze(o,n){if(o&1&&(I(0,Ne,2,2,"option",76,Ve),ee(2,"keyvalue")),o&2){let e=c(2);M(te(2,0,e.eventTypes()))}}function Re(o,n){if(o&1&&(t(0,"div",36)(1,"form",65)(2,"div",66)(3,"div",67)(4,"label",68),l(5,"Buscar por texto"),i(),t(6,"div",69)(7,"span",70),d(8,"i",71),i(),d(9,"input",72,1),u(11,Ae,2,0,"button",73),i()(),t(12,"div",67)(13,"label",68),l(14,"Estado del evento"),i(),t(15,"select",74)(16,"option",75),l(17,"Todos los estados"),i(),t(18,"option",76),l(19,"Borrador"),i(),t(20,"option",76),l(21,"Publicado"),i(),t(22,"option",76),l(23,"Inscripciones Abiertas"),i(),t(24,"option",76),l(25,"Inscripciones Cerradas"),i(),t(26,"option",76),l(27,"En Curso"),i(),t(28,"option",76),l(29,"Finalizado"),i(),t(30,"option",76),l(31,"Cancelado"),i()()(),t(32,"div",67)(33,"label",68),l(34,"Tipo de evento"),i(),t(35,"select",77)(36,"option",75),l(37,"Todos los tipos"),i(),u(38,ze,3,2),i()(),t(39,"div",78)(40,"label",68),l(41,"Modalidad"),i(),t(42,"select",79)(43,"option",75),l(44,"Todas"),i(),t(45,"option",76),l(46,"Presencial"),i(),t(47,"option",76),l(48,"Virtual"),i(),t(49,"option",76),l(50,"H\xEDbrido"),i()()(),t(51,"div",78)(52,"label",68),l(53,"Fecha desde"),i(),d(54,"input",80),i(),t(55,"div",78)(56,"label",68),l(57,"Fecha hasta"),i(),d(58,"input",81),i(),t(59,"div",78)(60,"label",68),l(61,"Acceso"),i(),t(62,"select",82)(63,"option",75),l(64,"Todos"),i(),t(65,"option",83),l(66,"P\xFAblico"),i(),t(67,"option",84),l(68,"Privado"),i()()()()()()),o&2){let e,a=c();r(),p("formGroup",a.form),r(10),_((e=a.form.get("search"))!=null&&e.value?11:-1),r(7),p("value",a.EventStatus.DRAFT),r(2),p("value",a.EventStatus.PUBLISHED),r(2),p("value",a.EventStatus.REG_OPEN),r(2),p("value",a.EventStatus.REG_CLOSED),r(2),p("value",a.EventStatus.ACTIVE),r(2),p("value",a.EventStatus.COMPLETED),r(2),p("value",a.EventStatus.CANCELLED),r(8),_(a.eventTypes()?38:-1),r(7),p("value",a.LocationType.PRESENCIAL),r(2),p("value",a.LocationType.VIRTUAL),r(2),p("value",a.LocationType.HIBRIDO)}}function Be(o,n){if(o&1&&(t(0,"span",41),l(1),i()),o&2){let e=c();r(),S(e.totalItems())}}function Oe(o,n){o&1&&(t(0,"div",60)(1,"div",87)(2,"div",88)(3,"span",89),l(4,"Cargando..."),i()(),t(5,"p",90),l(6,"Cargando eventos..."),i()()())}function $e(o,n){if(o&1){let e=x();t(0,"div",61)(1,"div",91),d(2,"i",92),i(),t(3,"h5",93),l(4,"Error al cargar eventos"),i(),t(5,"p",94),l(6),i(),t(7,"button",95),C("click",function(){v(e);let s=c();return b(s.load())}),d(8,"i",96),l(9,"Reintentar "),i()()}if(o&2){let e=c();r(6),S(e.errorMessage())}}function Ge(o,n){if(o&1){let e=x();t(0,"h5",98),l(1,"No se encontraron eventos"),i(),t(2,"p",94),l(3,"Intenta ajustar los filtros de b\xFAsqueda"),i(),t(4,"button",95),C("click",function(){v(e);let s=c(2);return b(s.clearFilters())}),d(5,"i",99),l(6,"Limpiar filtros "),i()}}function qe(o,n){o&1&&(t(0,"h5",98),l(1,"No hay eventos registrados"),i(),t(2,"p",94),l(3,"Comienza creando el primer evento"),i(),t(4,"a",100),d(5,"i",101),l(6,"Nuevo Evento "),i())}function Ue(o,n){if(o&1&&(t(0,"div",61)(1,"div",94),d(2,"i",97),i(),u(3,Ge,7,0)(4,qe,7,0),i()),o&2){let e=c();r(3),_(e.hasActiveFilters()?3:4)}}function je(o,n){if(o&1&&(t(0,"div",107),d(1,"img",134),t(2,"span",135),d(3,"i",136),l(4),i()()),o&2){let e=c().$implicit,a=c(3);r(),p("alt",Y("Imagen de ",e.title))("src",e.thumbnailUrl,Q),r(),E(a.getStateBadgeClass(e.status)),r(),E("bi-"+a.getStateIcon(e.status)),r(),h(" ",a.getStatusLabel(e.status)," ")}}function He(o,n){if(o&1&&(t(0,"div",109)(1,"span",137),d(2,"i",136),l(3),i()()),o&2){let e=c().$implicit,a=c(3);r(),E(a.getStateBadgeClass(e.status)),r(),E("bi-"+a.getStateIcon(e.status)),r(),h(" ",a.getStatusLabel(e.status)," ")}}function Qe(o,n){if(o&1&&(t(0,"p",115),l(1),i()),o&2){let e=c().$implicit;p("title",e.shortDescription),r(),h(" ",e.shortDescription," ")}}function Ke(o,n){if(o&1&&l(0),o&2){let e=c().$implicit;h(" / ",e.maxParticipants," ")}}function Je(o,n){if(o&1){let e=x();t(0,"button",138),C("click",function(s){v(e);let m=c().$implicit,g=c(3),T=y(2);return s.preventDefault(),s.stopPropagation(),b(g.openConfirm(T,"Publicar evento","\xBFConfirma que desea publicar este evento?","publish",m.id))}),d(1,"i",139),i()}}function We(o,n){if(o&1){let e=x();t(0,"button",140),C("click",function(s){v(e);let m=c().$implicit,g=c(3),T=y(2);return s.preventDefault(),s.stopPropagation(),b(g.openConfirm(T,"Abrir inscripciones","\xBFAbrir inscripciones para este evento?","open",m.id))}),d(1,"i",141),i()}}function Xe(o,n){if(o&1){let e=x();t(0,"button",142),C("click",function(s){v(e);let m=c().$implicit,g=c(3),T=y(2);return s.preventDefault(),s.stopPropagation(),b(g.openConfirm(T,"Cerrar inscripciones","\xBFCerrar inscripciones para este evento?","close",m.id))}),d(1,"i",143),i()}}function Ye(o,n){if(o&1){let e=x();t(0,"button",144),C("click",function(s){v(e);let m=c().$implicit,g=c(3),T=y(2);return s.preventDefault(),s.stopPropagation(),b(g.openConfirm(T,"Cancelar evento","\xBFEst\xE1 seguro de cancelar este evento?","cancel",m.id))}),d(1,"i",64),i()}}function Ze(o,n){if(o&1){let e=x();t(0,"div",105)(1,"div",106),u(2,je,5,8,"div",107),t(3,"div",108),u(4,He,4,5,"div",109),t(5,"div",110),d(6,"i",111),t(7,"small",112),l(8),i()(),t(9,"h6",113)(10,"a",114),l(11),i()(),u(12,Qe,2,2,"p",115),t(13,"div",116)(14,"div",110),d(15,"i",117),t(16,"span",118),l(17),i()(),t(18,"div",110),d(19,"i",119),t(20,"span",120),l(21),u(22,Ke,1,1),i()(),t(23,"div",28),d(24,"i",121),t(25,"span",118),l(26),i()()()(),t(27,"div",122)(28,"div",123)(29,"button",124),C("click",function(s){let m=v(e).$implicit,g=c(3);return s.preventDefault(),s.stopPropagation(),b(g.toggleFeatured(m.id))}),d(30,"i",125),i(),t(31,"a",126),C("click",function(s){return v(e),b(s.stopPropagation())}),d(32,"i",127),i(),t(33,"a",128),C("click",function(s){return v(e),b(s.stopPropagation())}),d(34,"i",129),i(),u(35,Je,2,0,"button",130),u(36,We,2,0,"button",131),u(37,Xe,2,0,"button",132),u(38,Ye,2,0,"button",133),i()()()()}if(o&2){let e=n.$implicit,a=c(3);r(2),_(e.thumbnailUrl?2:-1),r(2),_(e.thumbnailUrl?-1:4),r(4),X(" ",e.startDate," \u2192 ",e.endDate," "),r(),p("title",e.title),r(),p("routerLink",F(21,A,e.id)),r(),h(" ",e.title," "),r(),_(e.shortDescription?12:-1),r(5),S(e.eventType),r(4),h(" ",e.currentParticipants),r(),_(e.maxParticipants?22:-1),r(4),S(e.location),r(3),E(e.isFeatured?"btn-warning":"btn-outline-warning"),P("aria-pressed",e.isFeatured),r(2),p("routerLink",F(23,A,e.id)),r(2),p("routerLink",F(25,Te,e.id)),r(2),_(a.canPublish(e)?35:-1),r(),_(a.canOpenReg(e)?36:-1),r(),_(a.canCloseReg(e)?37:-1),r(),_(a.canCancel(e)?38:-1)}}function et(o,n){if(o&1&&(t(0,"div",102)(1,"div",104),I(2,Ze,39,27,"div",105,N().trackById,!0),i()()),o&2){let e=c(2);r(2),M(e.events())}}function tt(o,n){if(o&1&&d(0,"i",34),o&2){let e=c(3);E(e.sortSig().direction==="asc"?"bi-arrow-up":"bi-arrow-down")}}function it(o,n){o&1&&d(0,"i",150)}function nt(o,n){if(o&1&&d(0,"i",34),o&2){let e=c(3);E(e.sortSig().direction==="asc"?"bi-arrow-up":"bi-arrow-down")}}function ot(o,n){o&1&&d(0,"i",150)}function rt(o,n){if(o&1&&d(0,"i",34),o&2){let e=c(3);E(e.sortSig().direction==="asc"?"bi-arrow-up":"bi-arrow-down")}}function at(o,n){o&1&&d(0,"i",150)}function lt(o,n){if(o&1&&(t(0,"small",161),l(1),i()),o&2){let e=c().$implicit;p("title",e.shortDescription),r(),h(" ",e.shortDescription," ")}}function st(o,n){if(o&1&&(t(0,"small",112),l(1),i()),o&2){let e=c().$implicit;r(),h("/ ",e.maxParticipants)}}function ct(o,n){if(o&1){let e=x();t(0,"button",176),C("click",function(){v(e);let s=c().$implicit,m=c(3),g=y(2);return b(m.openConfirm(g,"Publicar evento","\xBFConfirma que desea publicar este evento?","publish",s.id))}),d(1,"i",139),i()}}function dt(o,n){if(o&1){let e=x();t(0,"button",177),C("click",function(){v(e);let s=c().$implicit,m=c(3),g=y(2);return b(m.openConfirm(g,"Abrir inscripciones","\xBFAbrir inscripciones para este evento?","open",s.id))}),d(1,"i",141),i()}}function mt(o,n){if(o&1){let e=x();t(0,"button",178),C("click",function(){v(e);let s=c().$implicit,m=c(3),g=y(2);return b(m.openConfirm(g,"Cerrar inscripciones","\xBFCerrar inscripciones para este evento?","close",s.id))}),d(1,"i",143),i()}}function pt(o,n){if(o&1){let e=x();t(0,"button",179),C("click",function(){v(e);let s=c().$implicit,m=c(3),g=y(2);return b(m.openConfirm(g,"Cancelar evento","\xBFEst\xE1 seguro de cancelar este evento?","cancel",s.id))}),d(1,"i",64),i()}}function ut(o,n){if(o&1){let e=x();t(0,"tr")(1,"td",156)(2,"span",157),d(3,"i",136),t(4,"span",158),l(5),i()()(),t(6,"td",156)(7,"div",159)(8,"a",160),l(9),i()(),u(10,lt,2,2,"small",161),i(),t(11,"td",162)(12,"small",163),l(13),i()(),t(14,"td",164)(15,"small",112)(16,"div"),l(17),i(),t(18,"div"),l(19),i()()(),t(20,"td",165)(21,"small",166),l(22),i()(),t(23,"td",164)(24,"span",167),l(25),i(),u(26,st,2,1,"small",112),i(),t(27,"td",156)(28,"div",168)(29,"button",169),C("click",function(){let s=v(e).$implicit,m=c(3);return b(m.toggleFeatured(s.id))}),d(30,"i",125),i(),t(31,"a",170),d(32,"i",127),i(),t(33,"a",171),d(34,"i",129),i(),u(35,ct,2,0,"button",172),u(36,dt,2,0,"button",173),u(37,mt,2,0,"button",174),u(38,pt,2,0,"button",175),i()()()}if(o&2){let e=n.$implicit,a=c(3);r(2),E(a.getStateBadgeClass(e.status)),r(),E("bi-"+a.getStateIcon(e.status)),r(2),S(a.getStatusLabel(e.status)),r(2),p("title",e.title),r(),p("routerLink",F(26,A,e.id)),r(),h(" ",e.title," "),r(),_(e.shortDescription?10:-1),r(2),p("title",e.eventType),r(),h(" ",e.eventType," "),r(4),S(e.startDate),r(2),S(e.endDate),r(2),p("title",e.location),r(),h(" ",e.location," "),r(3),S(e.currentParticipants),r(),_(e.maxParticipants?26:-1),r(3),E(e.isFeatured?"btn-warning":"btn-outline-warning"),P("aria-pressed",e.isFeatured),r(2),p("routerLink",F(28,A,e.id)),r(2),p("routerLink",F(30,Te,e.id)),r(2),_(a.canPublish(e)?35:-1),r(),_(a.canOpenReg(e)?36:-1),r(),_(a.canCloseReg(e)?37:-1),r(),_(a.canCancel(e)?38:-1)}}function _t(o,n){if(o&1){let e=x();t(0,"div",103)(1,"table",145)(2,"thead",146)(3,"tr")(4,"th",147),l(5,"Estado"),i(),t(6,"th",148),C("click",function(){v(e);let s=c(2);return b(s.setSort("title"))}),t(7,"div",26)(8,"span"),l(9,"Evento"),i(),u(10,tt,1,2,"i",149)(11,it,1,0,"i",150),i()(),t(12,"th",151),l(13,"Tipo"),i(),t(14,"th",152),C("click",function(){v(e);let s=c(2);return b(s.setSort("start_date"))}),t(15,"div",26)(16,"span"),l(17,"Fechas"),i(),u(18,nt,1,2,"i",149)(19,ot,1,0,"i",150),i()(),t(20,"th",153),l(21,"Ubicaci\xF3n"),i(),t(22,"th",154),C("click",function(){v(e);let s=c(2);return b(s.setSort("current_participants"))}),t(23,"div",26)(24,"span"),l(25,"Participantes"),i(),u(26,rt,1,2,"i",149)(27,at,1,0,"i",150),i()(),t(28,"th",155),l(29,"Acciones"),i()()(),t(30,"tbody"),I(31,ut,39,32,"tr",null,N().trackById,!0),i()()()}if(o&2){let e=c(2);r(6),L("text-primary",e.sortSig().field==="title"),r(4),_(e.sortSig().field==="title"?10:11),r(4),L("text-primary",e.sortSig().field==="start_date"),r(4),_(e.sortSig().field==="start_date"?18:19),r(4),L("text-primary",e.sortSig().field==="current_participants"),r(4),_(e.sortSig().field==="current_participants"?26:27),r(5),M(e.events())}}function vt(o,n){if(o&1&&(u(0,et,4,0,"div",102),u(1,_t,33,9,"div",103)),o&2){let e=c();_(e.view()==="cards"?0:-1),r(),_(e.view()==="table"?1:-1)}}function bt(o,n){if(o&1){let e=x();t(0,"div",62)(1,"app-pagination",180),C("pageChange",function(s){v(e);let m=c();return b(m.onPageChange(s))})("pageSizeChange",function(s){v(e);let m=c();return b(m.onPageSizeChange(s))}),i()()}if(o&2){let e=c();r(),p("totalItems",e.totalItems())("pageSize",e.pageSize())("currentPage",e.currentPage())("showPageSizeSelector",!0)("pageSizeOptions",Z(10,Le))("showGoToPage",!0)("showRangeInfo",!0)("showFirstLastButtons",!0)("maxVisiblePages",5)("density","compact")}}var we=class o{fb=k(ge);destroyRef=k(H);eventService=k(ye);staticData=k(Ee);confirmModal=ie("confirmModal");EventStatus=le;LocationType=se;currentPage=f(1);pageSize=f(12);sortSig=f({field:"start_date",direction:"asc"});showFilters=f(!0);viewSig=f("cards");errorSig=f(null);queryParams=w(()=>({page:this.currentPage(),size:this.pageSize(),filters:this.buildFilters(this.formFilters()),sort:this.sortSig()}));eventsSig=D(this.eventService.events$,{initialValue:[],requireSync:!1});loadingSig=D(this.eventService.loading$,{initialValue:!1,requireSync:!1});eventTypesSig=D(this.staticData.eventTypes$,{initialValue:null,requireSync:!1});events=w(()=>this.eventsSig()??[]);isLoading=w(()=>this.loadingSig()??!1);eventTypes=w(()=>this.eventTypesSig());totalItems=f(0);totalPages=w(()=>Math.ceil(this.totalItems()/this.pageSize()));errorMessage=w(()=>this.errorSig());confirmTitle=f("");confirmMessage=f("");pendingActionSig=f(null);pendingEventIdSig=f(null);form=this.fb.group({search:this.fb.control(""),status:this.fb.control(""),eventTypeId:this.fb.control(""),locationType:this.fb.control(""),dateFrom:this.fb.control(""),dateTo:this.fb.control(""),isPublic:this.fb.control("")});refresh$=new B(!0);formFilters=f({search:null,status:null,eventTypeId:null,locationType:null,dateFrom:null,dateTo:null,isPublic:null});hasActiveFilters=w(()=>{let n=this.formFilters();return!!(n.search?.trim()||n.status||n.eventTypeId||n.locationType||n.dateFrom||n.dateTo||n.isPublic)});activeFiltersCount=w(()=>{let n=this.formFilters(),e=0;return n.search?.trim()&&e++,n.status&&e++,n.eventTypeId&&e++,n.locationType&&e++,(n.dateFrom||n.dateTo)&&e++,n.isPublic&&e++,e});trackById=(n,e)=>e.id;ngOnInit(){this.staticData.loadEventTypes().pipe(V(this.destroyRef)).subscribe(),this.form.valueChanges.pipe(q(250),U(),V(this.destroyRef)).subscribe(n=>{this.formFilters.set(n),this.currentPage.set(1),this.load()}),this.refresh$.pipe(j(()=>this.fetch()),V(this.destroyRef)).subscribe()}fetch(){this.errorSig.set(null);let n=this.currentPage(),e=this.pageSize(),a=this.sortSig();return this.eventService.getEvents(n,e,this.buildFilters(this.form.value),a).pipe($(s=>{this.totalItems.set(s.pagination.totalItems)}),G(s=>(console.error("Error al cargar eventos:",s),this.errorSig.set("Error al cargar eventos"),O(null))))}load(){this.refresh$.next(!0)}buildFilters(n){let e={};return n.search&&(e.query=n.search),n.status&&(e.status=[n.status]),n.eventTypeId&&(e.eventTypeId=[Number(n.eventTypeId)]),n.locationType&&(e.locationType=[n.locationType]),n.dateFrom&&(e.dateFrom=n.dateFrom),n.dateTo&&(e.dateTo=n.dateTo),n.isPublic==="true"&&(e.isPublic=!0),n.isPublic==="false"&&(e.isPublic=!1),e}view=()=>this.viewSig();toggleFiltersPanel(){this.showFilters.update(n=>!n)}clearSearch(){this.form.patchValue({search:""})}clearFilters(){this.errorSig.set(null),this.form.reset({search:"",status:"",eventTypeId:"",locationType:"",dateFrom:"",dateTo:"",isPublic:""}),this.formFilters.set({search:null,status:null,eventTypeId:null,locationType:null,dateFrom:null,dateTo:null,isPublic:null}),this.sortSig.set({field:"start_date",direction:"asc"}),this.currentPage.set(1),this.load()}setView(n){this.viewSig.set(n)}setPageSize(n){this.pageSize.set(Number(n)),this.currentPage.set(1),this.load()}setSort(n){this.sortSig().field===n?this.sortSig.update(a=>R(z({},a),{direction:a.direction==="asc"?"desc":"asc"})):this.sortSig.set({field:n,direction:"asc"}),this.load()}onPageChange(n){this.currentPage.set(n),this.load()}onPageSizeChange(n){this.setPageSize(n)}getStateBadgeClass(n){switch(n){case"draft":return"bg-secondary-subtle text-secondary";case"published":return"bg-info-subtle text-info";case"reg_open":return"bg-success-subtle text-success";case"reg_closed":return"bg-warning-subtle text-warning";case"active":return"bg-primary-subtle text-primary";case"completed":return"bg-success-subtle text-success";case"cancelled":return"bg-danger-subtle text-danger";default:return"bg-secondary-subtle text-secondary"}}getStateIcon(n){switch(n){case"draft":return"pencil-square";case"published":return"eye";case"reg_open":return"door-open";case"reg_closed":return"door-closed";case"active":return"play-circle";case"completed":return"check-circle";case"cancelled":return"x-circle";default:return"circle"}}getStatusLabel(n){switch(n){case"draft":return"Borrador";case"published":return"Publicado";case"reg_open":return"Inscripciones Abiertas";case"reg_closed":return"Inscripciones Cerradas";case"active":return"En Curso";case"completed":return"Finalizado";case"cancelled":return"Cancelado";default:return"Desconocido"}}toggleFeatured(n){this.eventService.toggleFeatured(n).pipe(V(this.destroyRef)).subscribe({next:()=>this.load(),error:e=>console.error("Error al destacar evento:",e)})}canPublish=n=>n.status==="draft"||n.status==="published";canOpenReg=n=>n.status==="published";canCloseReg=n=>n.status==="reg_open";canCancel=n=>n.status!=="cancelled"&&n.status!=="completed";openConfirm(n,e,a,s,m){this.confirmTitle.set(e),this.confirmMessage.set(a),this.pendingActionSig.set(s),this.pendingEventIdSig.set(m),n.show()}onConfirmAccepted(){let n=this.pendingEventIdSig(),e=this.pendingActionSig();if(!n||!e){this.pendingActionSig.set(null),this.pendingEventIdSig.set(null);return}(e==="publish"?this.eventService.publishEvent(n):e==="open"?this.eventService.openRegistrations(n):e==="close"?this.eventService.closeRegistrations(n):this.eventService.changeEventStatus(n,"cancelled")).pipe(V(this.destroyRef)).subscribe({next:()=>this.load(),error:s=>console.error("Error en operaci\xF3n:",s)}),this.pendingActionSig.set(null),this.pendingEventIdSig.set(null)}onConfirmCancelled(){this.pendingActionSig.set(null),this.pendingEventIdSig.set(null)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=K({type:o,selectors:[["app-event-list"]],viewQuery:function(e,a){e&1&&J(a.confirmModal,Fe,5),e&2&&W()},decls:88,vars:23,consts:[["confirmModal",""],["searchInput",""],[1,"container-fluid","py-3"],[3,"accepted","cancelled","title","message","confirmText"],["aria-label","breadcrumb",1,"mb-3"],[1,"breadcrumb","mb-0","fs-7"],[1,"breadcrumb-item"],["routerLink","/",1,"text-decoration-none","link-primary"],[1,"bi","bi-house-door","me-1"],[1,"d-none","d-sm-inline"],["aria-current","page",1,"breadcrumb-item","active"],[1,"d-flex","flex-column","flex-md-row","align-items-start","align-items-md-center","justify-content-between","gap-3","mb-4"],[1,"order-1","order-md-0"],[1,"h5","mb-1","fw-semibold","d-flex","align-items-center"],[1,"bi","bi-calendar-event","me-2","text-primary"],[1,"badge","bg-primary-subtle","text-primary","ms-2","fs-7"],[1,"text-muted","small","mb-0"],[1,"d-flex","flex-wrap","gap-2","order-0","order-md-1"],["type","button","title","Actualizar datos",1,"btn","btn-outline-secondary","btn-sm","d-flex","align-items-center",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"],[1,"bi","bi-arrow-clockwise","me-1"],["routerLink","/eventos/crear","title","Crear nuevo evento",1,"btn","btn-primary","btn-sm","d-flex","align-items-center"],[1,"bi","bi-plus-circle","me-1"],[1,"d-none","d-lg-inline","ms-1"],[1,"card","border-0","shadow-sm","mb-4"],[1,"card-header","bg-light","border-bottom","py-3"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","gap-3"],[1,"d-flex","align-items-center","gap-2"],[1,"bi","bi-funnel","text-primary","fs-5"],[1,"mb-0","fw-semibold"],[1,"badge","bg-primary","rounded-pill"],["role","group",1,"btn-group","btn-group-sm"],["type","button",1,"btn","btn-outline-secondary","border-0",3,"click","title"],[1,"bi"],["type","button","title","Limpiar todos los filtros",1,"btn","btn-outline-danger","border-0"],[1,"card-body","py-4"],[1,"card","border-0","shadow-sm"],[1,"d-flex","flex-column","flex-lg-row","align-items-start","align-items-lg-center","gap-3"],[1,"d-flex","align-items-center","gap-3","flex-grow-1"],[1,"bi","bi-list-ul","text-primary","fs-5"],[1,"badge","bg-info-subtle","text-info"],[1,"d-flex","flex-wrap","align-items-center","gap-3"],[1,"d-flex","align-items-center","gap-2","small"],[1,"form-label","mb-0","text-muted","d-none","d-md-inline"],["aria-label","Elementos por p\xE1gina",1,"form-select","form-select-sm",2,"width","auto","min-width","70px",3,"change","value"],["value","6"],["value","12"],["value","24"],["value","48"],[1,"text-muted","d-none","d-md-inline"],["role","group","aria-label","Modo de vista",1,"btn-group","btn-group-sm"],["type","radio","name","viewMode","id","cardsView","autocomplete","off",1,"btn-check",3,"change","checked"],["for","cardsView","title","Vista tarjetas",1,"btn","btn-outline-primary"],[1,"bi","bi-grid-3x3-gap","me-1"],[1,"d-none","d-xl-inline"],["type","radio","name","viewMode","id","tableView","autocomplete","off",1,"btn-check",3,"change","checked"],["for","tableView","title","Vista tabla",1,"btn","btn-outline-primary"],[1,"bi","bi-table","me-1"],[1,"card-body","p-0"],[1,"d-flex","justify-content-center","align-items-center","py-5"],[1,"text-center","py-5"],[1,"card-footer","bg-light","border-top","py-2"],["type","button","title","Limpiar todos los filtros",1,"btn","btn-outline-danger","border-0",3,"click"],[1,"bi","bi-x-circle"],["role","search","aria-label","Filtros de eventos",3,"formGroup"],[1,"row","g-3"],[1,"col-12","col-md-6","col-lg-4","col-xl-3"],[1,"form-label","fw-semibold","small"],[1,"input-group"],[1,"input-group-text","bg-light","border-end-0"],[1,"bi","bi-search","text-muted"],["type","search","placeholder","Buscar eventos, t\xEDtulo, descripci\xF3n...","formControlName","search",1,"form-control","border-start-0","bg-light"],["type","button","title","Limpiar b\xFAsqueda",1,"btn","btn-outline-secondary","border-start-0"],["formControlName","status","aria-label","Estado",1,"form-select","bg-light"],["value",""],[3,"value"],["formControlName","eventTypeId","aria-label","Tipo",1,"form-select","bg-light"],[1,"col-12","col-md-6","col-lg-3","col-xl-2"],["formControlName","locationType","aria-label","Modalidad",1,"form-select","bg-light"],["type","date","formControlName","dateFrom","aria-label","Fecha desde",1,"form-control","bg-light"],["type","date","formControlName","dateTo","aria-label","Fecha hasta",1,"form-control","bg-light"],["formControlName","isPublic","aria-label","Acceso",1,"form-select","bg-light"],["value","true"],["value","false"],["type","button","title","Limpiar b\xFAsqueda",1,"btn","btn-outline-secondary","border-start-0",3,"click"],[1,"bi","bi-x"],[1,"text-center"],["role","status",1,"spinner-border","text-primary","mb-3",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[1,"text-muted","mb-0"],[1,"text-danger","mb-4"],[1,"bi","bi-exclamation-triangle","display-1","opacity-25"],[1,"text-danger","mb-2"],[1,"text-muted","mb-4"],[1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-arrow-clockwise","me-2"],[1,"bi","bi-calendar-x","display-1","opacity-25"],[1,"text-muted","mb-2"],[1,"bi","bi-funnel","me-2"],["routerLink","/eventos/crear",1,"btn","btn-primary"],[1,"bi","bi-plus-circle","me-2"],[1,"p-3","p-md-4"],[1,"table-responsive"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-3","row-cols-lg-4","row-cols-xl-5","row-cols-xxl-6","g-3"],[1,"col"],[1,"card","h-100","border-0","shadow-sm","position-relative"],[1,"position-relative"],[1,"card-body","py-3"],[1,"d-flex","justify-content-between","align-items-start","mb-2"],[1,"d-flex","align-items-center","gap-2","mb-2"],[1,"bi","bi-calendar-date","text-primary","small"],[1,"text-muted"],[1,"card-title","mb-2","lh-base","fw-semibold","text-truncate",3,"title"],[1,"text-decoration-none","text-dark","stretched-link",3,"routerLink"],[1,"card-text","text-muted","small","mb-3","lh-sm","text-truncate",3,"title"],[1,"mb-3"],[1,"bi","bi-tag","text-muted","small"],[1,"text-muted","small","text-truncate"],[1,"bi","bi-people","text-success","small"],[1,"text-success","small","fw-medium"],[1,"bi","bi-geo-alt","text-muted","small"],[1,"card-footer","bg-transparent","border-top","py-2"],[1,"d-flex","gap-1","justify-content-end"],["type","button","title","Destacar evento",1,"btn","btn-sm","position-relative",2,"z-index","10",3,"click"],[1,"bi","bi-star-fill"],["title","Ver detalles",1,"btn","btn-outline-info","btn-sm","position-relative",2,"z-index","10",3,"click","routerLink"],[1,"bi","bi-eye"],["title","Editar evento",1,"btn","btn-outline-primary","btn-sm","position-relative",2,"z-index","10",3,"click","routerLink"],[1,"bi","bi-pencil"],["title","Publicar evento",1,"btn","btn-outline-success","btn-sm","position-relative",2,"z-index","10"],["title","Abrir inscripciones",1,"btn","btn-outline-info","btn-sm","position-relative",2,"z-index","10"],["title","Cerrar inscripciones",1,"btn","btn-outline-warning","btn-sm","position-relative",2,"z-index","10"],["title","Cancelar evento",1,"btn","btn-outline-danger","btn-sm","position-relative",2,"z-index","10"],[1,"card-img-top",2,"height","180px","object-fit","cover",3,"src","alt"],[1,"badge","position-absolute","top-0","start-0","m-2"],[1,"bi","me-1"],[1,"badge"],["title","Publicar evento",1,"btn","btn-outline-success","btn-sm","position-relative",2,"z-index","10",3,"click"],[1,"bi","bi-megaphone"],["title","Abrir inscripciones",1,"btn","btn-outline-info","btn-sm","position-relative",2,"z-index","10",3,"click"],[1,"bi","bi-door-open"],["title","Cerrar inscripciones",1,"btn","btn-outline-warning","btn-sm","position-relative",2,"z-index","10",3,"click"],[1,"bi","bi-door-closed"],["title","Cancelar evento",1,"btn","btn-outline-danger","btn-sm","position-relative",2,"z-index","10",3,"click"],[1,"table","table-hover","mb-0"],[1,"table-light"],["scope","col",1,"fw-semibold","border-0"],["scope","col","title","Ordenar por t\xEDtulo",1,"fw-semibold","border-0","cursor-pointer","user-select-none",3,"click"],[1,"bi",3,"class"],[1,"bi","bi-arrow-down-up","opacity-50"],["scope","col",1,"fw-semibold","border-0","d-none","d-md-table-cell"],["scope","col","title","Ordenar por fecha",1,"fw-semibold","border-0","cursor-pointer","user-select-none","d-none","d-lg-table-cell",3,"click"],["scope","col",1,"fw-semibold","border-0","d-none","d-xl-table-cell"],["scope","col","title","Ordenar por participantes",1,"fw-semibold","border-0","cursor-pointer","user-select-none","d-none","d-lg-table-cell",3,"click"],["scope","col",1,"fw-semibold","border-0",2,"width","140px"],[1,"border-0"],[1,"badge","rounded-pill"],[1,"d-none","d-lg-inline"],[1,"fw-medium","text-truncate",2,"max-width","200px",3,"title"],[1,"text-decoration-none","text-dark",3,"routerLink"],[1,"text-muted","text-truncate","d-block",2,"max-width","200px",3,"title"],[1,"border-0","d-none","d-md-table-cell"],[1,"text-truncate",2,"max-width","100px",3,"title"],[1,"border-0","d-none","d-lg-table-cell"],[1,"border-0","d-none","d-xl-table-cell"],[1,"text-truncate",2,"max-width","120px",3,"title"],[1,"fw-medium"],[1,"btn-group","btn-group-sm"],["type","button","title","Destacar evento",1,"btn",3,"click"],["title","Ver detalles",1,"btn","btn-outline-info",3,"routerLink"],["title","Editar evento",1,"btn","btn-outline-primary",3,"routerLink"],["title","Publicar evento",1,"btn","btn-outline-success"],["title","Abrir inscripciones",1,"btn","btn-outline-info"],["title","Cerrar inscripciones",1,"btn","btn-outline-warning"],["title","Cancelar evento",1,"btn","btn-outline-danger"],["title","Publicar evento",1,"btn","btn-outline-success",3,"click"],["title","Abrir inscripciones",1,"btn","btn-outline-info",3,"click"],["title","Cerrar inscripciones",1,"btn","btn-outline-warning",3,"click"],["title","Cancelar evento",1,"btn","btn-outline-danger",3,"click"],["containerClass","justify-content-between align-items-center",1,"mb-0",3,"pageChange","pageSizeChange","totalItems","pageSize","currentPage","showPageSizeSelector","pageSizeOptions","showGoToPage","showRangeInfo","showFirstLastButtons","maxVisiblePages","density"]],template:function(e,a){if(e&1){let s=x();t(0,"div",2)(1,"app-confirm-modal",3,0),C("accepted",function(){return v(s),b(a.onConfirmAccepted())})("cancelled",function(){return v(s),b(a.onConfirmCancelled())}),i(),t(3,"nav",4)(4,"ol",5)(5,"li",6)(6,"a",7),d(7,"i",8),t(8,"span",9),l(9,"Inicio"),i()()(),t(10,"li",10),l(11,"Eventos"),i()()(),t(12,"div",11)(13,"div",12)(14,"h1",13),d(15,"i",14),t(16,"span"),l(17,"Gesti\xF3n de Eventos"),i(),u(18,ke,2,1,"span",15),i(),t(19,"p",16),l(20,"Administra eventos acad\xE9micos y corporativos"),i()(),t(21,"div",17)(22,"button",18),C("click",function(){return v(s),b(a.load())}),u(23,Pe,1,0,"span",19)(24,Ie,1,0,"i",20),t(25,"span",9),l(26,"Actualizar"),i()(),t(27,"a",21),d(28,"i",22),t(29,"span"),l(30,"Nuevo"),i(),t(31,"span",23),l(32,"Evento"),i()()()(),t(33,"div",24)(34,"div",25)(35,"div",26)(36,"div",27)(37,"div",28),d(38,"i",29),t(39,"h6",30),l(40,"Filtros de B\xFAsqueda"),i()(),u(41,Me,2,1,"span",31),i(),t(42,"div",32)(43,"button",33),C("click",function(){return v(s),b(a.toggleFiltersPanel())}),d(44,"i",34),i(),u(45,De,2,0,"button",35),i()()(),u(46,Re,69,13,"div",36),i(),t(47,"div",37)(48,"div",25)(49,"div",38)(50,"div",39)(51,"div",28),d(52,"i",40),t(53,"h6",30),l(54,"Lista de Eventos"),i()(),u(55,Be,2,1,"span",41),i(),t(56,"div",42)(57,"div",43)(58,"label",44),l(59,"Mostrar:"),i(),t(60,"select",45),C("change",function(g){return v(s),b(a.setPageSize(g.target.value))}),t(61,"option",46),l(62,"6"),i(),t(63,"option",47),l(64,"12"),i(),t(65,"option",48),l(66,"24"),i(),t(67,"option",49),l(68,"48"),i()(),t(69,"span",50),l(70,"por p\xE1gina"),i()(),t(71,"div",51)(72,"input",52),C("change",function(){return v(s),b(a.setView("cards"))}),i(),t(73,"label",53),d(74,"i",54),t(75,"span",55),l(76,"Tarjetas"),i()(),t(77,"input",56),C("change",function(){return v(s),b(a.setView("table"))}),i(),t(78,"label",57),d(79,"i",58),t(80,"span",55),l(81,"Tabla"),i()()()()()(),t(82,"div",59),u(83,Oe,7,0,"div",60)(84,$e,10,1,"div",61)(85,Ue,5,1,"div",61)(86,vt,2,2),i(),u(87,bt,2,11,"div",62),i()()}e&2&&(r(),p("title",a.confirmTitle())("message",a.confirmMessage())("confirmText","Confirmar"),r(17),_(a.totalItems()>0?18:-1),r(4),p("disabled",a.isLoading()),r(),_(a.isLoading()?23:24),r(10),L("border-primary",a.hasActiveFilters()),r(8),_(a.hasActiveFilters()?41:-1),r(2),p("title",a.showFilters()?"Ocultar filtros":"Mostrar filtros"),P("aria-expanded",a.showFilters()),r(),L("bi-chevron-up",a.showFilters())("bi-chevron-down",!a.showFilters()),r(),_(a.hasActiveFilters()?45:-1),r(),_(a.showFilters()?46:-1),r(9),_(a.totalItems()>0?55:-1),r(5),p("value",a.pageSize()),r(12),p("checked",a.view()==="cards"),r(5),p("checked",a.view()==="table"),r(6),_(a.isLoading()?83:a.errorMessage()?84:a.events().length===0?85:86),r(4),_(a.totalPages()>1?87:-1))},dependencies:[oe,ae,re,fe,pe,be,Ce,ce,ve,de,me,ue,_e,xe,he,Se,ne],encapsulation:2,changeDetection:0})};export{we as EventListComponent};
