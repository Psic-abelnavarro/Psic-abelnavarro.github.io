function o(e){return{id:e.id,email:e.email,fullName:e.fullName,documentType:e.documentType,documentNumber:e.documentNumber,phone:e.phone,departmentId:e.departmentId,provinceId:e.provinceId,districtId:e.districtId,institution:e.institution,jobTitle:e.jobTitle,role:e.role,isActive:e.isActive,profileCompleted:e.profileCompleted,emailVerified:e.emailVerified,phoneVerified:e.phoneVerified,eventsAttended:e.eventsAttended,certificatesEarned:e.certificatesEarned,lastLogin:e.lastLogin?.toISOString(),createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt.toISOString()}}function s(e){return{id:e.id,email:e.email,fullName:e.fullName,documentType:e.documentType,documentNumber:e.documentNumber,phone:e.phone,departmentId:e.departmentId,provinceId:e.provinceId,districtId:e.districtId,institution:e.institution,jobTitle:e.jobTitle,role:e.role,isActive:e.isActive,profileCompleted:e.profileCompleted,emailVerified:e.emailVerified,phoneVerified:e.phoneVerified,acceptsMarketing:!1,eventsAttended:e.eventsAttended,certificatesEarned:e.certificatesEarned,loginCount:0,lastLogin:e.lastLogin?new Date(e.lastLogin):void 0,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}}function c(e){return{email:e.email,fullName:e.fullName.trim(),documentType:e.documentType,documentNumber:e.documentNumber?.trim(),phone:e.phone?.trim(),departmentId:e.departmentId,institution:e.institution?.trim(),jobTitle:e.jobTitle?.trim(),role:"participant",profileCompleted:!!(e.documentNumber&&e.phone&&e.institution),emailVerified:!1,phoneVerified:!1,isActive:!0,eventsAttended:0,certificatesEarned:0}}function u(e){return{id:e.id,title:e.title,slug:e.slug,shortDescription:e.shortDescription,description:e.description,eventTypeId:e.eventTypeId,categoryId:e.categoryId,organizerId:e.organizerId,startDate:e.startDate.toISOString(),endDate:e.endDate.toISOString(),registrationStart:e.registrationStart?.toISOString(),registrationEnd:e.registrationEnd?.toISOString(),locationType:e.locationType,venueName:e.venueName,venueAddress:e.venueAddress,venueCity:e.venueCity,venueCoordinates:e.venueCoordinates,maxParticipants:e.maxParticipants,currentParticipants:e.currentParticipants,waitlistEnabled:e.waitlistEnabled,minimumAttendancePercentage:e.minimumAttendancePercentage,durationHours:e.durationHours,requiresCertificate:e.requiresCertificate,cost:e.cost,currency:e.currency,earlyBirdCost:e.earlyBirdCost,earlyBirdDeadline:e.earlyBirdDeadline?.toISOString(),status:e.status,isFeatured:e.isFeatured,isActive:e.isActive,isPublic:e.isPublic,requiresApproval:e.requiresApproval,tags:e.tags||[],keywords:e.keywords,metadata:e.metadata||{},createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt.toISOString()}}function l(e,t){let r=new Date,i=D(e.title);return{title:e.title.trim(),slug:i,shortDescription:e.shortDescription?.trim(),description:e.description?.trim(),eventTypeId:e.eventTypeId,categoryId:e.categoryId,organizerId:t,startDate:new Date(e.startDate),endDate:new Date(e.endDate),registrationStart:e.registrationStart?new Date(e.registrationStart):void 0,registrationEnd:e.registrationEnd?new Date(e.registrationEnd):void 0,locationType:e.locationType,venueName:e.venueName?.trim(),venueAddress:e.venueAddress?.trim(),venueCity:e.venueCity?.trim(),venueCoordinates:e.venueCoordinates,maxParticipants:e.maxParticipants,currentParticipants:0,waitlistEnabled:e.waitlistEnabled||!1,minimumAttendancePercentage:e.minimumAttendancePercentage||80,durationHours:e.durationHours,requiresCertificate:e.requiresCertificate||!1,cost:e.cost||0,currency:e.currency||"PEN",earlyBirdCost:e.earlyBirdCost,earlyBirdDeadline:e.earlyBirdDeadline?new Date(e.earlyBirdDeadline):void 0,status:"draft",isFeatured:!1,isActive:!0,isPublic:e.isPublic!==!1,requiresApproval:e.requiresApproval||!1,tags:e.tags||[],keywords:e.keywords?.trim(),metadata:e.metadata||{},createdAt:r,updatedAt:r}}function d(e){return{id:e.id,eventId:e.eventId,userId:e.userId,participantRoleId:e.participantRoleId,currentStateId:e.currentStateId,previousStateId:e.previousStateId,stateChangedAt:e.stateChangedAt.toISOString(),stateChangedBy:e.stateChangedBy,registrationDate:e.registrationDate.toISOString(),confirmationDate:e.confirmationDate?.toISOString(),paymentDate:e.paymentDate?.toISOString(),checkInDate:e.checkInDate?.toISOString(),attendanceVerifiedDate:e.attendanceVerifiedDate?.toISOString(),attendancePercentage:e.attendancePercentage,attendanceVerified:e.attendanceVerified,certificateEligible:e.certificateEligible,certificateIssued:e.certificateIssued,amountPaid:e.amountPaid,currency:e.currency,paymentMethod:e.paymentMethod,paymentReference:e.paymentReference,paymentGateway:e.paymentGateway,registrationSource:e.registrationSource,notes:e.notes,metadata:e.metadata||{},createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt.toISOString()}}function m(e,t){let r=new Date;return{eventId:e.eventId,userId:t,participantRoleId:e.participantRoleId||1,currentStateId:1,registrationDate:r,attendancePercentage:0,attendanceVerified:!1,certificateEligible:!1,certificateIssued:!1,amountPaid:0,currency:"PEN",registrationSource:"web",notes:e.notes?.trim(),metadata:e.metadata||{},createdAt:r,updatedAt:r}}function p(e){return{id:e.id,userId:e.userId,eventId:e.eventId,participantRoleId:e.participantRoleId,templateId:e.templateId,certificateNumber:e.certificateNumber,verificationCode:e.verificationCode,shortCode:e.shortCode,issueDate:e.issueDate.toISOString(),expiresDate:e.expiresDate?.toISOString(),isValid:e.isValid,revocationReason:e.revocationReason,revokedAt:e.revokedAt?.toISOString(),revokedBy:e.revokedBy,downloadCount:e.downloadCount,verificationCount:e.verificationCount,lastDownloaded:e.lastDownloaded?.toISOString(),lastVerified:e.lastVerified?.toISOString(),certificateHash:e.certificateHash,qrData:e.qrData,blockchainTx:e.blockchainTx,metadata:e.metadata||{},createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt.toISOString(),verificationUrl:`${w()}/verify/${e.shortCode}`}}function g(e){return{id:e.id,fullName:e.fullName,email:e.email,documentType:e.documentType,documentNumber:e.documentNumber,phone:e.phone,institution:e.institution,jobTitle:e.jobTitle,role:e.role,roleLabel:y(e.role),isActive:e.isActive,statusLabel:e.isActive?"Activo":"Inactivo",statusColor:e.isActive?"success":"danger",emailVerified:e.emailVerified,phoneVerified:e.phoneVerified,eventsCount:e.eventsAttended,certificatesCount:e.certificatesEarned,joinedDate:n(e.createdAt),lastActivity:e.lastLogin?n(e.lastLogin):void 0,profileCompletion:I(e),departmentName:e.departmentInfo?.name,avatar:b(e.fullName)}}function f(e){let t=new Date,r=new Date(e.startDate),i=new Date(e.endDate),a=Math.ceil((r.getTime()-t.getTime())/(1e3*60*60*24));return{id:e.id,title:e.title,shortDescription:e.shortDescription,eventType:e.eventTypeInfo?.name||"Evento",eventTypeIcon:e.eventTypeInfo?.icon||"event",eventTypeColor:e.eventTypeInfo?.color||"primary",startDate:n(e.startDate),endDate:n(e.endDate),duration:C(e.durationHours),location:S(e),locationType:e.locationType,organizer:e.organizer?.fullName||"Organizador",organizerInstitution:e.organizer?.institution,currentParticipants:e.currentParticipants,maxParticipants:e.maxParticipants,occupancyPercentage:e.occupancyPercentage,cost:e.cost,currency:e.currency,costLabel:v(e.cost,e.currency),status:e.status,statusLabel:A(e.status),statusColor:E(e.status),registrationStatus:e.registrationStatus==="not_configured"?"not_started":e.registrationStatus,registrationStatusLabel:T(e.registrationStatus||"not_started"),registrationStatusColor:h(e.registrationStatus||"not_started"),isUpcoming:t<r,isOngoing:t>=r&&t<=i,isFinished:t>i,daysUntilStart:a>0?a:void 0,tags:e.tags,userRegistration:e.userRegistration?P(e.userRegistration):"not_registered",canRegister:R(e,t),requiresApproval:e.requiresApproval,isFeatured:e.isFeatured,slug:e.slug,thumbnailUrl:N(e)}}function D(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}function y(e){return{admin:"Administrador",organizer:"Organizador",participant:"Participante"}[e]||e}function I(e){let t=0,r=0;return r+=3,e.email&&t++,e.fullName&&t++,e.documentType&&t++,r+=5,e.documentNumber&&t++,e.phone&&t++,e.departmentId&&t++,e.institution&&t++,e.jobTitle&&t++,Math.round(t/r*100)}function b(e){return`https://ui-avatars.com/api/?name=${e.split(" ").map(r=>r.charAt(0).toUpperCase()).slice(0,2).join("")}&background=random&size=128`}function n(e){return new Date(e).toLocaleDateString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric"})}function C(e){if(!e)return"No definido";if(e<1)return`${Math.round(e*60)} min`;if(e===1)return"1 hora";if(e<24)return`${e} horas`;let t=Math.floor(e/24),r=e%24;return r===0?t===1?"1 d\xEDa":`${t} d\xEDas`:`${t}d ${r}h`}function S(e){if(e.locationType==="virtual")return"Virtual";if(e.locationType==="hibrido")return e.venueName?`${e.venueName} + Virtual`:"H\xEDbrido";let t=[];return e.venueName&&t.push(e.venueName),e.venueCity&&t.push(e.venueCity),t.length>0?t.join(", "):"Presencial"}function v(e,t){return e===0?"Gratuito":new Intl.NumberFormat("es-PE",{style:"currency",currency:t}).format(e)}function A(e){return{draft:"Borrador",published:"Publicado",reg_open:"Inscripciones Abiertas",reg_closed:"Inscripciones Cerradas",active:"En Curso",completed:"Finalizado",cancelled:"Cancelado"}[e]||e}function E(e){return{draft:"secondary",published:"info",reg_open:"success",reg_closed:"warning",active:"primary",completed:"success",cancelled:"danger"}[e]||"secondary"}function T(e){return{not_configured:"No Configurado",not_started:"No Iniciado",open:"Abierto",closed:"Cerrado",full:"Lleno"}[e]||e}function h(e){return{not_configured:"secondary",not_started:"secondary",open:"success",closed:"warning",full:"danger"}[e]||"secondary"}function P(e){return e.attendanceVerified?"attended":e.confirmationDate?"confirmed":"registered"}function R(e,t){if(!e.isActive||!e.isPublic||e.status!=="reg_open")return!1;let r=new Date(e.startDate);if(t>=r)return!1;if(e.registrationEnd){let i=new Date(e.registrationEnd);if(t>i)return!1}return e.maxParticipants&&e.currentParticipants>=e.maxParticipants?e.waitlistEnabled:!0}function N(e){let t=new URLSearchParams({text:e.title,background:e.eventTypeInfo?.color||"007bff",color:"ffffff",size:"400x200"});return`https://via.placeholder.com/400x200/${t.get("background")?.slice(1)}/${t.get("color")}?text=${encodeURIComponent(e.title)}`}function w(){return typeof window<"u"?window.location.origin:"https://localhost:4200"}var _={user:{toDto:o,fromDto:s,toListItem:g,fromRegisterDto:c},event:{toDto:u,toCard:f,fromCreateDto:l},registration:{toDto:d,fromCreateDto:m},certificate:{toDto:p}};export{_ as a};
