import{c as m}from"./chunk-IYGYDPGO.js";import{l as I}from"./chunk-CF2QCA26.js";import{h as k}from"./chunk-NUA5R5QO.js";import{$b as P,Ac as O,Cb as _,Da as s,Fb as n,Hb as E,Na as y,Ra as S,_ as g,ac as M,da as x,ea as v,gb as c,hb as e,ib as t,jb as a,ma as h,q as d,qb as C,rb as p,tb as u,uc as w}from"./chunk-6O7NOF42.js";import"./chunk-LJ5XHLMQ.js";import{h as b}from"./chunk-FK42CRUA.js";function A(l,i){if(l&1){let r=C();e(0,"div",42),a(1,"i",43),n(2),e(3,"button",44),p("click",function(){x(r);let f=u();return v(f.clearError())}),t()()}if(l&2){let r=u();s(2),E(" ",r.errorMessage()," ")}}function L(l,i){l&1&&(e(0,"div",45)(1,"div",46)(2,"span",47),n(3,"Cargando..."),t()(),e(4,"p",48)(5,"small"),n(6,"Conectando con el servicio de autenticaci\xF3n..."),t()()())}var F=class l{authService=g(I);router=g(k);isLoading=m(this.authService.authState$.pipe(d(i=>i.loading)),{initialValue:!1});authError=m(this.authService.authState$.pipe(d(i=>i.error)),{initialValue:null});isAuthenticated=m(this.authService.authState$.pipe(d(i=>i.isAuthenticated)),{initialValue:!1});localError=h(null);errorMessage=P(()=>this.localError()||this.authError());authProviders=[{id:"google",name:"Google",icon:"fab fa-google",color:"danger",enabled:!0}];constructor(){M(()=>{this.isAuthenticated()&&this.redirectToIntendedDestination()}),this.clearError()}signInWithProvider(i){return b(this,null,function*(){try{this.clearError();let r={provider:i},o;switch(i){case"google":o=yield this.authService.signInWithGoogle(r);break;default:this.localError.set(`Proveedor ${i} no disponible a\xFAn`);return}!o.success&&o.error&&this.localError.set(o.error)}catch(r){this.localError.set(r.message||"Error al iniciar sesi\xF3n")}})}clearError(){this.localError.set(null),this.authService.clearError()}redirectToIntendedDestination(){let r=sessionStorage.getItem("intended-url")||"/";sessionStorage.removeItem("intended-url"),this.router.navigateByUrl(r)}static \u0275fac=function(r){return new(r||l)};static \u0275cmp=y({type:l,selectors:[["app-login"]],decls:69,vars:5,consts:[[1,"container-fluid","min-vh-100","d-flex"],[1,"row","w-100","m-0"],[1,"col-lg-6","d-none","d-lg-flex","flex-column","justify-content-center","align-items-center","bg-primary","text-white","p-5"],[1,"text-center"],[1,"mb-4"],[1,"fas","fa-certificate","display-1","opacity-75"],[1,"display-4","fw-bold","mb-3"],[1,"lead","mb-4","opacity-90"],[1,"row","text-start"],[1,"col-12","mb-3"],[1,"fas","fa-shield-alt","me-2"],[1,"fas","fa-qrcode","me-2"],[1,"col-12"],[1,"fas","fa-cloud","me-2"],[1,"col-lg-6","d-flex","flex-column","justify-content-center","align-items-center","p-5"],[1,"w-100",2,"max-width","400px"],[1,"text-center","mb-5"],[1,"fw-bold","text-dark","mb-2"],[1,"text-muted"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["class","text-center mb-4",4,"ngIf"],[1,"d-grid","gap-3"],["type","button",1,"btn","btn-outline-danger","btn-lg","d-flex","align-items-center","justify-content-center","py-3",3,"click","disabled"],[1,"fab","fa-google","me-3","fs-5"],[1,"fw-semibold"],["type","button","disabled","","title","Pr\xF3ximamente disponible",1,"btn","btn-outline-dark","btn-lg","d-flex","align-items-center","justify-content-center","py-3"],[1,"fab","fa-github","me-3","fs-5"],[1,"badge","bg-secondary","ms-auto"],["type","button","disabled","","title","Pr\xF3ximamente disponible",1,"btn","btn-outline-primary","btn-lg","d-flex","align-items-center","justify-content-center","py-3"],[1,"fab","fa-microsoft","me-3","fs-5"],[1,"position-relative","my-4"],[1,"position-absolute","top-50","start-50","translate-middle","bg-white","px-3","text-muted"],[1,"card","border-0","bg-light"],[1,"card-body","text-center","py-4"],[1,"fas","fa-info-circle","text-primary","mb-2"],[1,"card-title","text-dark"],[1,"card-text","small","text-muted","mb-0"],[1,"text-center","mt-5"],[1,"text-muted","small","mb-2"],[1,"fas","fa-shield-alt","me-1"],[1,"text-muted","small"],[1,"text-dark"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"fas","fa-exclamation-circle","me-2"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"text-center","mb-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-muted","mt-2","mb-0"]],template:function(r,o){r&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),a(5,"i",5),t(),e(6,"h1",6),n(7," Sistema de Certificados Digitales "),t(),e(8,"p",7),n(9," Gestiona eventos y emite certificados digitales verificables de forma segura y eficiente. "),t(),e(10,"div",8)(11,"div",9),a(12,"i",10),e(13,"small"),n(14,"Certificados con verificaci\xF3n blockchain"),t()(),e(15,"div",9),a(16,"i",11),e(17,"small"),n(18,"C\xF3digos QR para validaci\xF3n instant"),t()(),e(19,"div",12),a(20,"i",13),e(21,"small"),n(22,"Almacenamiento seguro en la nube"),t()()()()(),e(23,"div",14)(24,"div",15)(25,"div",16)(26,"h2",17),n(27,"Iniciar Sesi\xF3n"),t(),e(28,"p",18),n(29," Accede con tu cuenta autorizada para gestionar eventos y certificados "),t()(),S(30,A,4,1,"div",19)(31,L,7,0,"div",20),e(32,"div",21)(33,"button",22),p("click",function(){return o.signInWithProvider("google")}),a(34,"i",23),e(35,"span",24),n(36,"Continuar con Google"),t()(),e(37,"button",25),a(38,"i",26),e(39,"span",24),n(40,"Continuar con GitHub"),t(),e(41,"small",27),n(42,"Pronto"),t()(),e(43,"button",28),a(44,"i",29),e(45,"span",24),n(46,"Continuar con Microsoft"),t(),e(47,"small",27),n(48,"Pronto"),t()()(),e(49,"div",30),a(50,"hr",18),e(51,"span",31)(52,"small"),n(53,"Informaci\xF3n importante"),t()()(),e(54,"div",32)(55,"div",33),a(56,"i",34),e(57,"h6",35),n(58,"Acceso Autorizado"),t(),e(59,"p",36),n(60," Solo usuarios previamente registrados en el sistema pueden acceder. Si no puedes iniciar sesi\xF3n, contacta al administrador. "),t()()(),e(61,"div",37)(62,"p",38),a(63,"i",39),n(64," Conexi\xF3n segura mediante OAuth 2.0 "),t(),e(65,"p",40),n(66," Sistema desarrollado para "),e(67,"strong",41),n(68,"Gesti\xF3n de Eventos"),t()()()()()()()),r&2&&(s(30),c("ngIf",o.errorMessage()),s(),c("ngIf",o.isLoading()),s(),_("opacity-50",o.isLoading()),s(),c("disabled",o.isLoading()))},dependencies:[O,w],styles:['@charset "UTF-8";[_nghost-%COMP%]{--login-primary: #0d6efd;--login-danger: #dc3545;--login-success: #198754;--login-warning: #ffc107}.btn[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(var(--bs-primary-rgb),.25)}.alert[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInDown .3s ease-out}@keyframes _ngcontent-%COMP%_slideInDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.spinner-border[_ngcontent-%COMP%]{animation:spin 1s linear infinite}@media (max-width: 576px){.container-fluid[_ngcontent-%COMP%]   .p-5[_ngcontent-%COMP%]{padding:2rem 1rem!important}.btn-lg[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:1rem}.display-4[_ngcontent-%COMP%]{font-size:2rem}}.btn[disabled][_ngcontent-%COMP%]{pointer-events:none}.fab[_ngcontent-%COMP%]{width:20px;text-align:center}.card[_ngcontent-%COMP%]{transition:box-shadow .15s ease-in-out}.card[_ngcontent-%COMP%]:hover{box-shadow:0 .125rem .25rem #00000013}',"@media (max-width: 991.98px){.container-fluid[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--bs-primary) 0%,var(--bs-primary-dark, #0056b3) 100%)}.col-lg-6[_ngcontent-%COMP%]:last-child{background:#fff;border-radius:1rem 1rem 0 0;margin-top:10vh}}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.fade-enter[_ngcontent-%COMP%]{opacity:0;transform:translateY(-10px)}.fade-enter-active[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);transition:opacity .3s,transform .3s}"]})};export{F as LoginComponent};
