import{b as te}from"./chunk-22IHSIXM.js";import{b as A,c as G,d,e as O,f as Q,h as B,i as $,k as j,l as H,m as U,n as z,o as K,p as J,q as W,r as X,s as Y,u as Z}from"./chunk-KBXA6SDK.js";import{a as ee}from"./chunk-CYLPXQIR.js";import"./chunk-MPC7SZEK.js";import{a as g,c as D}from"./chunk-TMGCMHHJ.js";import{b as R}from"./chunk-IIPOJGOQ.js";import{h as V,i as M,l as L}from"./chunk-C3HOFUSH.js";import{$a as y,Bc as P,Da as l,Db as s,Gb as i,Hb as T,Na as w,Vb as q,Wb as F,_ as f,bb as u,cb as p,da as E,ea as C,fb as h,gb as _,hb as c,ia as N,ib as e,jb as t,kb as o,ma as x,rb as k,sb as S,ub as v,zc as I}from"./chunk-5W5GNUFO.js";import"./chunk-LJ5XHLMQ.js";import"./chunk-FK42CRUA.js";var ne=(a,r)=>r.key;function re(a,r){if(a&1&&(e(0,"option",54),i(1),t()),a&2){let n=r.$implicit;c("value",n.key),l(),T(n.value.name)}}function oe(a,r){if(a&1&&(h(0,re,2,2,"option",54,ne),q(2,"keyvalue")),a&2){let n=v(2);_(F(2,0,n.eventTypes()))}}function ae(a,r){a&1&&(o(0,"i",23),e(1,"span",12),i(2,"Crear R\xE1pido"),t())}function le(a,r){a&1&&(o(0,"span",55),e(1,"span",12),i(2,"Guardando..."),t())}function me(a,r){if(a&1){let n=k();e(0,"form",27),S("ngSubmit",function(){E(n);let b=v();return C(b.onQuickSubmit())}),e(1,"div",28)(2,"div",29)(3,"div",30)(4,"div",15)(5,"h6",31),o(6,"i",32),i(7," Informaci\xF3n B\xE1sica "),t()(),e(8,"div",33)(9,"div",34)(10,"label",35),i(11,"T\xEDtulo del evento"),t(),o(12,"input",36),e(13,"div",37),i(14,"T\xEDtulo es requerido (m\xEDn. 5 caracteres)."),t()(),e(15,"div",34)(16,"label",35),i(17,"Tipo de evento"),t(),e(18,"select",38)(19,"option",39),i(20,"Seleccione un tipo..."),t(),u(21,oe,3,2),t(),e(22,"div",37),i(23,"Seleccione un tipo de evento."),t()(),e(24,"div",40)(25,"label",35),i(26,"Descripci\xF3n (opcional)"),t(),o(27,"textarea",41),e(28,"div",42),i(29,"Esta informaci\xF3n puede completarse posteriormente."),t()()()()(),e(30,"div",43)(31,"div",44)(32,"div",45)(33,"h6",46),o(34,"i",47),i(35," Informaci\xF3n "),t()(),e(36,"div",33)(37,"p",48),i(38,"Crea un evento con valores por defecto. Podr\xE1s completarlo despu\xE9s."),t(),e(39,"ul",49)(40,"li"),i(41,"Estado inicial: borrador"),t(),e(42,"li"),i(43,"Visibilidad: p\xFAblica"),t(),e(44,"li"),i(45,"Fechas y ubicaci\xF3n se configuran despu\xE9s"),t()()()(),e(46,"div",50)(47,"button",51),u(48,ae,3,0)(49,le,3,0),t(),e(50,"a",52),o(51,"i",53),e(52,"span",12),i(53,"Cancelar"),t()()()()()()}if(a&2){let n=v();c("formGroup",n.quickForm),l(12),s("is-invalid",n.quickInvalid("title")),l(6),s("is-invalid",n.quickInvalid("eventTypeId")),l(3),p(n.eventTypes()?21:-1),l(26),c("disabled",n.isQuickSubmitting()||n.quickForm.invalid),l(),p(n.isQuickSubmitting()?49:48)}}function de(a,r){if(a&1&&(e(0,"option",54),i(1),t()),a&2){let n=r.$implicit;c("value",n.key),l(),T(n.value.name)}}function ce(a,r){if(a&1&&(h(0,de,2,2,"option",54,ne),q(2,"keyvalue")),a&2){let n=v(2);_(F(2,0,n.eventTypes()))}}function se(a,r){a&1&&(o(0,"i",83),e(1,"span",12),i(2,"Crear Evento"),t())}function ue(a,r){a&1&&(o(0,"span",55),e(1,"span",12),i(2,"Guardando..."),t())}function pe(a,r){if(a&1){let n=k();e(0,"form",56),S("ngSubmit",function(){E(n);let b=v();return C(b.onSubmit())}),e(1,"div",28)(2,"div",29)(3,"div",30)(4,"div",15)(5,"h6",31),o(6,"i",57),i(7," Informaci\xF3n Completa del Evento "),t()(),e(8,"div",33)(9,"div",34)(10,"label",35),i(11,"T\xEDtulo del evento"),t(),o(12,"input",36),e(13,"div",37),i(14,"T\xEDtulo es requerido (m\xEDn. 5 caracteres)."),t()(),e(15,"div",34)(16,"label",35),i(17,"Descripci\xF3n corta"),t(),o(18,"input",58),e(19,"div",42),i(20,"M\xE1ximo 160 caracteres para vista previa"),t()(),e(21,"div",34)(22,"label",35),i(23,"Descripci\xF3n completa"),t(),o(24,"textarea",59),t(),e(25,"div",60)(26,"div",61)(27,"label",35),i(28,"Tipo de evento"),t(),e(29,"select",38)(30,"option",39),i(31,"Seleccione un tipo..."),t(),u(32,ce,3,2),t(),e(33,"div",37),i(34,"Seleccione un tipo de evento."),t()(),e(35,"div",62)(36,"label",35),i(37,"Fecha inicio"),t(),o(38,"input",63),e(39,"div",37),i(40,"Fecha requerida."),t()(),e(41,"div",62)(42,"label",35),i(43,"Fecha fin"),t(),o(44,"input",64),e(45,"div",37),i(46,"Fecha requerida."),t()()(),e(47,"div",65)(48,"div",66)(49,"label",35),i(50,"Modalidad"),t(),e(51,"select",67)(52,"option",39),i(53,"Seleccione modalidad..."),t(),e(54,"option",54),i(55,"Presencial"),t(),e(56,"option",54),i(57,"Virtual"),t(),e(58,"option",54),i(59,"H\xEDbrido"),t()(),e(60,"div",37),i(61,"Seleccione la modalidad."),t()(),e(62,"div",68)(63,"label",35),i(64,"Aforo m\xE1ximo"),t(),o(65,"input",69),e(66,"div",42),i(67,"Opcional"),t()(),e(68,"div",68)(69,"label",35),i(70,"Costo (PEN)"),t(),o(71,"input",70),e(72,"div",42),i(73,"0 = Gratuito"),t()()()()()(),e(74,"div",43)(75,"div",44)(76,"div",15)(77,"h6",31),o(78,"i",71),i(79," Configuraci\xF3n del Evento "),t()(),e(80,"div",33)(81,"div",72),o(82,"input",73),e(83,"label",74),o(84,"i",75),i(85," Evento p\xFAblico "),t(),e(86,"div",42),i(87,"Visible para todos los usuarios"),t()(),e(88,"div",72),o(89,"input",76),e(90,"label",77),o(91,"i",78),i(92," Requiere aprobaci\xF3n "),t(),e(93,"div",42),i(94,"Las inscripciones deben ser aprobadas"),t()(),e(95,"div",79),o(96,"input",80),e(97,"label",81),o(98,"i",82),i(99," Emite certificado "),t(),e(100,"div",42),i(101,"Genera certificados autom\xE1ticamente"),t()()()(),e(102,"div",50)(103,"button",51),u(104,se,3,0)(105,ue,3,0),t(),e(106,"a",52),o(107,"i",53),e(108,"span",12),i(109,"Cancelar"),t()()()()()()}if(a&2){let n=v();c("formGroup",n.form),l(12),s("is-invalid",n.invalid("title")),l(17),s("is-invalid",n.invalid("eventTypeId")),l(3),p(n.eventTypes()?32:-1),l(6),s("is-invalid",n.invalid("startDate")),l(6),s("is-invalid",n.invalid("endDate")),l(7),s("is-invalid",n.invalid("locationType")),l(3),c("value",n.LocationType.PRESENCIAL),l(2),c("value",n.LocationType.VIRTUAL),l(2),c("value",n.LocationType.HIBRIDO),l(45),c("disabled",n.isSubmitting()||n.form.invalid),l(),p(n.isSubmitting()?105:104)}}var ie=class a{fb=f(Y);router=f(V);destroyRef=f(N);staticData=f(ee);eventService=f(te);LocationType=R;form;quickForm;submittingSig=x(!1);quickSubmittingSig=x(!1);modeSig=x("quick");eventTypesSig=D(this.staticData.eventTypes$,{initialValue:null});isLoadingSig=D(this.eventService.loading$,{initialValue:!1});ngOnInit(){this.form=this.fb.group({title:["",[d.required,d.minLength(5)]],shortDescription:[""],description:[""],eventTypeId:["",d.required],startDate:["",d.required],endDate:["",d.required],locationType:["",d.required],maxParticipants:[null],cost:[0,[d.min(0)]],isPublic:[!0],requiresApproval:[!1],requiresCertificate:[!1]}),this.quickForm=this.fb.group({title:["",[d.required,d.minLength(5)]],eventTypeId:["",d.required],description:[""]}),this.staticData.loadEventTypes().pipe(g(this.destroyRef)).subscribe()}eventTypes(){return this.eventTypesSig()}isSubmitting(){return this.submittingSig()}isQuickSubmitting(){return this.quickSubmittingSig()}mode(){return this.modeSig()}setMode(r){this.modeSig.set(r)}invalid(r){let n=this.form.get(r);return!!n&&n.invalid&&(n.dirty||n.touched)}quickInvalid(r){let n=this.quickForm.get(r);return!!n&&n.invalid&&(n.dirty||n.touched)}toIso(r){if(r)return new Date(r+"T00:00:00").toISOString()}onSubmit(){if(this.form.invalid||this.isSubmitting())return;this.submittingSig.set(!0);let r=this.form.value,n={title:r.title.trim(),shortDescription:r.shortDescription||void 0,description:r.description||void 0,eventTypeId:Number(r.eventTypeId),startDate:this.toIso(r.startDate),endDate:this.toIso(r.endDate),locationType:r.locationType,maxParticipants:r.maxParticipants?Number(r.maxParticipants):void 0,cost:r.cost!==null&&r.cost!==void 0?Number(r.cost):0,isPublic:!!r.isPublic,requiresApproval:!!r.requiresApproval,requiresCertificate:!!r.requiresCertificate};this.eventService.createEvent(n).pipe(g(this.destroyRef)).subscribe({next:m=>{this.router.navigate(["/eventos",m.id])},error:m=>{console.error("Crear evento error",m),this.submittingSig.set(!1)},complete:()=>this.submittingSig.set(!1)})}onQuickSubmit(){if(this.quickForm.invalid||this.isQuickSubmitting())return;this.quickSubmittingSig.set(!0);let r=this.quickForm.value,n={title:r.title.trim(),description:r.description||void 0,eventTypeId:Number(r.eventTypeId)};this.eventService.createQuickEvent(n).pipe(g(this.destroyRef)).subscribe({next:m=>{this.router.navigate(["/eventos",m.id,"editar"])},error:m=>{console.error("Crear r\xE1pido error",m),this.quickSubmittingSig.set(!1)},complete:()=>this.quickSubmittingSig.set(!1)})}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=w({type:a,selectors:[["app-event-create"]],decls:41,vars:8,consts:[[1,"container-fluid","py-3"],["aria-label","breadcrumb",1,"mb-3"],[1,"breadcrumb","mb-0","small"],[1,"breadcrumb-item"],["routerLink","/",1,"text-decoration-none","link-primary"],[1,"bi","bi-house-door","me-1"],[1,"d-none","d-sm-inline"],["routerLink","/eventos",1,"text-decoration-none","link-primary"],["aria-current","page",1,"breadcrumb-item","active"],[1,"d-flex","flex-column","flex-md-row","align-items-start","align-items-md-center","justify-content-between","gap-2","mb-4"],[1,"h6","mb-1","fw-normal","d-flex","align-items-center"],[1,"bi","bi-plus-circle","me-2","text-primary"],[1,"small"],[1,"text-muted","fs-8","mb-0"],[1,"card","border-0","shadow-sm","mb-4"],[1,"card-header","bg-light","border-0","py-2"],[1,"d-flex","align-items-center","gap-2"],[1,"bi","bi-toggles","text-primary"],[1,"mb-0","fw-normal","small"],[1,"card-body","py-2"],["role","tablist","aria-label","Modo de creaci\xF3n",1,"nav","nav-pills","nav-fill","small"],["role","presentation",1,"nav-item"],["type","button",1,"nav-link","btn-sm",3,"click"],[1,"bi","bi-lightning-charge","me-1"],[1,"bi","bi-gear","me-1"],["novalidate","","aria-label","Formulario de creaci\xF3n r\xE1pida de evento",1,"needs-validation",3,"formGroup"],["novalidate","","aria-label","Formulario de creaci\xF3n de evento",1,"needs-validation",3,"formGroup"],["novalidate","","aria-label","Formulario de creaci\xF3n r\xE1pida de evento",1,"needs-validation",3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-12","col-lg-8"],[1,"card","border-0","shadow-sm"],[1,"mb-0","fw-normal","small","d-flex","align-items-center"],[1,"bi","bi-lightning-charge","me-1","text-warning"],[1,"card-body","py-3"],[1,"mb-3"],[1,"form-label","fw-normal","small","mb-1"],["type","text","formControlName","title","required","","placeholder","Ingrese el t\xEDtulo del evento...",1,"form-control","form-control-sm"],[1,"invalid-feedback","fs-8"],["formControlName","eventTypeId","required","",1,"form-select","form-select-sm"],["value",""],[1,"mb-0"],["rows","3","formControlName","description","placeholder","Descripci\xF3n del evento...",1,"form-control","form-control-sm"],[1,"form-text","fs-8"],[1,"col-12","col-lg-4"],[1,"card","border-0","shadow-sm","mb-3"],[1,"card-header","bg-info","bg-opacity-10","border-0","py-2"],[1,"mb-0","fw-normal","small","d-flex","align-items-center","text-info"],[1,"bi","bi-info-circle","me-1"],[1,"mb-2","fs-8","text-muted"],[1,"fs-8","text-muted","mb-0","ps-3"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],["routerLink","/eventos",1,"btn","btn-outline-secondary","btn-sm"],[1,"bi","bi-x","me-1"],[3,"value"],["aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"],["novalidate","","aria-label","Formulario de creaci\xF3n de evento",1,"needs-validation",3,"ngSubmit","formGroup"],[1,"bi","bi-gear","me-1","text-primary"],["type","text","formControlName","shortDescription","maxlength","160","placeholder","Resumen breve del evento...",1,"form-control","form-control-sm"],["rows","4","formControlName","description","placeholder","Descripci\xF3n detallada del evento...",1,"form-control","form-control-sm"],[1,"row","g-2"],[1,"col-12","col-md-6"],[1,"col-6","col-md-3"],["type","date","formControlName","startDate","required","",1,"form-control","form-control-sm"],["type","date","formControlName","endDate","required","",1,"form-control","form-control-sm"],[1,"row","g-2","mt-2"],[1,"col-12","col-md-4"],["formControlName","locationType","required","",1,"form-select","form-select-sm"],[1,"col-6","col-md-4"],["type","number","min","1","formControlName","maxParticipants","placeholder","Ej: 50",1,"form-control","form-control-sm"],["type","number","min","0","step","0.01","formControlName","cost","placeholder","0.00",1,"form-control","form-control-sm"],[1,"bi","bi-toggles","me-1","text-primary"],[1,"form-check","form-switch","mb-3"],["type","checkbox","id","isPublic","formControlName","isPublic",1,"form-check-input"],["for","isPublic",1,"form-check-label","fw-normal","small"],[1,"bi","bi-globe","me-1","text-info"],["type","checkbox","id","requiresApproval","formControlName","requiresApproval",1,"form-check-input"],["for","requiresApproval",1,"form-check-label","fw-normal","small"],[1,"bi","bi-check-circle","me-1","text-warning"],[1,"form-check","form-switch","mb-0"],["type","checkbox","id","requiresCertificate","formControlName","requiresCertificate",1,"form-check-input"],["for","requiresCertificate",1,"form-check-label","fw-normal","small"],[1,"bi","bi-award","me-1","text-success"],[1,"bi","bi-plus-circle","me-1"]],template:function(n,m){n&1&&(e(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),o(5,"i",5),e(6,"span",6),i(7,"Inicio"),t()()(),e(8,"li",3)(9,"a",7),i(10,"Eventos"),t()(),e(11,"li",8),i(12,"Crear evento"),t()()(),e(13,"div",9)(14,"div")(15,"h1",10),o(16,"i",11),e(17,"span",12),i(18,"Nuevo Evento"),t()(),e(19,"p",13),i(20,"Crear un nuevo evento acad\xE9mico o corporativo"),t()()(),e(21,"div",14)(22,"div",15)(23,"div",16),o(24,"i",17),e(25,"h6",18),i(26,"Modo de Creaci\xF3n"),t()()(),e(27,"div",19)(28,"ul",20)(29,"li",21)(30,"button",22),S("click",function(){return m.setMode("quick")}),o(31,"i",23),e(32,"span",12),i(33,"Crear R\xE1pido"),t()()(),e(34,"li",21)(35,"button",22),S("click",function(){return m.setMode("advanced")}),o(36,"i",24),e(37,"span",12),i(38,"Crear Avanzado"),t()()()()()(),u(39,me,54,8,"form",25),u(40,pe,110,17,"form",26),t()),n&2&&(l(30),s("active",m.mode()==="quick"),y("aria-selected",m.mode()==="quick"),l(5),s("active",m.mode()==="advanced"),y("aria-selected",m.mode()==="advanced"),l(4),p(m.mode()==="quick"?39:-1),l(),p(m.mode()==="advanced"?40:-1))},dependencies:[P,Z,B,z,K,G,$,A,U,O,Q,W,X,J,j,H,L,M,I],encapsulation:2})};export{ie as EventCreateComponent};
