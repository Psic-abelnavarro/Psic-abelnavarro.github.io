import{b as Ce}from"./chunk-Q3GSZX6T.js";import{b as W,c as X,d as y,e as ee,f as te,g as ie,h as u,j as ne,k as re,m as oe,n as ae,o as le,p as de,q as se,r as me,s as ce,t as ue,u as pe,w as ve,x as fe}from"./chunk-AUZY6O5Y.js";import{a as ge}from"./chunk-IWJALEKK.js";import"./chunk-MPC7SZEK.js";import{a as w,c as Q}from"./chunk-G3MWZKLR.js";import{b as J,c as K}from"./chunk-2UJ2GV6T.js";import{f as H,h as z,i as Y,l as Z}from"./chunk-GBIZ2ZL5.js";import{Cc as G,D as q,Da as a,Db as E,Gb as l,H as R,Hb as _,Ib as b,Na as $,Sb as U,_ as h,ab as B,ac as x,bb as s,bc as k,cb as m,cc as S,da as D,dc as j,ea as I,eb as g,fb as v,fc as N,gb as f,gc as P,hb as C,ia as V,ib as n,jb as r,kb as d,ma as F,o as A,q as L,rb as O,sb as T,ub as c}from"./chunk-DWRMJDZW.js";import"./chunk-LJ5XHLMQ.js";import{h as M}from"./chunk-FK42CRUA.js";var ye=i=>["/eventos",i];function xe(i,e){i&1&&(n(0,"div",1)(1,"div",2),d(2,"div",3),n(3,"p",4),l(4,"Cargando evento..."),r()()())}function be(i,e){i&1&&(n(0,"span",17),l(1,"Cambios sin guardar"),r())}function he(i,e){if(i&1&&(n(0,"span",19),l(1),r()),i&2){let t=c(2);a(),b("\u2022 \xDAltimo guardado: ",t.formatDate(t.lastSaved().toISOString()))}}function Fe(i,e){if(i&1&&(n(0,"a",24),d(1,"i",84),n(2,"span",23),l(3,"Ver Evento"),r()()),i&2){let t=c(2);C("routerLink",U(1,ye,t.eventId()))}}function Se(i,e){i&1&&(n(0,"div",25),d(1,"i",85),n(2,"strong"),l(3,"Error:"),r(),l(4," Ocurri\xF3 un error al procesar la solicitud. Intenta nuevamente. "),r())}function De(i,e){i&1&&(n(0,"div",26),d(1,"i",86),n(2,"strong"),l(3,"\xA1\xC9xito!"),r(),l(4," El evento se ha actualizado correctamente. "),r())}function Ie(i,e){if(i&1&&(n(0,"div"),l(1),r()),i&2){let t=e.$implicit;a(),_(t)}}function Te(i,e){if(i&1&&(n(0,"div",39),v(1,Ie,2,1,"div",null,g),r()),i&2){let t=c(2);a(),f(t.getFieldErrors("title"))}}function Ne(i,e){if(i&1&&(n(0,"div"),l(1),r()),i&2){let t=e.$implicit;a(),_(t)}}function we(i,e){if(i&1&&(n(0,"div",39),v(1,Ne,2,1,"div",null,g),r()),i&2){let t=c(2);a(),f(t.getFieldErrors("shortDescription"))}}function ke(i,e){if(i&1&&(n(0,"div"),l(1),r()),i&2){let t=e.$implicit;a(),_(t)}}function Pe(i,e){if(i&1&&(n(0,"div",39),v(1,ke,2,1,"div",null,g),r()),i&2){let t=c(2);a(),f(t.getFieldErrors("description"))}}function Me(i,e){if(i&1&&(n(0,"option",50),l(1),r()),i&2){let t=e.$implicit;C("value",t.id),a(),b(" ",t.name," ")}}function Ae(i,e){if(i&1&&(n(0,"div"),l(1),r()),i&2){let t=e.$implicit;a(),_(t)}}function Le(i,e){if(i&1&&(n(0,"div",39),v(1,Ae,2,1,"div",null,g),r()),i&2){let t=c(2);a(),f(t.getFieldErrors("eventTypeId"))}}function qe(i,e){if(i&1&&(n(0,"div"),l(1),r()),i&2){let t=e.$implicit;a(),_(t)}}function Re(i,e){if(i&1&&(n(0,"div",39),v(1,qe,2,1,"div",null,g),r()),i&2){let t=c(2);a(),f(t.getFieldErrors("startDate"))}}function Ve(i,e){if(i&1&&(n(0,"div"),l(1),r()),i&2){let t=e.$implicit;a(),_(t)}}function $e(i,e){if(i&1&&(n(0,"div",39),v(1,Ve,2,1,"div",null,g),r()),i&2){let t=c(2);a(),f(t.getFieldErrors("endDate"))}}function Be(i,e){if(i&1&&(n(0,"div"),l(1),r()),i&2){let t=e.$implicit;a(),_(t)}}function Oe(i,e){if(i&1&&(n(0,"div",39),v(1,Be,2,1,"div",null,g),r()),i&2){let t=c(2);a(),f(t.getFieldErrors("registrationStart"))}}function Ue(i,e){if(i&1&&(n(0,"div"),l(1),r()),i&2){let t=e.$implicit;a(),_(t)}}function je(i,e){if(i&1&&(n(0,"div",39),v(1,Ue,2,1,"div",null,g),r()),i&2){let t=c(2);a(),f(t.getFieldErrors("registrationEnd"))}}function Ge(i,e){if(i&1&&(n(0,"div"),l(1),r()),i&2){let t=e.$implicit;a(),_(t)}}function He(i,e){if(i&1&&(n(0,"div",39),v(1,Ge,2,1,"div",null,g),r()),i&2){let t=c(2);a(),f(t.getFieldErrors("locationType"))}}function ze(i,e){if(i&1&&(n(0,"div"),l(1),r()),i&2){let t=e.$implicit;a(),_(t)}}function Ye(i,e){if(i&1&&(n(0,"div",39),v(1,ze,2,1,"div",null,g),r()),i&2){let t=c(3);a(),f(t.getFieldErrors("venueName"))}}function Ze(i,e){if(i&1&&(n(0,"div"),l(1),r()),i&2){let t=e.$implicit;a(),_(t)}}function Je(i,e){if(i&1&&(n(0,"div",39),v(1,Ze,2,1,"div",null,g),r()),i&2){let t=c(3);a(),f(t.getFieldErrors("venueAddress"))}}function Ke(i,e){if(i&1&&(n(0,"div"),l(1),r()),i&2){let t=e.$implicit;a(),_(t)}}function Qe(i,e){if(i&1&&(n(0,"div",39),v(1,Ke,2,1,"div",null,g),r()),i&2){let t=c(3);a(),f(t.getFieldErrors("venueCity"))}}function We(i,e){if(i&1&&(n(0,"div",35)(1,"label",87),l(2," Nombre del lugar "),r(),d(3,"input",88),s(4,Ye,3,0,"div",39),r(),n(5,"div",35)(6,"label",89),l(7," Direcci\xF3n "),r(),d(8,"input",90),s(9,Je,3,0,"div",39),r(),n(10,"div",35)(11,"label",91),l(12," Ciudad "),r(),d(13,"input",92),s(14,Qe,3,0,"div",39),r()),i&2){let t=c(2);a(3),E("is-invalid",t.isFieldInvalid("venueName")),a(),m(t.isFieldInvalid("venueName")?4:-1),a(4),E("is-invalid",t.isFieldInvalid("venueAddress")),a(),m(t.isFieldInvalid("venueAddress")?9:-1),a(4),E("is-invalid",t.isFieldInvalid("venueCity")),a(),m(t.isFieldInvalid("venueCity")?14:-1)}}function Xe(i,e){if(i&1&&(n(0,"div"),l(1),r()),i&2){let t=e.$implicit;a(),_(t)}}function et(i,e){if(i&1&&(n(0,"div",39),v(1,Xe,2,1,"div",null,g),r()),i&2){let t=c(2);a(),f(t.getFieldErrors("maxParticipants"))}}function tt(i,e){if(i&1&&(n(0,"div"),l(1),r()),i&2){let t=e.$implicit;a(),_(t)}}function it(i,e){if(i&1&&(n(0,"div",39),v(1,tt,2,1,"div",null,g),r()),i&2){let t=c(2);a(),f(t.getFieldErrors("cost"))}}function nt(i,e){i&1&&(d(0,"i",93),l(1," Por favor, corrige los errores antes de continuar. "))}function rt(i,e){i&1&&(d(0,"i",94),l(1," Formulario v\xE1lido y listo para guardar. "))}function ot(i,e){i&1&&(d(0,"span",95),l(1," Guardando... "))}function at(i,e){i&1&&(d(0,"i",96),l(1," Guardar Cambios "))}function lt(i,e){if(i&1){let t=O();n(0,"nav",5)(1,"ol",6)(2,"li",7)(3,"a",8),d(4,"i",9),n(5,"span",10),l(6,"Inicio"),r()()(),n(7,"li",7)(8,"a",11),l(9,"Eventos"),r()(),n(10,"li",12),l(11,"Editar evento"),r()()(),n(12,"div",13)(13,"div")(14,"h1",14),d(15,"i",15),n(16,"span",16),l(17,"Editar Evento"),r(),s(18,be,2,0,"span",17),r(),n(19,"p",18),l(20," Modificar informaci\xF3n del evento existente "),s(21,he,2,1,"span",19),r()(),n(22,"div",20)(23,"button",21),T("click",function(){D(t);let p=c();return I(p.onCancel())}),d(24,"i",22),n(25,"span",23),l(26,"Cancelar"),r()(),s(27,Fe,4,3,"a",24),r()(),s(28,Se,5,0,"div",25),s(29,De,5,0,"div",26),n(30,"form",27),T("ngSubmit",function(){D(t);let p=c();return I(p.onSubmit())}),n(31,"div",28)(32,"div",29)(33,"div",30)(34,"div",31)(35,"h6",32),d(36,"i",33),l(37," Informaci\xF3n del Evento "),r()(),n(38,"div",34)(39,"div",35)(40,"label",36),l(41," T\xEDtulo del evento "),n(42,"span",37),l(43,"*"),r()(),d(44,"input",38),s(45,Te,3,0,"div",39),n(46,"div",40),l(47),r()(),n(48,"div",35)(49,"label",41),l(50," Descripci\xF3n corta "),r(),d(51,"input",42),s(52,we,3,0,"div",39),n(53,"div",40),l(54),r()(),n(55,"div",35)(56,"label",43),l(57," Descripci\xF3n completa "),r(),d(58,"textarea",44),s(59,Pe,3,0,"div",39),n(60,"div",40),l(61),r()(),n(62,"div",45)(63,"div",46)(64,"label",47),l(65," Tipo de evento "),n(66,"span",37),l(67,"*"),r()(),n(68,"select",48)(69,"option",49),l(70,"Seleccione un tipo..."),r(),v(71,Me,2,2,"option",50,B().trackByEventTypeId,!0),r(),s(73,Le,3,0,"div",39),r(),n(74,"div",51)(75,"label",52),l(76," Fecha inicio "),n(77,"span",37),l(78,"*"),r()(),d(79,"input",53),s(80,Re,3,0,"div",39),r(),n(81,"div",51)(82,"label",54),l(83," Fecha fin "),n(84,"span",37),l(85,"*"),r()(),d(86,"input",55),s(87,$e,3,0,"div",39),r()(),n(88,"div",56)(89,"div",51)(90,"label",57),l(91," Inicio inscripciones "),r(),d(92,"input",58),s(93,Oe,3,0,"div",39),r(),n(94,"div",51)(95,"label",59),l(96," Fin inscripciones "),r(),d(97,"input",60),s(98,je,3,0,"div",39),r()()()()(),n(99,"div",61)(100,"div",30)(101,"div",31)(102,"h6",32),d(103,"i",62),l(104," Ubicaci\xF3n y Configuraci\xF3n "),r()(),n(105,"div",34)(106,"div",35)(107,"label",63),l(108," Tipo de ubicaci\xF3n "),n(109,"span",37),l(110,"*"),r()(),n(111,"select",64)(112,"option",49),l(113,"Seleccione..."),r(),n(114,"option",50),l(115,"Presencial"),r(),n(116,"option",50),l(117,"Virtual"),r(),n(118,"option",50),l(119,"H\xEDbrido"),r()(),s(120,He,3,0,"div",39),r(),s(121,We,15,9),n(122,"div",45)(123,"div",65)(124,"label",66),l(125," M\xE1x. participantes "),r(),d(126,"input",67),s(127,et,3,0,"div",39),r(),n(128,"div",65)(129,"label",68),l(130),r(),d(131,"input",69),s(132,it,3,0,"div",39),r()(),n(133,"div",70)(134,"div",71),d(135,"input",72),n(136,"label",73),l(137," Evento p\xFAblico "),r()(),n(138,"div",71),d(139,"input",74),n(140,"label",75),l(141," Requiere aprobaci\xF3n "),r()(),n(142,"div",76),d(143,"input",77),n(144,"label",78),l(145," Genera certificado "),r()()()()()()(),n(146,"div",79)(147,"div",80)(148,"div",81)(149,"div",82),s(150,nt,2,0)(151,rt,2,0),r(),n(152,"div",20)(153,"button",21),T("click",function(){D(t);let p=c();return I(p.onCancel())}),d(154,"i",22),l(155," Cancelar "),r(),n(156,"button",83),s(157,ot,2,0)(158,at,2,0),r()()()()()()}if(i&2){let t,o=c();a(18),m(o.hasUnsavedChanges()?18:-1),a(3),m(o.lastSaved()?21:-1),a(2),C("disabled",o.isSubmitting()),a(4),m(o.eventId()?27:-1),a(),m(o.hasError()?28:-1),a(),m(o.isSuccess()?29:-1),a(),C("formGroup",o.editForm()),a(14),E("is-invalid",o.isFieldInvalid("title")),C("maxlength",o.maxTitleLength),a(),m(o.isFieldInvalid("title")?45:-1),a(2),b(" M\xE1ximo ",o.maxTitleLength," caracteres "),a(4),E("is-invalid",o.isFieldInvalid("shortDescription")),C("maxlength",o.maxShortDescriptionLength),a(),m(o.isFieldInvalid("shortDescription")?52:-1),a(2),b(" M\xE1ximo ",o.maxShortDescriptionLength," caracteres para vista previa "),a(4),E("is-invalid",o.isFieldInvalid("description")),C("maxlength",o.maxDescriptionLength),a(),m(o.isFieldInvalid("description")?59:-1),a(2),b(" M\xE1ximo ",o.maxDescriptionLength," caracteres "),a(7),E("is-invalid",o.isFieldInvalid("eventTypeId")),a(3),f(o.eventTypesOptions()),a(2),m(o.isFieldInvalid("eventTypeId")?73:-1),a(6),E("is-invalid",o.isFieldInvalid("startDate")),a(),m(o.isFieldInvalid("startDate")?80:-1),a(6),E("is-invalid",o.isFieldInvalid("endDate")),a(),m(o.isFieldInvalid("endDate")?87:-1),a(5),E("is-invalid",o.isFieldInvalid("registrationStart")),a(),m(o.isFieldInvalid("registrationStart")?93:-1),a(4),E("is-invalid",o.isFieldInvalid("registrationEnd")),a(),m(o.isFieldInvalid("registrationEnd")?98:-1),a(13),E("is-invalid",o.isFieldInvalid("locationType")),a(3),C("value",o.LocationType.PRESENCIAL),a(2),C("value",o.LocationType.VIRTUAL),a(2),C("value",o.LocationType.HIBRIDO),a(2),m(o.isFieldInvalid("locationType")?120:-1),a(),m(((t=o.editForm().get("locationType"))==null?null:t.value)===o.LocationType.PRESENCIAL||((t=o.editForm().get("locationType"))==null?null:t.value)===o.LocationType.HIBRIDO?121:-1),a(5),E("is-invalid",o.isFieldInvalid("maxParticipants")),C("min",1)("max",o.maxParticipants),a(),m(o.isFieldInvalid("maxParticipants")?127:-1),a(3),b(" Costo (",o.defaultCurrency,") "),a(),E("is-invalid",o.isFieldInvalid("cost")),C("min",0)("max",o.maxCost),a(),m(o.isFieldInvalid("cost")?132:-1),a(18),m(o.hasFormErrors()?150:o.isFormValid()?151:-1),a(3),C("disabled",o.isSubmitting()),a(3),C("disabled",o.submitButtonDisabled()),a(),m(o.isSubmitting()?157:158)}}var Ee=class i{destroyRef=h(V);router=h(z);route=h(H);eventService=h(Ce);staticDataService=h(ge);eventIdInput=P();showAdvancedInitially=P(!0);eventUpdated=N();editCancelled=N();unsavedChanges=N();LocationType=K;EventStatus=J;maxTitleLength=150;maxDescriptionLength=1e3;maxShortDescriptionLength=300;maxParticipants=65e3;maxCost=999999;maxDurationHours=999;defaultCurrency="PEN";defaultMinAttendance=80;formStatus=F("idle");eventId=F(null);hasUnsavedChanges=F(!1);lastSaved=F(null);eventTypesMap=Q(this.staticDataService.eventTypes$,{initialValue:{}});isLoadingEventTypes=x(()=>{let e=this.eventTypesMap();return!e||Object.keys(e).length===0});eventResource=j({loader:()=>M(this,null,function*(){let e=this.eventId();if(!e)throw new Error("ID de evento requerido");try{return yield A(this.eventService.getEventById(e))}catch(t){throw console.error("Event Resource Error:",t),this.processResourceError(t)}}),defaultValue:{}});processResourceError(e){if(!e)return new Error("Error desconocido en el recurso");let t="Error al cargar evento";e.status===0||e.name==="NetworkError"?t="Error de conexi\xF3n. Verifica tu conexi\xF3n a internet.":e.status===404?t="Evento no encontrado.":e.status>=400&&e.status<500?t=e.error?.message||"Error en la solicitud. Verifica los par\xE1metros.":e.status>=500&&(t="Error del servidor. Intenta nuevamente en unos momentos.");let o=new Error(t);return o.originalError=e,o.canRetry=e.status!==401&&e.status!==403,o}eventData=x(()=>this.eventResource.value());isLoadingEvent=x(()=>this.eventResource.status()==="loading");eventError=x(()=>this.eventResource.error());eventTypesOptions=S(()=>{let e=this.eventTypesMap();return!e||Object.keys(e).length===0?[]:Object.entries(e).map(([t,o])=>({id:parseInt(t),name:o.name,description:o.description||""}))});isSubmitting=S(()=>this.formStatus()==="submitting");hasError=S(()=>this.formStatus()==="error");isSuccess=S(()=>this.formStatus()==="success");isLoading=S(()=>this.formStatus()==="loading"||this.isLoadingEvent()||this.isLoadingEventTypes());editForm=F(new ie({title:new u(null,[y.required,y.minLength(5),y.maxLength(this.maxTitleLength)]),shortDescription:new u(null,[y.maxLength(this.maxShortDescriptionLength)]),description:new u(null,[y.maxLength(this.maxDescriptionLength)]),eventTypeId:new u(null,[y.required]),startDate:new u(null,[y.required]),endDate:new u(null,[y.required]),registrationStart:new u(null),registrationEnd:new u(null),locationType:new u(null,[y.required]),venueName:new u(null),venueAddress:new u(null),venueCity:new u(null),maxParticipants:new u(null,[y.min(1),y.max(this.maxParticipants)]),cost:new u(0,[y.min(0),y.max(this.maxCost)]),currency:new u(this.defaultCurrency),isPublic:new u(!0,{nonNullable:!0}),requiresApproval:new u(!1,{nonNullable:!0}),requiresCertificate:new u(!0,{nonNullable:!0}),status:new u("draft")}));isFormValid=x(()=>this.editForm().valid);isFormInvalid=x(()=>this.editForm().invalid);isFormPending=x(()=>this.editForm().pending);isFormPristine=x(()=>this.editForm().pristine);isFormDirty=x(()=>this.editForm().dirty);formErrors=x(()=>{let e=this.editForm(),t={};return Object.keys(e.controls).forEach(o=>{let p=e.get(o);p?.errors&&(p.dirty||p.touched)&&(t[o]=this.getErrorMessages(o,p.errors))}),t});hasFormErrors=x(()=>Object.keys(this.formErrors()).length>0);submitButtonDisabled=x(()=>this.isFormInvalid()||this.isSubmitting()||this.isLoading()||!this.hasUnsavedChanges());eventIdEffect=k(()=>{let e=this.eventId();e&&e>0&&this.eventResource.reload()});eventStatusEffect=k(()=>{let e=this.eventResource.status();e==="resolved"?this.populateForm():e==="error"?this.formStatus.set("error"):e==="loading"&&this.formStatus.set("loading")});ngOnInit(){this.initializeEventId(),this.setupFormSubscriptions()}ngOnDestroy(){}initializeEventId(){let e=this.eventIdInput();e?this.eventId.set(e):this.route.paramMap.pipe(L(t=>{let o=t.get("id");return o?parseInt(o,10):null}),w(this.destroyRef)).subscribe(t=>{t&&!isNaN(t)?this.eventId.set(t):this.router.navigate(["/eventos"])})}setupFormSubscriptions(){this.editForm().valueChanges.pipe(q(300),R(),w(this.destroyRef)).subscribe(()=>{this.hasUnsavedChanges.set(this.editForm().dirty),this.unsavedChanges.emit(this.editForm().dirty)})}populateForm(){let e=this.eventData();e&&(this.editForm().patchValue({title:e.title,shortDescription:e.shortDescription||null,description:e.description||null,eventTypeId:e.eventTypeId,startDate:this.formatDateForInput(e.startDate),endDate:this.formatDateForInput(e.endDate),registrationStart:this.formatDateForInput(e.registrationStart),registrationEnd:this.formatDateForInput(e.registrationEnd),locationType:e.locationType,venueName:e.venueName||null,venueAddress:e.venueAddress||null,venueCity:e.venueCity||null,maxParticipants:e.maxParticipants||null,cost:e.cost||0,currency:e.currency||this.defaultCurrency,isPublic:e.isPublic??!0,requiresApproval:e.requiresApproval??!1,requiresCertificate:e.requiresCertificate??!0,status:e.status||"draft"}),this.editForm().markAsPristine(),this.hasUnsavedChanges.set(!1),this.formStatus.set("idle"))}onSubmit(){if(this.isFormInvalid()||this.isSubmitting())return;this.formStatus.set("submitting");let e=this.editForm().value,t=this.eventId();if(!t){this.formStatus.set("error");return}let o={title:e.title.trim(),shortDescription:e.shortDescription||void 0,description:e.description||void 0,eventTypeId:Number(e.eventTypeId),startDate:this.formatDateForApi(e.startDate||null),endDate:this.formatDateForApi(e.endDate||null),registrationStart:this.formatDateForApi(e.registrationStart||null),registrationEnd:this.formatDateForApi(e.registrationEnd||null),locationType:e.locationType,venueName:e.venueName||void 0,venueAddress:e.venueAddress||void 0,venueCity:e.venueCity||void 0,maxParticipants:e.maxParticipants?Number(e.maxParticipants):void 0,cost:e.cost!==null&&e.cost!==void 0?Number(e.cost):0,currency:e.currency||this.defaultCurrency,isPublic:!!e.isPublic,requiresApproval:!!e.requiresApproval,requiresCertificate:!!e.requiresCertificate};this.eventService.updateEvent(t,o).pipe(w(this.destroyRef)).subscribe({next:p=>{this.formStatus.set("success"),this.lastSaved.set(new Date),this.editForm().markAsPristine(),this.hasUnsavedChanges.set(!1),this.eventUpdated.emit(p),this.router.navigate(["/eventos",t])},error:p=>{console.error("Error updating event:",p),this.formStatus.set("error")}})}onCancel(){this.hasUnsavedChanges()?confirm("\xBFEst\xE1s seguro de que deseas cancelar? Los cambios no guardados se perder\xE1n.")&&(this.editCancelled.emit(),this.router.navigate(["/eventos"])):(this.editCancelled.emit(),this.router.navigate(["/eventos"]))}formatDateForInput(e){if(!e)return null;try{let t=new Date(e),o=t.getFullYear(),p=String(t.getMonth()+1).padStart(2,"0"),_e=String(t.getDate()).padStart(2,"0");return`${o}-${p}-${_e}`}catch(t){return console.warn("Error parsing date:",e,t),null}}formatDateForApi(e){if(e)try{return new Date(e+"T00:00:00.000Z").toISOString()}catch(t){console.warn("Error formatting date for API:",e,t);return}}getErrorMessages(e,t){let o=[];return t.required&&o.push(`${this.getFieldDisplayName(e)} es requerido.`),t.minlength&&o.push(`${this.getFieldDisplayName(e)} debe tener al menos ${t.minlength.requiredLength} caracteres.`),t.maxlength&&o.push(`${this.getFieldDisplayName(e)} no puede exceder ${t.maxlength.requiredLength} caracteres.`),t.min&&o.push(`${this.getFieldDisplayName(e)} debe ser mayor a ${t.min.min}.`),t.max&&o.push(`${this.getFieldDisplayName(e)} no puede ser mayor a ${t.max.max}.`),t.email&&o.push("Formato de email inv\xE1lido."),t.pattern&&o.push(`${this.getFieldDisplayName(e)} tiene un formato inv\xE1lido.`),o}getFieldDisplayName(e){return{title:"T\xEDtulo",shortDescription:"Descripci\xF3n corta",description:"Descripci\xF3n",eventTypeId:"Tipo de evento",startDate:"Fecha de inicio",endDate:"Fecha de fin",registrationStart:"Inicio de inscripciones",registrationEnd:"Fin de inscripciones",locationType:"Tipo de ubicaci\xF3n",venueName:"Nombre del lugar",venueAddress:"Direcci\xF3n",venueCity:"Ciudad",maxParticipants:"M\xE1ximo de participantes",cost:"Costo",currency:"Moneda"}[e]||e}isFieldInvalid(e){let t=this.editForm().get(e);return!!(t&&t.invalid&&(t.dirty||t.touched))}getFieldErrors(e){let t=this.editForm().get(e);return!t||!t.errors||!t.dirty&&!t.touched?[]:this.getErrorMessages(e,t.errors)}getEventTypeName(e){return this.eventTypesOptions().find(o=>o.id===e)?.name||"Tipo desconocido"}formatCurrency(e){try{return new Intl.NumberFormat("es-PE",{style:"currency",currency:this.defaultCurrency,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}catch{return`${this.defaultCurrency} ${e}`}}formatDate(e){if(!e)return"No definido";try{return new Intl.DateTimeFormat("es-PE",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e))}catch{return e}}trackByEventTypeId=(e,t)=>t.id;trackByFieldName=(e,t)=>t;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=$({type:i,selectors:[["app-event-edit"]],inputs:{eventIdInput:[1,"eventIdInput"],showAdvancedInitially:[1,"showAdvancedInitially"]},outputs:{eventUpdated:"eventUpdated",editCancelled:"editCancelled",unsavedChanges:"unsavedChanges"},decls:3,vars:1,consts:[[1,"container-fluid","py-3"],[1,"d-flex","justify-content-center","py-5"],[1,"text-center"],["role","status","aria-hidden","true",1,"spinner-border","text-primary","mb-3"],[1,"text-muted","small","mb-0"],["aria-label","breadcrumb",1,"mb-3"],[1,"breadcrumb","mb-0","small"],[1,"breadcrumb-item"],["routerLink","/",1,"text-decoration-none","link-primary"],[1,"bi","bi-house-door","me-1"],[1,"d-none","d-sm-inline"],["routerLink","/eventos",1,"text-decoration-none","link-primary"],["aria-current","page",1,"breadcrumb-item","active"],[1,"d-flex","flex-column","flex-md-row","align-items-start","align-items-md-center","justify-content-between","gap-2","mb-4"],[1,"h6","mb-1","fw-normal","d-flex","align-items-center"],[1,"bi","bi-pencil-square","me-2","text-primary"],[1,"small"],[1,"badge","bg-warning","text-dark","ms-2","small"],[1,"text-muted","fs-8","mb-0"],[1,"ms-2"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"bi","bi-x-circle","me-1"],[1,"small","d-none","d-sm-inline"],["title","Ver evento",1,"btn","btn-outline-info","btn-sm",3,"routerLink"],["role","alert",1,"alert","alert-danger","fade","show","mb-3"],["role","alert",1,"alert","alert-success","fade","show","mb-3"],["novalidate","","aria-label","Formulario de edici\xF3n de evento",1,"needs-validation",3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-12","col-lg-8"],[1,"card","border-0","shadow-sm"],[1,"card-header","bg-light","border-0","py-2"],[1,"mb-0","fw-normal","small","d-flex","align-items-center"],[1,"bi","bi-info-circle","me-1","text-primary"],[1,"card-body","py-3"],[1,"mb-3"],["for","title",1,"form-label","fw-normal","small","mb-1"],[1,"text-danger"],["id","title","type","text","formControlName","title","required","","placeholder","Ingrese el t\xEDtulo del evento...","autocomplete","off",1,"form-control","form-control-sm",3,"maxlength"],[1,"invalid-feedback","fs-8"],[1,"form-text","fs-8"],["for","shortDescription",1,"form-label","fw-normal","small","mb-1"],["id","shortDescription","type","text","formControlName","shortDescription","placeholder","Resumen breve del evento...","autocomplete","off",1,"form-control","form-control-sm",3,"maxlength"],["for","description",1,"form-label","fw-normal","small","mb-1"],["id","description","rows","4","formControlName","description","placeholder","Descripci\xF3n detallada del evento...",1,"form-control","form-control-sm",3,"maxlength"],[1,"row","g-2"],[1,"col-12","col-md-6"],["for","eventTypeId",1,"form-label","fw-normal","small","mb-1"],["id","eventTypeId","formControlName","eventTypeId","required","",1,"form-select","form-select-sm"],["value",""],[3,"value"],[1,"col-6","col-md-3"],["for","startDate",1,"form-label","fw-normal","small","mb-1"],["id","startDate","type","date","formControlName","startDate","required","",1,"form-control","form-control-sm"],["for","endDate",1,"form-label","fw-normal","small","mb-1"],["id","endDate","type","date","formControlName","endDate","required","",1,"form-control","form-control-sm"],[1,"row","g-2","mt-2"],["for","registrationStart",1,"form-label","fw-normal","small","mb-1"],["id","registrationStart","type","date","formControlName","registrationStart",1,"form-control","form-control-sm"],["for","registrationEnd",1,"form-label","fw-normal","small","mb-1"],["id","registrationEnd","type","date","formControlName","registrationEnd",1,"form-control","form-control-sm"],[1,"col-12","col-lg-4"],[1,"bi","bi-geo-alt","me-1","text-primary"],["for","locationType",1,"form-label","fw-normal","small","mb-1"],["id","locationType","formControlName","locationType","required","",1,"form-select","form-select-sm"],[1,"col-6"],["for","maxParticipants",1,"form-label","fw-normal","small","mb-1"],["id","maxParticipants","type","number","formControlName","maxParticipants","placeholder","0","autocomplete","off",1,"form-control","form-control-sm",3,"min","max"],["for","cost",1,"form-label","fw-normal","small","mb-1"],["id","cost","type","number","formControlName","cost","step","0.01","placeholder","0.00","autocomplete","off",1,"form-control","form-control-sm",3,"min","max"],[1,"mt-3"],[1,"form-check","mb-2"],["id","isPublic","type","checkbox","formControlName","isPublic",1,"form-check-input"],["for","isPublic",1,"form-check-label","small"],["id","requiresApproval","type","checkbox","formControlName","requiresApproval",1,"form-check-input"],["for","requiresApproval",1,"form-check-label","small"],[1,"form-check"],["id","requiresCertificate","type","checkbox","formControlName","requiresCertificate",1,"form-check-input"],["for","requiresCertificate",1,"form-check-label","small"],[1,"row","g-3","mt-3"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center"],[1,"small","text-muted"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],[1,"bi","bi-eye","me-1"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"bi","bi-check-circle","me-2"],["for","venueName",1,"form-label","fw-normal","small","mb-1"],["id","venueName","type","text","formControlName","venueName","placeholder","Auditorium, Hotel, etc.","autocomplete","off",1,"form-control","form-control-sm"],["for","venueAddress",1,"form-label","fw-normal","small","mb-1"],["id","venueAddress","type","text","formControlName","venueAddress","placeholder","Direcci\xF3n completa","autocomplete","off",1,"form-control","form-control-sm"],["for","venueCity",1,"form-label","fw-normal","small","mb-1"],["id","venueCity","type","text","formControlName","venueCity","placeholder","Ciudad donde se realiza","autocomplete","off",1,"form-control","form-control-sm"],[1,"bi","bi-exclamation-triangle","text-warning","me-1"],[1,"bi","bi-check-circle","text-success","me-1"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"],[1,"bi","bi-check-lg","me-1"]],template:function(t,o){t&1&&(n(0,"div",0),s(1,xe,5,0,"div",1)(2,lt,159,59),r()),t&2&&(a(),m(o.isLoading()?1:2))},dependencies:[G,fe,ne,de,se,X,re,W,le,ee,te,ue,pe,ce,me,oe,ae,ve,Z,Y],encapsulation:2,changeDetection:0})};export{Ee as EventEditComponent};
