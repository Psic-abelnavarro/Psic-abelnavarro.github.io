import{a as te}from"./chunk-PT3J4EFC.js";import{b as ee}from"./chunk-PHSVAKCK.js";import{b as Z}from"./chunk-22IHSIXM.js";import{e as z,g as H,s as W,t as K,u as J}from"./chunk-KBXA6SDK.js";import{b as X}from"./chunk-7M4K7CII.js";import{a as Y}from"./chunk-CYLPXQIR.js";import"./chunk-MPC7SZEK.js";import{a as j}from"./chunk-TMGCMHHJ.js";import{j as I,l as G}from"./chunk-IIPOJGOQ.js";import{h as O,i as $,l as q}from"./chunk-C3HOFUSH.js";import{$a as B,Bc as L,Cb as V,Da as a,Db as N,Gb as l,Hb as E,Ib as x,Jb as M,Lb as P,Mb as A,Na as D,Nb as Q,_ as f,ab as F,ac as k,bb as u,cb as p,da as g,ea as h,fb as w,gb as R,hb as C,ia as T,ib as i,jb as n,kb as d,ma as b,o as U,rb as y,sb as v,ub as c}from"./chunk-5W5GNUFO.js";import"./chunk-LJ5XHLMQ.js";import{h as S}from"./chunk-FK42CRUA.js";var ne=(o,t)=>t.userId;function re(o,t){o&1&&(i(0,"div",24)(1,"div",29)(2,"div",30)(3,"span",31),l(4,"Cargando..."),n()(),i(5,"p",32),l(6,"Cargando eventos y roles..."),n()()())}function le(o,t){if(o&1&&(i(0,"small",42),d(1,"i",49),l(2),n()),o&2){let e=c(2);a(2),x(" Evento seleccionado: ",e.displayEvent(e.selectedEvent())," ")}}function oe(o,t){o&1&&(i(0,"div",43),d(1,"i",50),l(2,"Debe seleccionar un evento "),n())}function ae(o,t){o&1&&(i(0,"div",43),d(1,"i",50),l(2,"Debe seleccionar un rol "),n())}function se(o,t){if(o&1&&(i(0,"span",60),d(1,"i",62),l(2),n()),o&2){let e,r=c(3);a(2),x(" S/. ",(e=r.selectedEvent())==null?null:e.cost," ")}}function de(o,t){o&1&&(i(0,"span",61),d(1,"i",63),l(2," Gratuito "),n())}function ce(o,t){if(o&1&&(i(0,"div",48)(1,"div",51)(2,"div",52)(3,"h6",53),d(4,"i",54),l(5),n(),i(6,"div",55)(7,"span",56),d(8,"i",57),l(9),n(),i(10,"span",56),d(11,"i",58),l(12),n()()(),i(13,"div",59),u(14,se,3,1,"span",60)(15,de,3,0,"span",61),n()()()),o&2){let e,r,s,m,_=c(2);a(5),x("",(e=_.selectedEvent())==null?null:e.title," "),a(4),M(" ",(r=_.selectedEvent())!=null&&r.startDate?_.formatEventDate(_.selectedEvent().startDate):"Sin fecha"," - ",(r=_.selectedEvent())!=null&&r.endDate?_.formatEventDate(_.selectedEvent().endDate):"Sin fecha"," "),a(3),x(" Costo: ",((s=_.selectedEvent())==null?null:s.cost)||"Gratuito"," "),a(2),p((m=_.selectedEvent())!=null&&m.cost?14:15)}}function me(o,t){if(o&1){let e=y();i(0,"div",33)(1,"div",34)(2,"label",35),d(3,"i",36),l(4," Evento "),i(5,"span",37),l(6,"*"),n()(),i(7,"div",38)(8,"span",39),d(9,"i",40),n(),i(10,"app-autocomplete",41),v("optionSelected",function(s){g(e);let m=c();return h(m.onEventChange(s))}),n()(),u(11,le,3,1,"small",42),u(12,oe,3,0,"div",43),n(),i(13,"div",34)(14,"label",44),d(15,"i",45),l(16," Rol de Participante "),i(17,"span",37),l(18,"*"),n()(),i(19,"div",38)(20,"span",39),d(21,"i",46),n(),i(22,"app-autocomplete",47),v("valueChange",function(s){g(e);let m=c();return h(m.onRoleAutoCompleteChange(s))}),n()(),u(23,ae,3,0,"div",43),n()(),u(24,ce,16,5,"div",48)}if(o&2){let e=c();a(10),C("searchFn",e.searchEvents)("preloadFn",e.preloadEvents)("displayFn",e.displayEvent)("required",!0)("inInputGroup",!0),a(),p(e.selectedEvent()?11:-1),a(),p(e.selectedEvent()?-1:12),a(10),C("options",e.roleSearchOptions())("required",!0)("inInputGroup",!0),a(),p(!e.selectedRoleId&&e.availableRoles().length>0?23:-1),a(),p(e.selectedEvent()?24:-1)}}function ue(o,t){o&1&&(d(0,"span",87),i(1,"span",14),l(2,"Matriculando..."),n())}function pe(o,t){if(o&1&&(d(0,"i",88),i(1,"span",14),l(2),n()),o&2){let e=c(3);a(2),x("Matricular (",e.checkedUsers().length,")")}}function be(o,t){if(o&1){let e=y();i(0,"button",86),v("click",function(){g(e);let s=c(2);return h(s.matriculateUsers())}),u(1,ue,3,0)(2,pe,3,1),n()}if(o&2){let e=c(2);C("disabled",e.matriculating()),a(),p(e.matriculating()?1:2)}}function ge(o,t){o&1&&(i(0,"div",84)(1,"div",89),d(2,"i",90),n(),i(3,"h6",91),l(4,"No hay usuarios en la lista"),n(),i(5,"p",92),l(6,"Use el buscador para agregar usuarios a matricular"),n()())}function he(o,t){if(o&1&&(i(0,"small",116),d(1,"i",126),l(2),n()),o&2){let e=c().$implicit;a(2),x("",e.phone," ")}}function ve(o,t){o&1&&(i(0,"span",60),d(1,"i",127),i(2,"span",6),l(3,"Registrado"),n()())}function xe(o,t){o&1&&(i(0,"span",61),d(1,"i",128),i(2,"span",6),l(3,"Seleccionado"),n()())}function _e(o,t){o&1&&(i(0,"span",123)(1,"span",6),l(2,"Elegible"),n(),i(3,"span",129),l(4,"OK"),n()())}function fe(o,t){if(o&1){let e=y();i(0,"tr")(1,"td",107)(2,"div",98)(3,"input",108),v("change",function(){let s=g(e).$implicit,m=c(3);return h(m.toggleUserCheck(s.id))}),n(),i(4,"label",109),l(5," Seleccionar usuario "),n()()(),i(6,"td",107)(7,"div",110)(8,"div",111)(9,"span",112),l(10),n()(),i(11,"div",113)(12,"div",114),l(13),n(),i(14,"div",115),l(15),n(),u(16,he,3,1,"small",116),n()()(),i(17,"td",117)(18,"div",118),l(19),n()(),i(20,"td",119)(21,"span",120),l(22),n()(),i(23,"td",121)(24,"div",118),l(25),n()(),i(26,"td",122),u(27,ve,4,0,"span",60)(28,xe,4,0,"span",61)(29,_e,5,0,"span",123),n(),i(30,"td",122)(31,"button",124),v("click",function(){let s=g(e).$implicit,m=c(3);return h(m.removeUserFromTable(s.id))}),d(32,"i",125),n()()()}if(o&2){let e=t.$implicit,r=c(3);N("table-success",r.isUserChecked(e.id)&&r.isUserEligible(e.id))("table-warning",!r.isUserEligible(e.id))("opacity-75",!r.isUserEligible(e.id)),a(3),C("id","table-user-"+e.id)("checked",r.isUserChecked(e.id))("disabled",!r.isUserEligible(e.id)),a(),C("for","table-user-"+e.id),a(6),E(r.getUserInitials(e.fullName||e.email)),a(3),E(e.fullName||"Sin nombre"),a(2),E(e.email),a(),p(e.phone?16:-1),a(3),E(e.email),a(3),E(e.documentNumber||"-"),a(3),E(e.institution||"-"),a(2),p(r.isUserEligible(e.id)?r.isUserChecked(e.id)?28:29:27)}}function Ce(o,t){if(o&1){let e=y();i(0,"div",85)(1,"div",93)(2,"table",94)(3,"thead",95)(4,"tr",96)(5,"th",97)(6,"div",98)(7,"input",99),v("change",function(){g(e);let s=c(2);return h(s.toggleAllEligibleUsers())}),n(),i(8,"label",100),l(9," Seleccionar todos "),n()()(),i(10,"th",101)(11,"small"),l(12,"Usuario"),n()(),i(13,"th",102)(14,"small"),l(15,"Email"),n()(),i(16,"th",103)(17,"small"),l(18,"Documento"),n()(),i(19,"th",104)(20,"small"),l(21,"Instituci\xF3n"),n()(),i(22,"th",105)(23,"small"),l(24,"Estado"),n()(),i(25,"th",105)(26,"small"),l(27,"Acci\xF3n"),n()()()(),i(28,"tbody"),w(29,fe,33,18,"tr",106,F().trackByUserId,!0),n()()()()}if(o&2){let e=c(2);a(7),C("checked",e.allEligibleUsersChecked())("indeterminate",e.someEligibleUsersChecked()),a(22),R(e.selectedUsersForTable())}}function Ee(o,t){if(o&1){let e=y();i(0,"div",19)(1,"div",20)(2,"h6",21),d(3,"i",64),l(4," Paso 2: Buscar y Agregar Usuarios "),n()(),i(5,"div",23)(6,"div",65)(7,"div",66)(8,"label",67),d(9,"i",68),l(10," Buscar Usuario "),n(),i(11,"div",38)(12,"span",39),d(13,"i",69),n(),i(14,"app-autocomplete",70),Q("ngModelChange",function(s){g(e);let m=c();return A(m.userSearchTerm,s)||(m.userSearchTerm=s),h(s)}),v("valueChange",function(s){g(e);let m=c();return h(m.onUserSelected(s))}),n()()(),i(15,"div",71)(16,"button",72),v("click",function(){g(e);let s=c();return h(s.navigateToUserCreate())}),d(17,"i",73),i(18,"span",74),l(19,"Registrar Nuevo"),n(),i(20,"span",75),l(21,"Nuevo"),n()()()(),i(22,"div",76)(23,"div",77)(24,"div",78)(25,"div",79)(26,"span",80),d(27,"i",81),l(28),n(),i(29,"span",82),d(30,"i",63),l(31),n()(),u(32,be,3,2,"button",83),n()(),u(33,ge,7,0,"div",84)(34,Ce,31,2,"div",85),n()()()}if(o&2){let e=c();a(14),C("searchFn",e.searchUsers)("preloadFn",e.preloadUsers)("displayFn",e.displayUser)("placeholder","Buscar por DNI, email o nombres...")("minChars",e.autocompleteConfig.minCharsRemote)("searchLimit",e.autocompleteConfig.searchLimit)("debounceMs",e.autocompleteConfig.debounceTime)("maxHeight",e.autocompleteConfig.maxHeight)("noResultsMessage","No se encontraron usuarios")("enablePreload",!0),P("ngModel",e.userSearchTerm),C("inputClass","form-control border-start-0 bg-light form-control-sm")("size","")("autocomplete","off")("inInputGroup",!0),a(14),x("",e.selectedUsersForTable().length," usuarios "),a(3),x("",e.checkedUsers().length," seleccionados "),a(),p(e.checkedUsers().length>0?32:-1),a(),p(e.selectedUsersForTable().length===0?33:34)}}function ye(o,t){o&1&&(i(0,"div",25),d(1,"i",130),i(2,"div")(3,"h6",131),l(4,"Complete el Paso 1"),n(),i(5,"p",132),l(6,"Seleccione un evento y rol para continuar con la b\xFAsqueda de usuarios."),n()()())}function Se(o,t){if(o&1){let e=y();i(0,"div",26)(1,"div",133)(2,"div",134)(3,"div",135)(4,"h5",136),d(5,"i",137),l(6," Confirmar Matr\xEDcula "),n(),i(7,"button",138),v("click",function(){g(e);let s=c();return h(s.showMatriculationModal.set(!1))}),n()(),i(8,"div",139)(9,"div",140)(10,"h6",141),l(11,"\xBFEst\xE1 seguro de matricular estos usuarios?"),n(),i(12,"div",142)(13,"div",143),d(14,"i",144),l(15,"Evento: "),n(),i(16,"div",145),l(17),n(),i(18,"div",143),d(19,"i",58),l(20,"Usuarios: "),n(),i(21,"div",146),l(22),n(),i(23,"div",143),d(24,"i",147),l(25,"Rol: "),n(),i(26,"div",146),l(27),n(),i(28,"div",143),d(29,"i",148),l(30,"Estado: "),n(),i(31,"div",146),l(32," Confirmado (matriculaci\xF3n directa) "),n()()(),i(33,"p",149),d(34,"i",150),l(35,' Los usuarios ser\xE1n matriculados directamente en estado "Confirmado". '),n()(),i(36,"div",151)(37,"button",152),v("click",function(){g(e);let s=c();return h(s.showMatriculationModal.set(!1))}),d(38,"i",153),l(39,"Cancelar "),n(),i(40,"button",154),v("click",function(){g(e);let s=c();return h(s.confirmMatriculation())}),d(41,"i",88),l(42,"Confirmar Matr\xEDcula "),n()()()()()}if(o&2){let e,r=c();a(17),x(" ",(e=r.selectedEvent())==null?null:e.title," "),a(5),x(" ",r.checkedUsers().length," seleccionados "),a(5),x(" ",r.getSelectedRoleName()," ")}}function ke(o,t){if(o&1&&(i(0,"div",27)(1,"div",155)(2,"div",134)(3,"div",156)(4,"div",157)(5,"div",158)(6,"span",31),l(7,"Procesando..."),n()(),i(8,"h6",159),l(9,"Matriculando Usuarios"),n(),i(10,"small",160),l(11),n()(),i(12,"div",161),d(13,"div",162),n(),i(14,"small",163),l(15),n()()()()()),o&2){let e=c();a(11),M(" Procesando ",e.processedCount()," de ",e.checkedUsers().length," "),a(2),V("width",e.getProgressPercentage(),"%"),B("aria-valuenow",e.getProgressPercentage()),a(2),x("",e.getProgressPercentage().toFixed(0),"% completado")}}function Ue(o,t){if(o&1&&(i(0,"div",168)(1,"div",170),d(2,"i",171),i(3,"div")(4,"h6",172),l(5,"Matr\xEDcula Exitosa"),n(),i(6,"p",132),l(7),n()()()()),o&2){let e=c(2);a(7),x(" ",e.matriculationResults().success.length," usuarios fueron matriculados correctamente ")}}function we(o,t){if(o&1&&(i(0,"div",176)(1,"div",177),d(2,"i",178),i(3,"div")(4,"div",179),l(5),n(),i(6,"div",180),l(7),n()()()()),o&2){let e=t.$implicit;a(5),E(e.user.fullName||e.user.email),a(2),E(e.error)}}function Re(o,t){if(o&1&&(i(0,"div",169)(1,"div",173),d(2,"i",174),i(3,"div")(4,"h6",172),l(5,"Errores Encontrados"),n(),i(6,"p",132),l(7),n()()(),i(8,"div",175),w(9,we,8,2,"div",176,ne),n()()),o&2){let e=c(2);a(7),x(" ",e.matriculationResults().errors.length," usuarios no pudieron ser matriculados "),a(2),R(e.matriculationResults().errors)}}function Me(o,t){if(o&1){let e=y();i(0,"div",28)(1,"div",164)(2,"div",134)(3,"div",135)(4,"h5",165),d(5,"i",166),l(6," Resultados de Matr\xEDcula "),n(),i(7,"button",138),v("click",function(){g(e);let s=c();return h(s.closeResultsModal())}),n()(),i(8,"div",167),u(9,Ue,8,1,"div",168),u(10,Re,11,1,"div",169),n(),i(11,"div",151)(12,"button",154),v("click",function(){g(e);let s=c();return h(s.closeResultsModal())}),d(13,"i",88),l(14,"Continuar "),n()()()()()}if(o&2){let e=c();a(9),p(e.matriculationResults().success.length>0?9:-1),a(),p(e.matriculationResults().errors.length>0?10:-1)}}var ie=class o{destroyRef=f(T);router=f(O);fb=f(W);registrationService=f(ee);eventService=f(Z);userService=f(X);staticDataService=f(Y);authService=f(G);autocompleteConfig=I.autocomplete;loadingState=b("idle");loading=k(()=>this.loadingState()==="loading");error=b(null);matriculating=b(!1);searchingUsers=b(!1);showMatriculationModal=b(!1);showProgressModal=b(!1);showResultsModal=b(!1);processedCount=b(0);availableRoles=b([]);selectedEventId=null;selectedRoleId=null;selectedEvent=b(null);displayEvent=t=>{if(!t)return"";let e=new Date(t.startDate).toLocaleDateString("es-CO");return`${t.title} (${e})`};searchEvents=(t,e)=>{let r={query:t.trim(),limit:e};return this.eventService.queryEventsForAutocomplete(r)};preloadEvents=()=>this.eventService.preloadEventsForAutocomplete(this.autocompleteConfig.preloadLimit);onEventSelected(t){this.selectedEvent.set(t),this.selectedEventId=t?.id||null}selectedEventText="";roleSearchOptions=k(()=>this.availableRoles().map(t=>`${t.name} - ${t.description}`));selectedRoleText="";userSearchTerm="";searchResults=b([]);userSearchOptions=k(()=>this.searchResults().map(t=>`${t.fullName||"Sin nombre"} - ${t.email} - ${t.documentNumber||"Sin DNI"}`));selectedUsersForTable=b([]);checkedUsers=b([]);registeredUserIds=b([]);matriculationResults=b({success:[],errors:[]});availableSpots=k(()=>1/0);trackByUserId=(t,e)=>e.id;trackByEventId=(t,e)=>e.id;trackByRoleId=(t,e)=>e.name;currentUser=this.authService.currentUser;ngOnInit(){return S(this,null,function*(){this.loadingState.set("loading");try{yield Promise.all([this.loadEvents(),this.loadRoles()])}catch(t){console.error("Error initializing component:",t),this.error.set("Error al cargar datos iniciales")}finally{this.loadingState.set("success")}})}loadEvents(){return S(this,null,function*(){})}loadRoles(){return S(this,null,function*(){this.staticDataService.participantRoles$.pipe(j(this.destroyRef)).subscribe(t=>{t&&this.availableRoles.set(Object.values(t))})})}onEventChange(t){this.selectedEvent.set(t),this.selectedEventId=t?.id||null,this.selectedEventId&&this.selectedRoleId&&(this.loadRegisteredUserIds(),this.updateEligibility())}onEventAutoCompleteChange(t){console.warn("onEventAutoCompleteChange is deprecated with modern autocomplete pattern")}onRoleChange(){this.selectedEventId&&this.selectedRoleId&&(this.loadRegisteredUserIds(),this.updateEligibility())}onRoleAutoCompleteChange(t){let r=this.availableRoles().findIndex(s=>`${s.name} - ${s.description}`===t);r!==-1?(this.selectedRoleId=r+1,this.onRoleChange()):this.selectedRoleId=null}loadRegisteredUserIds(){return S(this,null,function*(){if(!(!this.selectedEventId||!this.selectedRoleId))try{let t=yield U(this.registrationService.getRegisteredUserIds(this.selectedEventId,this.selectedRoleId));this.registeredUserIds.set(t?.userIds||[])}catch(t){console.error("Error loading registered user IDs:",t),this.registeredUserIds.set([])}})}onUserSearch(){}displayUser=t=>t?`${t.fullName||"Sin nombre"} - ${t.email} - ${t.documentNumber||"Sin DNI"}`:"";searchUsers=(t,e)=>{let r={query:t.trim(),limit:e};return this.userService.queryUsersForAutocomplete(r)};preloadUsers=()=>this.userService.preloadUsersForAutocomplete(15);onUserSelected(t){t&&(this.addUserToTable(this.mapQueryUserToViewModel(t)),this.userSearchTerm="")}onUserAutoCompleteChange(t){let e=t.match(/- (.+?) -/);if(e&&e[1]){let r=e[1].trim(),s=this.searchResults().find(m=>m.email===r);s&&this.addUserToTable(this.mapQueryUserToViewModel(s))}this.userSearchTerm=t}mapQueryUserToViewModel(t){return{id:t.id,email:t.email,fullName:t.fullName,documentNumber:t.documentNumber,phone:void 0,institution:t.institution,role:"participant",isActive:!0,emailVerified:!1,phoneVerified:!1,roleLabel:"Participante",statusLabel:"Activo",statusColor:"success",eventsCount:0,certificatesCount:0,lastActivity:new Date().toISOString(),joinedDate:new Date().toISOString(),profileCompletion:100}}addUserToTable(t){let e=this.selectedUsersForTable();e.find(r=>r.id===t.id)||(this.selectedUsersForTable.set([...e,t]),this.updateEligibility())}addAllUsers(){let t=this.selectedUsersForTable(),e=this.searchResults().map(r=>this.mapQueryUserToViewModel(r)).filter(r=>!t.find(s=>s.id===r.id));this.selectedUsersForTable.set([...t,...e]),this.updateEligibility()}removeUserFromTable(t){this.selectedUsersForTable.update(e=>e.filter(r=>r.id!==t)),this.checkedUsers.update(e=>e.filter(r=>r!==t))}isUserInTable(t){return this.selectedUsersForTable().some(e=>e.id===t)}isUserEligible(t){return!this.registeredUserIds().includes(t)}isUserChecked(t){return this.checkedUsers().includes(t)}toggleUserCheck(t){this.isUserEligible(t)&&(this.isUserChecked(t)?this.checkedUsers.update(e=>e.filter(r=>r!==t)):this.checkedUsers.update(e=>[...e,t]))}toggleAllEligibleUsers(){let t=this.selectedUsersForTable().filter(e=>this.isUserEligible(e.id));if(this.allEligibleUsersChecked())this.checkedUsers.update(e=>e.filter(r=>!t.some(s=>s.id===r)));else{let e=[...this.checkedUsers()];t.forEach(r=>{e.includes(r.id)||e.push(r.id)}),this.checkedUsers.set(e)}}allEligibleUsersChecked(){let t=this.selectedUsersForTable().filter(e=>this.isUserEligible(e.id));return t.length>0&&t.every(e=>this.isUserChecked(e.id))}someEligibleUsersChecked(){return this.selectedUsersForTable().filter(e=>this.isUserEligible(e.id)).some(e=>this.isUserChecked(e.id))&&!this.allEligibleUsersChecked()}updateEligibility(){this.checkedUsers.update(t=>t.filter(e=>this.isUserEligible(e)))}matriculateUsers(){this.checkedUsers().length!==0&&this.showMatriculationModal.set(!0)}confirmMatriculation(){return S(this,null,function*(){this.showMatriculationModal.set(!1),this.showProgressModal.set(!0),this.matriculating.set(!0),this.processedCount.set(0);let t={success:[],errors:[]},e=this.selectedUsersForTable().filter(r=>this.checkedUsers().includes(r.id));try{for(let r of e)try{let s={userId:r.id,eventId:this.selectedEventId,participantRoleId:this.selectedRoleId,initialState:I.registrationStateDefault.registrationBulk,notes:"Matr\xEDcula masiva - Estado directo: Confirmado"},m=yield U(this.registrationService.createRegistration(s));m&&t.success.push(m)}catch(s){t.errors.push({userId:r.id,error:s instanceof Error?s.message:"Error desconocido",user:r})}finally{this.processedCount.update(s=>s+1)}this.matriculationResults.set(t),yield this.loadRegisteredUserIds(),this.updateEligibility()}catch(r){console.error("Error in matriculation:",r)}finally{this.showProgressModal.set(!1),this.matriculating.set(!1),this.showResultsModal.set(!0)}})}closeResultsModal(){this.showResultsModal.set(!1);let t=this.matriculationResults().success.map(e=>e.userId);this.selectedUsersForTable.update(e=>e.filter(r=>!t.includes(r.id))),this.checkedUsers.update(e=>e.filter(r=>!t.includes(r)))}navigateToUserCreate(){this.router.navigate(["/usuarios/nuevo"])}getSelectedRoleName(){return this.availableRoles()[this.selectedRoleId-1]?.name||"Rol desconocido"}Math=Math;formatEventDate(t){try{return new Date(t).toLocaleDateString("es-CO",{year:"numeric",month:"long",day:"numeric"})}catch{return t}}getUserInitials(t){return t?t.split(" ").slice(0,2).map(e=>e.charAt(0)).join("").toUpperCase():"??"}getProgressPercentage(){return this.checkedUsers().length===0?0:Math.round(this.processedCount()/this.checkedUsers().length*100)}goBack(){this.router.navigate(["/inscripciones"])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=D({type:o,selectors:[["app-registration-bulk-create"]],decls:41,vars:5,consts:[[1,"container-fluid","py-3"],["aria-label","breadcrumb",1,"mb-3"],[1,"breadcrumb","mb-0","small"],[1,"breadcrumb-item"],["routerLink","/",1,"text-decoration-none","link-primary"],[1,"bi","bi-house-door","me-1"],[1,"d-none","d-sm-inline"],["routerLink","/registrations",1,"text-decoration-none","link-primary"],[1,"bi","bi-person-badge","me-1"],["aria-current","page",1,"breadcrumb-item","active"],[1,"d-flex","flex-column","flex-sm-row","align-items-start","align-items-sm-center","justify-content-between","gap-2","mb-3"],[1,"order-1","order-sm-0"],[1,"h6","mb-1","fw-normal","d-flex","align-items-center"],[1,"bi","bi-people-fill","me-2","text-primary"],[1,"small"],[1,"text-muted","small","mb-0","d-none","d-sm-block"],[1,"d-flex","flex-wrap","gap-1","order-0","order-sm-1"],["type","button","title","Volver a la lista",1,"btn","btn-outline-secondary","btn-sm","d-flex","align-items-center","px-2",3,"click"],[1,"bi","bi-arrow-left","me-1"],[1,"card","border-0","shadow-sm","mb-3"],[1,"card-header","bg-light","border-bottom","py-2"],[1,"card-title","mb-0","fw-normal","small","d-flex","align-items-center"],[1,"bi","bi-1-circle-fill","me-2","text-primary"],[1,"card-body","py-3"],[1,"d-flex","justify-content-center","align-items-center","py-3"],[1,"alert","alert-warning","py-3","d-flex","align-items-center","gap-3"],["tabindex","-1","aria-labelledby","matriculationModalTitle",1,"modal","d-block",2,"background-color","rgba(0,0,0,0.5)"],["tabindex","-1","aria-labelledby","progressModalTitle",1,"modal","d-block",2,"background-color","rgba(0,0,0,0.7)"],["tabindex","-1","aria-labelledby","resultsModalTitle",1,"modal","d-block",2,"background-color","rgba(0,0,0,0.5)"],[1,"text-center"],["role","status",1,"spinner-border","text-primary","mb-2"],[1,"visually-hidden"],[1,"text-muted","mb-0","small"],[1,"row","g-2"],[1,"col-12","col-md-6"],["for","eventAutoComplete",1,"form-label","fw-normal","small","mb-1"],[1,"bi","bi-calendar-event","text-primary","me-1"],[1,"text-danger"],[1,"input-group","input-group-sm"],[1,"input-group-text","bg-light","border-end-0"],[1,"bi","bi-search","text-muted"],["id","eventAutoComplete","placeholder","Buscar evento...","inputClass","form-control border-start-0 bg-light form-control-sm",3,"optionSelected","searchFn","preloadFn","displayFn","required","inInputGroup"],[1,"text-muted","fs-8"],[1,"text-danger","fs-8","mt-1"],["for","roleAutoComplete",1,"form-label","fw-normal","small","mb-1"],[1,"bi","bi-person-badge","text-success","me-1"],[1,"bi","bi-people","text-muted"],["id","roleAutoComplete","placeholder","Buscar rol...","inputClass","form-control border-start-0 bg-light form-control-sm",3,"valueChange","options","required","inInputGroup"],[1,"alert","alert-info","mt-3","py-2"],[1,"bi","bi-check-circle","text-success","me-1"],[1,"bi","bi-exclamation-circle","me-1"],[1,"d-flex","flex-column","flex-md-row","align-items-start","align-items-md-center","gap-2"],[1,"flex-grow-1"],[1,"alert-heading","mb-1","fw-normal","small","d-flex","align-items-center"],[1,"bi","bi-info-circle","me-2"],[1,"d-flex","flex-wrap","gap-2","fs-8"],[1,"d-flex","align-items-center"],[1,"bi","bi-calendar-range","me-1","text-primary"],[1,"bi","bi-people","me-1","text-success"],[1,"text-md-end"],[1,"badge","text-bg-warning","small"],[1,"badge","text-bg-success","small"],[1,"bi","bi-cash","me-1"],[1,"bi","bi-check-circle","me-1"],[1,"bi","bi-2-circle-fill","me-2","text-success"],[1,"row","g-2","mb-3"],[1,"col-12","col-lg-8"],["for","userAutoComplete",1,"form-label","fw-normal","small","mb-1"],[1,"bi","bi-search","text-info","me-1"],[1,"bi","bi-person-search","text-muted"],["id","userAutoComplete",3,"ngModelChange","valueChange","searchFn","preloadFn","displayFn","placeholder","minChars","searchLimit","debounceMs","maxHeight","noResultsMessage","enablePreload","ngModel","inputClass","size","autocomplete","inInputGroup"],[1,"col-12","col-lg-4","d-flex","flex-wrap","gap-1","align-items-end"],["type","button","title","Registrar nuevo usuario",1,"btn","btn-success","btn-sm","px-2",3,"click"],[1,"bi","bi-person-plus","me-1"],[1,"d-none","d-sm-inline","small"],[1,"d-inline","d-sm-none","small"],[1,"card","border"],[1,"card-header","bg-light","py-2"],[1,"d-flex","flex-column","flex-lg-row","align-items-start","align-items-lg-center","justify-content-between","gap-2"],[1,"d-flex","flex-wrap","align-items-center","gap-2"],[1,"badge","text-bg-secondary","small"],[1,"bi","bi-people","me-1"],[1,"badge","text-bg-primary","small"],["type","button","title","Matricular usuarios seleccionados",1,"btn","btn-primary","btn-sm","px-2",3,"disabled"],[1,"card-body","text-center","py-5"],[1,"card-body","py-0"],["type","button","title","Matricular usuarios seleccionados",1,"btn","btn-primary","btn-sm","px-2",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"],[1,"bi","bi-check-lg","me-1"],[1,"text-muted","mb-3"],[1,"bi","bi-people","display-1","opacity-25"],[1,"text-muted","mb-2"],[1,"text-muted","small","mb-0"],[1,"table-responsive"],[1,"table","table-sm","table-hover","align-middle","mb-0"],[1,"sticky-top","bg-white"],[1,"table-light"],["scope","col",1,"border-bottom","p-2",2,"min-width","40px"],[1,"form-check","m-0"],["type","checkbox","id","selectAllUsers","title","Seleccionar todos los elegibles","aria-label","Seleccionar todos los usuarios",1,"form-check-input",3,"change","checked","indeterminate"],["for","selectAllUsers",1,"form-check-label","visually-hidden"],["scope","col",1,"border-bottom","p-2","fs-7","fw-normal","text-uppercase","text-body-secondary",2,"min-width","180px"],["scope","col",1,"border-bottom","p-2","fs-7","fw-normal","text-uppercase","text-body-secondary","d-none","d-md-table-cell",2,"min-width","200px"],["scope","col",1,"border-bottom","p-2","fs-7","fw-normal","text-uppercase","text-body-secondary","d-none","d-lg-table-cell",2,"min-width","120px"],["scope","col",1,"border-bottom","p-2","fs-7","fw-normal","text-uppercase","text-body-secondary","d-none","d-xl-table-cell",2,"min-width","150px"],["scope","col",1,"border-bottom","p-2","fs-7","fw-normal","text-uppercase","text-body-secondary","text-center",2,"min-width","80px"],[3,"table-success","table-warning","opacity-75"],[1,"border-0","p-2"],["type","checkbox",1,"form-check-input",3,"change","id","checked","disabled"],[1,"form-check-label","visually-hidden",3,"for"],[1,"d-flex","align-items-center","gap-2"],[1,"bg-primary-subtle","text-primary","rounded-circle","d-flex","align-items-center","justify-content-center","flex-shrink-0",2,"width","32px","height","32px"],[1,"fw-semibold","fs-8"],[1,"overflow-hidden"],[1,"fw-normal","text-truncate"],[1,"text-muted","fs-8","d-md-none","text-truncate"],[1,"text-muted","d-none","d-lg-block","fs-8"],[1,"border-0","p-2","d-none","d-md-table-cell"],[1,"text-truncate","fs-7"],[1,"border-0","p-2","d-none","d-lg-table-cell"],[1,"fs-7"],[1,"border-0","p-2","d-none","d-xl-table-cell"],[1,"border-0","p-2","text-center"],[1,"badge","text-bg-light","small"],["type","button","title","Quitar de la lista",1,"btn","btn-outline-danger","btn-sm","px-2",3,"click"],[1,"bi","bi-trash"],[1,"bi","bi-telephone","me-1"],[1,"bi","bi-exclamation-triangle","me-1"],[1,"bi","bi-check","me-1"],[1,"d-inline","d-sm-none"],[1,"bi","bi-exclamation-triangle-fill","text-warning","fs-4","flex-shrink-0"],[1,"mb-1","fw-normal","small"],[1,"mb-0","small"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","border-0","shadow"],[1,"modal-header","py-3","border-bottom"],["id","matriculationModalTitle",1,"modal-title","fw-normal","d-flex","align-items-center"],[1,"bi","bi-exclamation-triangle-fill","text-warning","me-2"],["type","button","aria-label","Cerrar modal",1,"btn-close",3,"click"],[1,"modal-body","py-3"],[1,"alert","alert-info","py-2","mb-3"],[1,"fw-normal","mb-2","small"],[1,"row","g-2","small"],[1,"col-5","fw-medium"],[1,"bi","bi-calendar-event","me-1","text-primary"],[1,"col-7","text-truncate"],[1,"col-7"],[1,"bi","bi-person-badge","me-1","text-info"],[1,"bi","bi-check-circle","me-1","text-success"],[1,"text-muted","mb-0","small","fst-italic"],[1,"bi","bi-info-circle","me-1"],[1,"modal-footer","py-3","border-top"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-x-lg","me-1"],["type","button",1,"btn","btn-primary",3,"click"],[1,"modal-dialog","modal-sm","modal-dialog-centered"],[1,"modal-body","text-center","py-3"],[1,"mb-4"],["role","status",1,"spinner-border","text-primary","mb-3",2,"width","3rem","height","3rem"],["id","progressModalTitle",1,"fw-normal","mb-1","small"],[1,"text-muted","d-block","mb-3"],[1,"progress",2,"height","10px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated"],[1,"text-muted","mt-2","d-block"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],["id","resultsModalTitle",1,"modal-title","fw-normal","d-flex","align-items-center"],[1,"bi","bi-check-circle-fill","text-success","me-2"],[1,"modal-body","py-4"],[1,"alert","alert-success","py-3","mb-4"],[1,"alert","alert-danger","py-3","mb-0"],[1,"d-flex","align-items-center","gap-3"],[1,"bi","bi-check-circle-fill","text-success","fs-4","flex-shrink-0"],[1,"mb-1","fw-semibold"],[1,"d-flex","align-items-center","gap-3","mb-3"],[1,"bi","bi-exclamation-triangle-fill","text-danger","fs-4","flex-shrink-0"],[1,"list-group","list-group-flush","small"],[1,"list-group-item","py-2","px-0","border-0","text-danger"],[1,"d-flex","align-items-start","gap-2"],[1,"bi","bi-x-circle","flex-shrink-0","mt-1"],[1,"fw-medium"],[1,"text-muted","small"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),d(5,"i",5),i(6,"span",6),l(7,"Inicio"),n()()(),i(8,"li",3)(9,"a",7),d(10,"i",8),i(11,"span",6),l(12,"Inscripciones"),n()()(),i(13,"li",9),l(14,"Matr\xEDcula Masiva"),n()()(),i(15,"div",10)(16,"div",11)(17,"h1",12),d(18,"i",13),i(19,"span",14),l(20,"Matr\xEDcula Masiva"),n()(),i(21,"p",15),l(22,"Inscribir m\xFAltiples usuarios a un evento"),n()(),i(23,"div",16)(24,"button",17),v("click",function(){return r.goBack()}),d(25,"i",18),i(26,"span",14),l(27,"Volver"),n()()()(),i(28,"div",19)(29,"div",20)(30,"h6",21),d(31,"i",22),l(32," Paso 1: Seleccionar Evento y Rol "),n()(),i(33,"div",23),u(34,re,7,0,"div",24)(35,me,25,12),n()(),u(36,Ee,35,19,"div",19)(37,ye,7,0,"div",25),n(),u(38,Se,43,3,"div",26),u(39,ke,16,6,"div",27),u(40,Me,15,2,"div",28)),e&2&&(a(34),p(r.loading()?34:35),a(2),p(r.selectedEvent()&&r.selectedRoleId?36:37),a(2),p(r.showMatriculationModal()?38:-1),a(),p(r.showProgressModal()?39:-1),a(),p(r.showResultsModal()?40:-1))},dependencies:[L,q,$,J,z,K,H,te],encapsulation:2,changeDetection:0})};export{ie as RegistrationBulkCreateComponent};
