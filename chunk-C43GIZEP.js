import{b as ee,d as te,h as ie,i as S,k as ne,m as ae}from"./chunk-YUNYRAF7.js";import{a as x}from"./chunk-IYGYDPGO.js";import{n as K,o as X,t as Q,u as Y}from"./chunk-GFCFUV6K.js";import{f as $,h as Z,l as q}from"./chunk-NUA5R5QO.js";import{$b as _,Ac as U,Bb as F,Cb as M,D as A,Da as p,Fb as s,Gb as w,Hb as k,Ib as L,Na as P,Ra as f,Ub as G,Vb as H,_ as y,ac as R,da as c,ea as d,gb as u,hb as n,ia as V,ib as a,jb as l,ma as g,nb as z,ob as j,qb as C,rb as m,tb as v,tc as W,uc as B,vb as D,wb as I,x as O,xb as N,yc as J}from"./chunk-6O7NOF42.js";import"./chunk-FK42CRUA.js";var re=["canvasElement"];function oe(h,e){if(h&1&&(n(0,"option",113),s(1),a()),h&2){let i=e.$implicit;u("value",i.name),p(),k(" ",i.displayName," ")}}function se(h,e){if(h&1){let i=C();n(0,"div",71)(1,"label",72),s(2,"Texto"),a(),n(3,"textarea",74),m("input",function(r){c(i);let o=v(3);return d(o.updateObjectProperty("text",r.target.value))}),a()()}if(h&2){let i=v().$implicit;p(3),u("value",i.text)}}function le(h,e){if(h&1&&(n(0,"option",113),s(1),a()),h&2){let i=e.$implicit;u("value",i),p(),w(i)}}function ce(h,e){if(h&1){let i=C();n(0,"div",84)(1,"div",55)(2,"label",72),s(3,"Fuente"),a(),n(4,"select",75),m("change",function(r){c(i);let o=v(3);return d(o.updateObjectProperty("fontFamily",r.target.value))}),f(5,le,2,2,"option",76),a()(),n(6,"div",55)(7,"label",72),s(8,"Tama\xF1o"),a(),n(9,"input",121),m("input",function(r){c(i);let o=v(3);return d(o.updateObjectProperty("fontSize",+r.target.value))}),a()()()}if(h&2){let i=v().$implicit,t=v(2);p(4),u("value",i.fontFamily),p(),u("ngForOf",t.textFonts),p(4),u("value",i.fontSize)}}function de(h,e){if(h&1){let i=C();z(0),f(1,se,4,1,"div",118)(2,ce,10,3,"div",119),n(3,"div",71)(4,"label",72),s(5,"Color"),a(),n(6,"input",120),m("input",function(r){c(i);let o=v(2);return d(o.updateObjectProperty("fill",r.target.value))}),a()(),n(7,"div",84)(8,"div",55)(9,"label",72),s(10,"X"),a(),n(11,"input",121),m("input",function(r){c(i);let o=v(2);return d(o.updateObjectProperty("left",+r.target.value))}),a()(),n(12,"div",55)(13,"label",72),s(14,"Y"),a(),n(15,"input",121),m("input",function(r){c(i);let o=v(2);return d(o.updateObjectProperty("top",+r.target.value))}),a()()(),n(16,"div",71)(17,"label",72),s(18,"Capas"),a(),n(19,"div",77)(20,"button",122),m("click",function(){c(i);let r=v(2);return d(r.bringToFront())}),l(21,"i",123),a(),n(22,"button",124),m("click",function(){c(i);let r=v(2);return d(r.sendToBack())}),l(23,"i",125),a()()(),n(24,"div",71)(25,"label",72),s(26,"Alineaci\xF3n"),a(),n(27,"div",77)(28,"button",126),m("click",function(){c(i);let r=v(2);return d(r.alignLeft())}),l(29,"i",127),a(),n(30,"button",128),m("click",function(){c(i);let r=v(2);return d(r.alignCenter())}),l(31,"i",129),a(),n(32,"button",130),m("click",function(){c(i);let r=v(2);return d(r.alignRight())}),l(33,"i",131),a()()(),j()}if(h&2){let i=e.$implicit;p(),u("ngIf",i.type==="textbox"),p(),u("ngIf",i.type==="textbox"),p(4),u("value",i.fill),p(5),u("value",i.left),p(4),u("value",i.top)}}function me(h,e){if(h&1&&(n(0,"div",48)(1,"h2",49)(2,"button",114),l(3,"i",115),s(4," Propiedades del Objeto "),a()(),n(5,"div",116)(6,"div",53),f(7,de,34,5,"ng-container",117),a()()()),h&2){let i=v();p(7),u("ngIf",i.selectedObject())}}function pe(h,e){if(h&1&&(n(0,"div",132)(1,"span"),s(2),a(),n(3,"span",133),s(4),a()()),h&2){let i=e.$implicit;p(2),w(i.key),p(2),w(i.value)}}function ue(h,e){h&1&&(n(0,"div",134)(1,"div",135)(2,"div",136)(3,"span",137),s(4,"Cargando..."),a()(),n(5,"div"),s(6,"Cargando plantilla..."),a()()())}var T=class h{route=y($);router=y(Z);destroyRef=y(V);canvasElement;canvas;isCanvasInitialized=!1;templateName=g("Nueva Plantilla");templateDescription=g("");currentPageSize=g({name:"A4",width:794,height:1123,displayName:"A4 (210 \xD7 297 mm)"});orientation=g("portrait");pageSizes=[{name:"A4",width:794,height:1123,displayName:"A4 (210 \xD7 297 mm)"},{name:"Letter",width:816,height:1056,displayName:"Carta (8.5 \xD7 11 in)"},{name:"Legal",width:816,height:1344,displayName:"Legal (8.5 \xD7 14 in)"},{name:"Custom",width:800,height:600,displayName:"Personalizado"}];textFonts=["Arial","Times New Roman","Georgia","Verdana","Helvetica","Calibri","Trebuchet MS","Garamond","Palatino","Impact"];selectedTool=g("select");selectedObject=g(null);showPropertiesPanel=g(!1);isLoading=g(!1);isDirty=g(!1);zoomLevel=g(1);showGrid=g(!0);snapToGrid=g(!0);canvasHistory=[];historyIndex=g(0);clipboardObject=null;shortcuts={"Ctrl+Z":"Deshacer","Ctrl+Y":"Rehacer","Ctrl+C":"Copiar","Ctrl+V":"Pegar",Delete:"Eliminar","Ctrl+S":"Guardar","Ctrl+A":"Seleccionar todo"};canvasWidth=_(()=>{let e=this.currentPageSize();return this.orientation()==="portrait"?e.width:e.height});canvasHeight=_(()=>{let e=this.currentPageSize();return this.orientation()==="portrait"?e.height:e.width});canUndo=_(()=>this.historyIndex()>0);canRedo=_(()=>this.historyIndex()<this.canvasHistory.length-1);hasSelection=_(()=>!!this.selectedObject());constructor(){R(()=>{this.isCanvasInitialized&&this.updateCanvasSize()}),this.route.queryParams.pipe(x(this.destroyRef)).subscribe(e=>{e.template&&this.loadTemplateFromStorage(e.template)})}ngOnInit(){this.initializeCanvas(),this.setupCanvasEvents(),this.setupKeyboardShortcuts(),this.setupAutoSave()}ngOnDestroy(){this.canvas&&this.canvas.dispose()}initializeCanvas(){this.canvasElement?.nativeElement&&(this.canvas=new te(this.canvasElement.nativeElement,{width:this.canvasWidth(),height:this.canvasHeight(),backgroundColor:"#ffffff",selection:!0,preserveObjectStacking:!0}),this.isCanvasInitialized=!0,this.addGridBackground())}setupCanvasEvents(){this.canvas&&(this.canvas.on("selection:created",e=>{this.selectedObject.set(e.selected?.[0]||null),this.showPropertiesPanel.set(!0)}),this.canvas.on("selection:updated",e=>{this.selectedObject.set(e.selected?.[0]||null)}),this.canvas.on("selection:cleared",()=>{this.selectedObject.set(null),this.showPropertiesPanel.set(!1)}),this.canvas.on("object:modified",()=>{this.canvas.renderAll(),this.saveCanvasState()}))}addGridBackground(){let i=this.canvasWidth(),t=this.canvasHeight(),r=[];for(let o=0;o<i/20;o++){let b=new S([o*20,0,o*20,t],{stroke:"#f0f0f0",strokeWidth:1,selectable:!1,evented:!1});r.push(b)}for(let o=0;o<t/20;o++){let b=new S([0,o*20,i,o*20],{stroke:"#f0f0f0",strokeWidth:1,selectable:!1,evented:!1});r.push(b)}this.canvas.add(...r),r.forEach(o=>{this.canvas.sendObjectToBack(o)}),this.canvas.renderAll()}selectTool(e){this.selectedTool.set(e),this.canvas.isDrawingMode=e==="brush"}addText(){let e=new ne("Texto de ejemplo",{left:100,top:100,width:200,fontSize:24,fontFamily:"Arial",fill:"#000000",editable:!0});this.canvas.add(e),this.canvas.setActiveObject(e),this.canvas.renderAll(),this.saveCanvasState()}addImage(){let e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=i=>{let t=i.target.files?.[0];if(t){let r=new FileReader;r.onload=o=>{let b=o.target?.result;ae.fromURL(b).then(E=>{E.scale(.5),E.set({left:100,top:100}),this.canvas.add(E),this.canvas.setActiveObject(E),this.canvas.renderAll(),this.saveCanvasState()})},r.readAsDataURL(t)}},e.click()}addShape(e){let i;switch(e){case"rectangle":i=new ee({left:100,top:100,width:150,height:100,fill:"#007bff",stroke:"#0056b3",strokeWidth:2});break;case"circle":i=new ie({left:100,top:100,radius:50,fill:"#28a745",stroke:"#1e7e34",strokeWidth:2});break;case"line":i=new S([100,100,250,100],{stroke:"#dc3545",strokeWidth:3});break;default:return}this.canvas.add(i),this.canvas.setActiveObject(i),this.canvas.renderAll(),this.saveCanvasState()}deleteSelected(){let e=this.canvas.getActiveObject();e&&(this.canvas.remove(e),this.canvas.renderAll(),this.saveCanvasState())}copySelected(){let e=this.canvas.getActiveObject();e&&(this.clipboardObject=e,e.clone(i=>{i.set({left:(i.left||0)+10,top:(i.top||0)+10}),this.canvas.add(i),this.canvas.setActiveObject(i),this.canvas.renderAll(),this.saveCanvasState()}))}clearCanvas(){this.canvas.clear(),this.canvas.backgroundColor="#ffffff",this.addGridBackground(),this.canvas.renderAll(),this.saveCanvasState()}changePageSize(e){this.currentPageSize.set(e),this.updateCanvasSize()}toggleOrientation(){this.orientation.set(this.orientation()==="portrait"?"landscape":"portrait"),this.updateCanvasSize()}updateCanvasSize(){this.canvas&&(this.canvas.setDimensions({width:this.canvasWidth(),height:this.canvasHeight()}),this.canvas.clear(),this.canvas.backgroundColor="#ffffff",this.addGridBackground(),this.canvas.renderAll())}onPageSizeChange(e){let i=e.target,t=this.pageSizes.find(r=>r.name===i.value);t&&this.changePageSize(t)}onOrientationChange(e){this.orientation.set(e),this.updateCanvasSize()}updateObjectProperty(e,i){let t=this.selectedObject();t&&(t.set(e,i),this.canvas.renderAll())}saveTemplate(){return{name:this.templateName(),description:this.templateDescription(),pageSize:this.currentPageSize().name,orientation:this.orientation(),width:this.canvasWidth(),height:this.canvasHeight(),canvasData:this.canvas.toJSON(),createdAt:new Date,updatedAt:new Date}}exportAsJSON(){let e=this.saveTemplate(),i=JSON.stringify(e,null,2),t="data:application/json;charset=utf-8,"+encodeURIComponent(i),r=`${this.templateName().replace(/\s+/g,"_")}_template.json`,o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("download",r),o.click()}loadTemplate(e){this.templateName.set(e.name),this.templateDescription.set(e.description),this.orientation.set(e.orientation);let i=this.pageSizes.find(t=>t.name===e.pageSize);i&&this.currentPageSize.set(i),this.updateCanvasSize(),e.canvasData&&this.canvas.loadFromJSON(e.canvasData,()=>{this.canvas.renderAll(),this.addGridBackground()})}bringToFront(){let e=this.canvas.getActiveObject();e&&(this.canvas.bringObjectToFront(e),this.canvas.renderAll(),this.showToast("Objeto movido al frente","success"))}sendToBack(){let e=this.canvas.getActiveObject();e&&(this.canvas.sendObjectToBack(e),this.canvas.renderAll(),this.showToast("Objeto movido atr\xE1s","success"))}alignLeft(){let e=this.canvas.getActiveObject();e&&(e.set("left",0),this.canvas.renderAll())}alignCenter(){let e=this.canvas.getActiveObject();if(e){let i=this.canvasWidth()/2;e.set("left",i-(e.width||0)*(e.scaleX||1)/2),this.canvas.renderAll()}}alignRight(){let e=this.canvas.getActiveObject();if(e){let i=this.canvasWidth()-(e.width||0)*(e.scaleX||1);e.set("left",i),this.canvas.renderAll()}}setupKeyboardShortcuts(){O(document,"keydown").pipe(A(10),x(this.destroyRef)).subscribe(e=>this.handleKeyboardShortcut(e))}handleKeyboardShortcut(e){if(!this.canvas)return;let i=e.ctrlKey,t=e.key.toLowerCase();switch(i&&["z","y","c","v","s","a"].includes(t)&&e.preventDefault(),!0){case(i&&t==="z"):this.undo();break;case(i&&t==="y"):this.redo();break;case(i&&t==="c"):this.copySelected();break;case(i&&t==="v"):this.pasteFromClipboard();break;case(i&&t==="s"):this.quickSave();break;case(i&&t==="a"):this.selectAll();break;case t==="delete":this.deleteSelected();break;case t==="escape":this.canvas.discardActiveObject(),this.canvas.renderAll();break}}setupAutoSave(){setInterval(()=>{this.isDirty()&&this.autoSave()},3e4)}saveCanvasState(){if(!this.canvas)return;let e=JSON.stringify(this.canvas.toJSON());this.canvasHistory=this.canvasHistory.slice(0,this.historyIndex()+1),this.canvasHistory.push(e),this.historyIndex.set(this.canvasHistory.length-1),this.isDirty.set(!0),this.canvasHistory.length>50&&(this.canvasHistory.shift(),this.historyIndex.set(this.historyIndex()-1))}undo(){this.historyIndex()>0&&(this.historyIndex.set(this.historyIndex()-1),this.loadCanvasState(this.canvasHistory[this.historyIndex()]))}redo(){this.historyIndex()<this.canvasHistory.length-1&&(this.historyIndex.set(this.historyIndex()+1),this.loadCanvasState(this.canvasHistory[this.historyIndex()]))}loadCanvasState(e){this.canvas.loadFromJSON(e,()=>{this.canvas.renderAll(),this.addGridBackground()})}selectAll(){let e=this.canvas.getObjects().filter(i=>i.selectable!==!1&&i.evented!==!1);if(e.length>1){let i=new this.canvas.constructor.ActiveSelection(e,{canvas:this.canvas});this.canvas.setActiveObject(i),this.canvas.renderAll()}}pasteFromClipboard(){this.clipboardObject&&this.clipboardObject.clone(e=>{e.set({left:(e.left||0)+10,top:(e.top||0)+10}),this.canvas.add(e),this.canvas.setActiveObject(e),this.canvas.renderAll(),this.saveCanvasState()})}duplicateSelected(){let e=this.canvas.getActiveObject();e&&(this.clipboardObject=e,this.pasteFromClipboard())}zoomIn(){let e=Math.min(this.zoomLevel()*1.1,3);this.setZoom(e)}zoomOut(){let e=Math.max(this.zoomLevel()/1.1,.1);this.setZoom(e)}zoomToFit(){let e=this.canvasElement.nativeElement,i=e.parentElement?.clientWidth||800,t=e.parentElement?.clientHeight||600,r=(i-100)/this.canvasWidth(),o=(t-100)/this.canvasHeight(),b=Math.min(r,o,1);this.setZoom(b)}resetZoom(){this.setZoom(1)}setZoom(e){this.zoomLevel.set(e),this.canvas.setZoom(e),this.canvas.renderAll()}toggleGrid(){this.showGrid.set(!this.showGrid()),this.showGrid()?this.addGridBackground():this.removeGridBackground()}toggleSnapToGrid(){this.snapToGrid.set(!this.snapToGrid())}removeGridBackground(){this.canvas.getObjects().filter(t=>t.stroke==="#f0f0f0"&&!t.selectable).forEach(t=>this.canvas.remove(t)),this.canvas.renderAll()}quickSave(){this.autoSave(),this.showToast("Plantilla guardada autom\xE1ticamente","success")}autoSave(){let e=this.saveTemplate();localStorage.setItem(`certificate_autosave_${Date.now()}`,JSON.stringify(e)),this.isDirty.set(!1)}loadTemplateFromStorage(e){let i=localStorage.getItem(`certificate_template_${e}`);if(i)try{let t=JSON.parse(i);this.loadTemplate(t)}catch(t){console.error("Error loading template:",t),this.showToast("Error al cargar la plantilla","error")}}loadPredefinedTemplate(e){this.isLoading.set(!0);let i={academic:this.createAcademicTemplate(),corporate:this.createCorporateTemplate(),modern:this.createModernTemplate(),elegant:this.createElegantTemplate()};setTimeout(()=>{this.loadTemplate(i[e]),this.isLoading.set(!1)},500)}createAcademicTemplate(){return{name:"Plantilla Acad\xE9mica",description:"Dise\xF1o cl\xE1sico para instituciones educativas",pageSize:"A4",orientation:"landscape",width:1123,height:794,canvasData:{objects:[{type:"textbox",text:"CERTIFICADO DE PARTICIPACI\xD3N",left:100,top:100,fontSize:36,fontFamily:"Georgia",fontWeight:"bold",fill:"#1a365d"}]}}}createCorporateTemplate(){return{name:"Plantilla Corporativa",description:"Dise\xF1o profesional para empresas",pageSize:"A4",orientation:"landscape",width:1123,height:794,canvasData:{objects:[{type:"textbox",text:"CERTIFICADO PROFESIONAL",left:100,top:100,fontSize:32,fontFamily:"Arial",fontWeight:"bold",fill:"#2d3748"}]}}}createModernTemplate(){return{name:"Plantilla Moderna",description:"Dise\xF1o contempor\xE1neo y minimalista",pageSize:"A4",orientation:"landscape",width:1123,height:794,canvasData:{objects:[{type:"textbox",text:"CERTIFICATE",left:100,top:100,fontSize:42,fontFamily:"Helvetica",fontWeight:"300",fill:"#4a5568"}]}}}createElegantTemplate(){return{name:"Plantilla Elegante",description:"Dise\xF1o sofisticado con elementos decorativos",pageSize:"A4",orientation:"landscape",width:1123,height:794,canvasData:{objects:[{type:"textbox",text:"CERTIFICADO DE EXCELENCIA",left:100,top:100,fontSize:34,fontFamily:"Garamond",fontWeight:"bold",fill:"#744210"}]}}}exportAsPNG(e=1){let i=this.canvas.toDataURL({format:"png",quality:e,multiplier:2});this.downloadFile(i,`${this.templateName()}.png`)}exportAsJPEG(e=.9){let i=this.canvas.toDataURL({format:"jpeg",quality:e,multiplier:2});this.downloadFile(i,`${this.templateName()}.jpg`)}exportAsPDF(){this.showToast("Exportaci\xF3n a PDF pr\xF3ximamente","info")}downloadFile(e,i){let t=document.createElement("a");t.download=i,t.href=e,t.click()}showToast(e,i="info"){let t=`
      <div class="toast align-items-center text-white bg-${i==="success"?"success":i==="error"?"danger":"primary"} border-0" role="alert">
        <div class="d-flex">
          <div class="toast-body">${e}</div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
      </div>
    `,r=document.querySelector(".toast-container")||this.createToastContainer();r.insertAdjacentHTML("beforeend",t);let o=r.lastElementChild;new bootstrap.Toast(o).show(),o.addEventListener("hidden.bs.toast",()=>{o.remove()})}createToastContainer(){let e=document.createElement("div");return e.className="toast-container position-fixed top-0 end-0 p-3",e.style.zIndex="1080",document.body.appendChild(e),e}get currentZoom(){return Math.round(this.zoomLevel()*100)}importTemplate(){let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=i=>{let t=i.target.files?.[0];if(t){let r=new FileReader;r.onload=o=>{try{let b=JSON.parse(o.target?.result);this.loadTemplate(b),this.showToast("Plantilla importada correctamente","success")}catch(b){console.error("Error al cargar la plantilla:",b),this.showToast("Error al cargar la plantilla. Verifique que el archivo sea v\xE1lido.","error")}},r.readAsText(t)}},e.click()}static \u0275fac=function(i){return new(i||h)};static \u0275cmp=P({type:h,selectors:[["app-certificate-editor"]],viewQuery:function(i,t){if(i&1&&D(re,7),i&2){let r;I(r=N())&&(t.canvasElement=r.first)}},decls:200,vars:28,consts:[["canvasElement",""],[1,"toast-container","position-fixed","top-0","end-0","p-3",2,"z-index","1080"],[1,"container-fluid","h-100"],[1,"row","h-100"],[1,"col-12","p-0"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","border-bottom"],[1,"container-fluid"],[1,"navbar-brand","mb-0","h1"],[1,"bi","bi-palette","me-2"],[1,"navbar-nav","flex-row","me-auto"],[1,"nav-item","dropdown","me-2"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-outline-light","btn-sm","dropdown-toggle"],[1,"bi","bi-file-plus","me-1"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"bi","bi-file-blank","me-2"],[1,"dropdown-divider"],[1,"dropdown-header"],[1,"bi","bi-mortarboard","me-2"],[1,"bi","bi-building","me-2"],[1,"bi","bi-lightning","me-2"],[1,"bi","bi-gem","me-2"],["role","group",1,"btn-group","me-2"],["title","Importar plantilla",1,"btn","btn-outline-light","btn-sm",3,"click"],[1,"bi","bi-upload"],["title","Exportar JSON",1,"btn","btn-outline-light","btn-sm",3,"click"],[1,"bi","bi-download"],["title","Deshacer",1,"btn","btn-outline-light","btn-sm",3,"click","disabled"],[1,"bi","bi-arrow-counterclockwise"],["title","Rehacer",1,"btn","btn-outline-light","btn-sm",3,"click","disabled"],[1,"bi","bi-arrow-clockwise"],["title","Copiar",1,"btn","btn-outline-light","btn-sm",3,"click","disabled"],[1,"bi","bi-clipboard"],["title","Eliminar",1,"btn","btn-outline-light","btn-sm",3,"click","disabled"],[1,"bi","bi-trash"],[1,"navbar-nav","flex-row"],["title","Alejar",1,"btn","btn-outline-light","btn-sm",3,"click"],[1,"bi","bi-zoom-out"],[1,"btn","btn-outline-light","btn-sm","disabled"],["title","Acercar",1,"btn","btn-outline-light","btn-sm",3,"click"],[1,"bi","bi-zoom-in"],["title","Ajustar a pantalla",1,"btn","btn-outline-light","btn-sm","me-2",3,"click"],[1,"bi","bi-arrows-angle-expand"],[1,"col-12","p-0",2,"height","calc(100vh - 56px)"],[1,"row","h-100","g-0"],[1,"col-xl-3","col-lg-4","border-end","bg-light"],[1,"h-100","overflow-auto"],["id","toolsAccordion",1,"accordion","accordion-flush"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#toolsPanel",1,"accordion-button"],[1,"bi","bi-tools","me-2"],["id","toolsPanel","data-bs-parent","#toolsAccordion",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[1,"row","g-2"],[1,"col-6"],["title","Seleccionar",1,"btn","w-100",3,"click"],[1,"bi","bi-cursor","d-block"],["title","Agregar texto",1,"btn","btn-outline-secondary","w-100",3,"click"],[1,"bi","bi-type","d-block"],["title","Agregar imagen",1,"btn","btn-outline-secondary","w-100",3,"click"],[1,"bi","bi-image","d-block"],[1,"dropdown","w-100"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-outline-secondary","w-100","dropdown-toggle"],[1,"bi","bi-shapes","d-block"],[1,"bi","bi-square","me-2"],[1,"bi","bi-circle","me-2"],[1,"bi","bi-dash","me-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#pagePanel",1,"accordion-button","collapsed"],[1,"bi","bi-file-earmark","me-2"],["id","pagePanel","data-bs-parent","#toolsAccordion",1,"accordion-collapse","collapse"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control","form-control-sm",3,"input","value"],["rows","2",1,"form-control","form-control-sm",3,"input","value"],[1,"form-select","form-select-sm",3,"change","value"],[3,"value",4,"ngFor","ngForOf"],["role","group",1,"btn-group","w-100"],["type","radio","name","orientation","id","portrait",1,"btn-check",3,"checked"],["for","portrait",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-phone","me-1"],["type","radio","name","orientation","id","landscape",1,"btn-check",3,"checked"],["for","landscape",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-tablet-landscape","me-1"],[1,"row","g-2","mb-3"],["type","number","readonly","",1,"form-control","form-control-sm",3,"value"],["class","accordion-item",4,"ngIf"],["type","button","data-bs-toggle","collapse","data-bs-target","#advancedPanel",1,"accordion-button","collapsed"],[1,"bi","bi-gear","me-2"],["id","advancedPanel","data-bs-parent","#toolsAccordion",1,"accordion-collapse","collapse"],[1,"form-check","form-switch","mb-2"],["type","checkbox","id","showGrid",1,"form-check-input",3,"change","checked"],["for","showGrid",1,"form-check-label"],[1,"form-check","form-switch","mb-3"],["type","checkbox","id","snapToGrid",1,"form-check-input",3,"change","checked"],["for","snapToGrid",1,"form-check-label"],[1,"d-grid","gap-2"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-image","me-2"],[1,"bi","bi-filetype-jpg","me-2"],[1,"bi","bi-filetype-pdf","me-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#shortcutsHelp",1,"btn","btn-outline-info","btn-sm","w-100"],[1,"bi","bi-keyboard","me-2"],["id","shortcutsHelp",1,"collapse","mt-2"],[1,"card","card-body","p-2"],["class","d-flex justify-content-between",4,"ngFor","ngForOf"],[1,"col-xl-9","col-lg-8"],[1,"h-100","d-flex","align-items-center","justify-content-center","bg-secondary","bg-opacity-10","position-relative","overflow-auto"],["class","position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center bg-white bg-opacity-75","style","z-index: 1000;",4,"ngIf"],[1,"canvas-container","shadow-lg","border"],[1,"d-block"],[1,"position-absolute","bottom-0","start-0","p-3"],[1,"badge","bg-dark"],[3,"value"],["type","button","data-bs-toggle","collapse","data-bs-target","#propertiesPanel",1,"accordion-button","collapsed"],[1,"bi","bi-sliders","me-2"],["id","propertiesPanel","data-bs-parent","#toolsAccordion",1,"accordion-collapse","collapse","show"],[4,"ngIf"],["class","mb-3",4,"ngIf"],["class","row g-2 mb-3",4,"ngIf"],["type","color",1,"form-control","form-control-color","form-control-sm",3,"input","value"],["type","number",1,"form-control","form-control-sm",3,"input","value"],["title","Traer al frente",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-bring-forward"],["title","Enviar atr\xE1s",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-send-backward"],["title","Alinear izquierda",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-text-left"],["title","Centrar",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-text-center"],["title","Alinear derecha",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-text-right"],[1,"d-flex","justify-content-between"],[1,"text-muted"],[1,"position-absolute","top-0","start-0","w-100","h-100","d-flex","align-items-center","justify-content-center","bg-white","bg-opacity-75",2,"z-index","1000"],[1,"text-center"],["role","status",1,"spinner-border","text-primary","mb-3"],[1,"visually-hidden"]],template:function(i,t){if(i&1){let r=C();l(0,"div",1),n(1,"div",2)(2,"div",3)(3,"div",4)(4,"nav",5)(5,"div",6)(6,"span",7),l(7,"i",8),s(8," Editor de Certificados "),a(),n(9,"div",9)(10,"div",10)(11,"button",11),l(12,"i",12),s(13," Nuevo "),a(),n(14,"ul",13)(15,"li")(16,"a",14),m("click",function(){return c(r),d(t.clearCanvas())}),l(17,"i",15),s(18,"Lienzo en Blanco "),a()(),n(19,"li"),l(20,"hr",16),a(),n(21,"li")(22,"h6",17),s(23,"Plantillas Predefinidas"),a()(),n(24,"li")(25,"a",14),m("click",function(){return c(r),d(t.loadPredefinedTemplate("academic"))}),l(26,"i",18),s(27,"Acad\xE9mica "),a()(),n(28,"li")(29,"a",14),m("click",function(){return c(r),d(t.loadPredefinedTemplate("corporate"))}),l(30,"i",19),s(31,"Corporativa "),a()(),n(32,"li")(33,"a",14),m("click",function(){return c(r),d(t.loadPredefinedTemplate("modern"))}),l(34,"i",20),s(35,"Moderna "),a()(),n(36,"li")(37,"a",14),m("click",function(){return c(r),d(t.loadPredefinedTemplate("elegant"))}),l(38,"i",21),s(39,"Elegante "),a()()()(),n(40,"div",22)(41,"button",23),m("click",function(){return c(r),d(t.importTemplate())}),l(42,"i",24),a(),n(43,"button",25),m("click",function(){return c(r),d(t.exportAsJSON())}),l(44,"i",26),a()(),n(45,"div",22)(46,"button",27),m("click",function(){return c(r),d(t.undo())}),l(47,"i",28),a(),n(48,"button",29),m("click",function(){return c(r),d(t.redo())}),l(49,"i",30),a()(),n(50,"div",22)(51,"button",31),m("click",function(){return c(r),d(t.copySelected())}),l(52,"i",32),a(),n(53,"button",33),m("click",function(){return c(r),d(t.deleteSelected())}),l(54,"i",34),a()()(),n(55,"div",35)(56,"div",22)(57,"button",36),m("click",function(){return c(r),d(t.zoomOut())}),l(58,"i",37),a(),n(59,"span",38),s(60),a(),n(61,"button",39),m("click",function(){return c(r),d(t.zoomIn())}),l(62,"i",40),a()(),n(63,"button",41),m("click",function(){return c(r),d(t.zoomToFit())}),l(64,"i",42),a()()()()(),n(65,"div",43)(66,"div",44)(67,"div",45)(68,"div",46)(69,"div",47)(70,"div",48)(71,"h2",49)(72,"button",50),l(73,"i",51),s(74," Herramientas "),a()(),n(75,"div",52)(76,"div",53)(77,"div",54)(78,"div",55)(79,"button",56),m("click",function(){return c(r),d(t.selectTool("select"))}),l(80,"i",57),n(81,"small"),s(82,"Seleccionar"),a()()(),n(83,"div",55)(84,"button",58),m("click",function(){return c(r),d(t.addText())}),l(85,"i",59),n(86,"small"),s(87,"Texto"),a()()(),n(88,"div",55)(89,"button",60),m("click",function(){return c(r),d(t.addImage())}),l(90,"i",61),n(91,"small"),s(92,"Imagen"),a()()(),n(93,"div",55)(94,"div",62)(95,"button",63),l(96,"i",64),n(97,"small"),s(98,"Formas"),a()(),n(99,"ul",13)(100,"li")(101,"a",14),m("click",function(){return c(r),d(t.addShape("rectangle"))}),l(102,"i",65),s(103,"Rect\xE1ngulo "),a()(),n(104,"li")(105,"a",14),m("click",function(){return c(r),d(t.addShape("circle"))}),l(106,"i",66),s(107,"C\xEDrculo "),a()(),n(108,"li")(109,"a",14),m("click",function(){return c(r),d(t.addShape("line"))}),l(110,"i",67),s(111,"L\xEDnea "),a()()()()()()()()(),n(112,"div",48)(113,"h2",49)(114,"button",68),l(115,"i",69),s(116," Configuraci\xF3n de P\xE1gina "),a()(),n(117,"div",70)(118,"div",53)(119,"div",71)(120,"label",72),s(121,"Nombre de la Plantilla"),a(),n(122,"input",73),m("input",function(b){return c(r),d(t.templateName.set(b.target.value))}),a()(),n(123,"div",71)(124,"label",72),s(125,"Descripci\xF3n"),a(),n(126,"textarea",74),m("input",function(b){return c(r),d(t.templateDescription.set(b.target.value))}),a()(),n(127,"div",71)(128,"label",72),s(129,"Tama\xF1o de P\xE1gina"),a(),n(130,"select",75),m("change",function(b){return c(r),d(t.onPageSizeChange(b))}),f(131,oe,2,2,"option",76),a()(),n(132,"div",71)(133,"label",72),s(134,"Orientaci\xF3n"),a(),n(135,"div",77),l(136,"input",78),n(137,"label",79),m("click",function(){return c(r),d(t.onOrientationChange("portrait"))}),l(138,"i",80),s(139,"Vertical "),a(),l(140,"input",81),n(141,"label",82),m("click",function(){return c(r),d(t.onOrientationChange("landscape"))}),l(142,"i",83),s(143,"Horizontal "),a()()(),n(144,"div",84)(145,"div",55)(146,"label",72),s(147,"Ancho"),a(),l(148,"input",85),a(),n(149,"div",55)(150,"label",72),s(151,"Alto"),a(),l(152,"input",85),a()()()()(),f(153,me,8,1,"div",86),n(154,"div",48)(155,"h2",49)(156,"button",87),l(157,"i",88),s(158," Opciones Avanzadas "),a()(),n(159,"div",89)(160,"div",53)(161,"div",90)(162,"input",91),m("change",function(){return c(r),d(t.toggleGrid())}),a(),n(163,"label",92),s(164," Mostrar cuadr\xEDcula "),a()(),n(165,"div",93)(166,"input",94),m("change",function(){return c(r),d(t.toggleSnapToGrid())}),a(),n(167,"label",95),s(168," Ajustar a cuadr\xEDcula "),a()(),n(169,"div",71)(170,"label",72),s(171,"Exportar como"),a(),n(172,"div",96)(173,"button",97),m("click",function(){return c(r),d(t.exportAsPNG())}),l(174,"i",98),s(175,"PNG "),a(),n(176,"button",97),m("click",function(){return c(r),d(t.exportAsJPEG())}),l(177,"i",99),s(178,"JPEG "),a(),n(179,"button",97),m("click",function(){return c(r),d(t.exportAsPDF())}),l(180,"i",100),s(181,"PDF "),a()()(),n(182,"div",71)(183,"button",101),l(184,"i",102),s(185," Atajos de Teclado "),a(),n(186,"div",103)(187,"div",104)(188,"small"),f(189,pe,5,2,"div",105),G(190,"keyvalue"),a()()()()()()()()()(),n(191,"div",106)(192,"div",107),f(193,ue,7,0,"div",108),n(194,"div",109),l(195,"canvas",110,0),a(),n(197,"div",111)(198,"div",112),s(199),a()()()()()()()()}i&2&&(p(46),u("disabled",!t.canUndo()),p(2),u("disabled",!t.canRedo()),p(3),u("disabled",!t.hasSelection()),p(2),u("disabled",!t.hasSelection()),p(7),k("",t.currentZoom,"%"),p(19),M("btn-primary",t.selectedTool()==="select")("btn-outline-secondary",t.selectedTool()!=="select"),p(43),u("value",t.templateName()),p(4),u("value",t.templateDescription()),p(4),u("value",t.currentPageSize().name),p(),u("ngForOf",t.pageSizes),p(5),u("checked",t.orientation()==="portrait"),p(4),u("checked",t.orientation()==="landscape"),p(8),u("value",t.canvasWidth()),p(4),u("value",t.canvasHeight()),p(),u("ngIf",t.hasSelection()),p(9),u("checked",t.showGrid()),p(4),u("checked",t.snapToGrid()),p(23),u("ngForOf",H(190,26,t.shortcuts)),p(4),u("ngIf",t.isLoading()),p(),F("zoom",t.zoomLevel()),p(5),L(" ",t.canvasWidth()," \xD7 ",t.canvasHeight(),"px "))},dependencies:[U,W,B,Q,K,X,Y,q,J],styles:[".canvas-container[_ngcontent-%COMP%]{background:#fff;transform-origin:center}.accordion-button[_ngcontent-%COMP%]:not(.collapsed){color:var(--bs-primary);background-color:var(--bs-primary-bg-subtle)}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:0}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child{border-top-left-radius:var(--bs-border-radius);border-bottom-left-radius:var(--bs-border-radius)}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{border-top-right-radius:var(--bs-border-radius);border-bottom-right-radius:var(--bs-border-radius)}.form-control-color[_ngcontent-%COMP%]{width:100%;height:31px}.toast-container[_ngcontent-%COMP%]{z-index:1080}"],changeDetection:0})},ze=T;export{T as CertificateEditorComponent,ze as default};
