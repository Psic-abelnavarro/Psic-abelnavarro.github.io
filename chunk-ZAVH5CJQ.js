import{a as te}from"./chunk-D3K6LS6Y.js";import{b as ee}from"./chunk-M2NVJH4O.js";import{b as Z}from"./chunk-Q3GSZX6T.js";import{e as z,i as H,v as W,w as K,x as J}from"./chunk-AUZY6O5Y.js";import{b as X}from"./chunk-P2TS72RO.js";import{a as Y}from"./chunk-IWJALEKK.js";import"./chunk-MPC7SZEK.js";import{a as q}from"./chunk-G3MWZKLR.js";import{k as I,m as j}from"./chunk-2UJ2GV6T.js";import{h as $,i as O,l as G}from"./chunk-GBIZ2ZL5.js";import{$a as B,Cb as V,Cc as Q,Da as o,Db as N,Gb as l,Hb as E,Ib as x,Jb as M,Lb as P,Mb as A,Na as D,Nb as L,_,ab as F,ac as U,bb as u,cb as p,da as g,ea as h,fb as w,gb as R,hb as C,ia as T,ib as i,jb as n,kb as s,ma as b,o as k,rb as S,sb as v,ub as c}from"./chunk-DWRMJDZW.js";import"./chunk-LJ5XHLMQ.js";import{h as y}from"./chunk-FK42CRUA.js";var ne=(a,t)=>t.userId;function le(a,t){a&1&&(i(0,"div",27)(1,"div",28)(2,"label",29),s(3,"i",30),l(4," Evento "),i(5,"span",31),l(6,"*"),n()(),i(7,"div",32)(8,"span",33),s(9,"span",34),n(),i(10,"div",35),s(11,"span",36),n()()(),i(12,"div",28)(13,"label",29),s(14,"i",37),l(15," Rol de Participante "),i(16,"span",31),l(17,"*"),n()(),i(18,"div",32)(19,"span",33),s(20,"span",34),n(),i(21,"div",35),s(22,"span",38),n()()()(),i(23,"div",39)(24,"div",40)(25,"span",41),l(26,"Cargando..."),n()(),i(27,"span",42),l(28,"Cargando eventos y roles..."),n()())}function re(a,t){if(a&1&&(i(0,"small",46),s(1,"i",52),l(2),n()),a&2){let e=c(2);o(2),x(" Evento seleccionado: ",e.displayEvent(e.selectedEvent())," ")}}function ae(a,t){a&1&&(i(0,"div",47),s(1,"i",53),l(2,"Debe seleccionar un evento "),n())}function oe(a,t){a&1&&(i(0,"div",47),s(1,"i",53),l(2,"Debe seleccionar un rol "),n())}function se(a,t){if(a&1&&(i(0,"span",63),s(1,"i",65),l(2),n()),a&2){let e,r=c(3);o(2),x(" S/. ",(e=r.selectedEvent())==null?null:e.cost," ")}}function de(a,t){a&1&&(i(0,"span",64),s(1,"i",66),l(2," Gratuito "),n())}function ce(a,t){if(a&1&&(i(0,"div",51)(1,"div",54)(2,"div",55)(3,"h6",56),s(4,"i",57),l(5),n(),i(6,"div",58)(7,"span",59),s(8,"i",60),l(9),n(),i(10,"span",59),s(11,"i",61),l(12),n()()(),i(13,"div",62),u(14,se,3,1,"span",63)(15,de,3,0,"span",64),n()()()),a&2){let e,r,d,m,f=c(2);o(5),x("",(e=f.selectedEvent())==null?null:e.title," "),o(4),M(" ",(r=f.selectedEvent())!=null&&r.startDate?f.formatEventDate(f.selectedEvent().startDate):"Sin fecha"," - ",(r=f.selectedEvent())!=null&&r.endDate?f.formatEventDate(f.selectedEvent().endDate):"Sin fecha"," "),o(3),x(" Costo: ",((d=f.selectedEvent())==null?null:d.cost)||"Gratuito"," "),o(2),p((m=f.selectedEvent())!=null&&m.cost?14:15)}}function me(a,t){if(a&1){let e=S();i(0,"div",27)(1,"div",28)(2,"label",43),s(3,"i",30),l(4," Evento "),i(5,"span",31),l(6,"*"),n()(),i(7,"div",32)(8,"span",33),s(9,"i",44),n(),i(10,"app-autocomplete",45),v("optionSelected",function(d){g(e);let m=c();return h(m.onEventSelected(d))}),n()(),u(11,re,3,1,"small",46),u(12,ae,3,0,"div",47),n(),i(13,"div",28)(14,"label",48),s(15,"i",37),l(16," Rol de Participante "),i(17,"span",31),l(18,"*"),n()(),i(19,"div",32)(20,"span",33),s(21,"i",49),n(),i(22,"app-autocomplete",50),v("optionSelected",function(d){g(e);let m=c();return h(m.onRoleSelected(d))}),n()(),u(23,oe,3,0,"div",47),n()(),u(24,ce,16,5,"div",51)}if(a&2){let e=c();o(10),C("options",e.availableEvents())("displayFn",e.displayEvent)("required",!0)("minChars",0)("highlightSearch",!0)("inInputGroup",!0),o(),p(e.selectedEvent()?11:-1),o(),p(e.selectedEvent()?-1:12),o(10),C("options",e.availableRoles())("displayFn",e.displayRole)("required",!0)("minChars",0)("highlightSearch",!0)("inInputGroup",!0),o(),p(!e.selectedRoleId&&e.availableRoles().length>0?23:-1),o(),p(e.selectedEvent()?24:-1)}}function ue(a,t){a&1&&(s(0,"span",90),i(1,"span",13),l(2,"Matriculando..."),n())}function pe(a,t){if(a&1&&(s(0,"i",91),i(1,"span",13),l(2),n()),a&2){let e=c(3);o(2),x("Matricular (",e.checkedUsers().length,")")}}function be(a,t){if(a&1){let e=S();i(0,"button",89),v("click",function(){g(e);let d=c(2);return h(d.matriculateUsers())}),u(1,ue,3,0)(2,pe,3,1),n()}if(a&2){let e=c(2);C("disabled",e.matriculating()),o(),p(e.matriculating()?1:2)}}function ge(a,t){a&1&&(i(0,"div",87)(1,"div",92),s(2,"i",93),n(),i(3,"h6",94),l(4,"No hay usuarios en la lista"),n(),i(5,"p",95),l(6,"Use el buscador para agregar usuarios a matricular"),n()())}function he(a,t){if(a&1&&(i(0,"small",120),s(1,"i",132),l(2),n()),a&2){let e=c().$implicit;o(2),x("",e.phone," ")}}function ve(a,t){a&1&&(i(0,"span",127),s(1,"i",133),i(2,"span",6),l(3,"Registrado"),n()())}function xe(a,t){a&1&&(i(0,"span",128),s(1,"i",134),i(2,"span",6),l(3,"Seleccionado"),n()())}function fe(a,t){a&1&&(i(0,"span",129)(1,"span",6),l(2,"Elegible"),n(),i(3,"span",135),l(4,"OK"),n()())}function _e(a,t){if(a&1){let e=S();i(0,"tr")(1,"td",111)(2,"div",101)(3,"input",112),v("change",function(){let d=g(e).$implicit,m=c(3);return h(m.toggleUserCheck(d.id))}),n(),i(4,"label",113),l(5," Seleccionar usuario "),n()()(),i(6,"td",111)(7,"div",114)(8,"div",115)(9,"span",116),l(10),n()(),i(11,"div",117)(12,"div",118),l(13),n(),i(14,"div",119),l(15),n(),u(16,he,3,1,"small",120),n()()(),i(17,"td",121)(18,"div",122),l(19),n()(),i(20,"td",123)(21,"span",124),l(22),n()(),i(23,"td",125)(24,"div",122),l(25),n()(),i(26,"td",126),u(27,ve,4,0,"span",127)(28,xe,4,0,"span",128)(29,fe,5,0,"span",129),n(),i(30,"td",126)(31,"button",130),v("click",function(){let d=g(e).$implicit,m=c(3);return h(m.removeUserFromTable(d.id))}),s(32,"i",131),n()()()}if(a&2){let e=t.$implicit,r=c(3);N("table-success",r.isUserChecked(e.id)&&r.isUserEligible(e.id))("table-warning",!r.isUserEligible(e.id))("opacity-75",!r.isUserEligible(e.id)),o(3),C("id","table-user-"+e.id)("checked",r.isUserChecked(e.id))("disabled",!r.isUserEligible(e.id)),o(),C("for","table-user-"+e.id),o(6),E(r.getUserInitials(e.fullName||e.email)),o(3),E(e.fullName||"Sin nombre"),o(2),E(e.email),o(),p(e.phone?16:-1),o(3),E(e.email),o(3),E(e.documentNumber||"-"),o(3),E(e.institution||"-"),o(2),p(r.isUserEligible(e.id)?r.isUserChecked(e.id)?28:29:27)}}function Ce(a,t){if(a&1){let e=S();i(0,"div",88)(1,"div",96)(2,"table",97)(3,"thead",98)(4,"tr",99)(5,"th",100)(6,"div",101)(7,"input",102),v("change",function(){g(e);let d=c(2);return h(d.toggleAllEligibleUsers())}),n(),i(8,"label",103),l(9," Seleccionar todos "),n()()(),i(10,"th",104),l(11," Usuario "),n(),i(12,"th",105),l(13," Email "),n(),i(14,"th",106),l(15," Documento "),n(),i(16,"th",107),l(17," Instituci\xF3n "),n(),i(18,"th",108),l(19," Estado "),n(),i(20,"th",109),l(21," Acci\xF3n "),n()()(),i(22,"tbody"),w(23,_e,33,18,"tr",110,F().trackByUserId,!0),n()()()()}if(a&2){let e=c(2);o(7),C("checked",e.allEligibleUsersChecked())("indeterminate",e.someEligibleUsersChecked()),o(16),R(e.selectedUsersForTable())}}function Ee(a,t){if(a&1){let e=S();i(0,"div",18)(1,"div",19)(2,"h6",20),s(3,"i",67),l(4," Paso 2: Buscar y Agregar Usuarios "),n()(),i(5,"div",22)(6,"div",68)(7,"div",69)(8,"label",70),s(9,"i",71),l(10," Buscar Usuario "),n(),i(11,"div",32)(12,"span",33),s(13,"i",72),n(),i(14,"app-autocomplete",73),L("ngModelChange",function(d){g(e);let m=c();return A(m.userSearchTerm,d)||(m.userSearchTerm=d),h(d)}),v("valueChange",function(d){g(e);let m=c();return h(m.onUserSelected(d))}),n()()(),i(15,"div",74)(16,"button",75),v("click",function(){g(e);let d=c();return h(d.navigateToUserCreate())}),s(17,"i",76),i(18,"span",77),l(19,"Registrar Nuevo"),n(),i(20,"span",78),l(21,"Nuevo"),n()()()(),i(22,"div",79)(23,"div",80)(24,"div",81)(25,"div",82)(26,"span",83),s(27,"i",84),l(28),n(),i(29,"span",85),s(30,"i",66),l(31),n()(),u(32,be,3,2,"button",86),n()(),u(33,ge,7,0,"div",87)(34,Ce,25,2,"div",88),n()()()}if(a&2){let e=c();o(14),C("searchFn",e.searchUsers)("preloadFn",e.preloadUsers)("displayFn",e.displayUser)("placeholder","Buscar por DNI, email o nombres...")("minChars",e.autocompleteConfig.minCharsRemote)("searchLimit",e.autocompleteConfig.searchLimit)("debounceMs",e.autocompleteConfig.debounceTime)("maxHeight",e.autocompleteConfig.maxHeight)("noResultsMessage","No se encontraron usuarios")("enablePreload",!0),P("ngModel",e.userSearchTerm),C("inputClass","form-control border-start-0 bg-light form-control-sm")("size","")("autocomplete","off")("inInputGroup",!0),o(14),x("",e.selectedUsersForTable().length," usuarios "),o(3),x("",e.checkedUsers().length," seleccionados "),o(),p(e.checkedUsers().length>0?32:-1),o(),p(e.selectedUsersForTable().length===0?33:34)}}function Se(a,t){a&1&&(i(0,"div",23),s(1,"i",136),i(2,"div")(3,"h6",137),l(4,"Complete el Paso 1"),n(),i(5,"p",138),l(6,"Seleccione un evento y rol para continuar con la b\xFAsqueda de usuarios."),n()()())}function ye(a,t){if(a&1){let e=S();i(0,"div",24)(1,"div",139)(2,"div",140)(3,"div",141)(4,"h5",142),s(5,"i",143),l(6," Confirmar Matr\xEDcula "),n(),i(7,"button",144),v("click",function(){g(e);let d=c();return h(d.showMatriculationModal.set(!1))}),n()(),i(8,"div",145)(9,"div",146)(10,"h6",147),l(11,"\xBFEst\xE1 seguro de matricular estos usuarios?"),n(),i(12,"div",148)(13,"div",149),s(14,"i",150),l(15,"Evento: "),n(),i(16,"div",151),l(17),n(),i(18,"div",149),s(19,"i",152),l(20,"Usuarios: "),n(),i(21,"div",153),l(22),n(),i(23,"div",149),s(24,"i",154),l(25,"Rol: "),n(),i(26,"div",153),l(27),n(),i(28,"div",149),s(29,"i",155),l(30,"Estado: "),n(),i(31,"div",153),l(32," Confirmado (matriculaci\xF3n directa) "),n()()(),i(33,"p",156),s(34,"i",57),l(35,' Los usuarios ser\xE1n matriculados directamente en estado "Confirmado". '),n()(),i(36,"div",157)(37,"button",158),v("click",function(){g(e);let d=c();return h(d.showMatriculationModal.set(!1))}),s(38,"i",159),i(39,"span",13),l(40,"Cancelar"),n()(),i(41,"button",160),v("click",function(){g(e);let d=c();return h(d.confirmMatriculation())}),s(42,"i",91),i(43,"span",13),l(44,"Confirmar Matr\xEDcula"),n()()()()()()}if(a&2){let e,r=c();o(17),x(" ",(e=r.selectedEvent())==null?null:e.title," "),o(5),x(" ",r.checkedUsers().length," seleccionados "),o(5),x(" ",r.getSelectedRoleName()," ")}}function ke(a,t){if(a&1&&(i(0,"div",25)(1,"div",161)(2,"div",140)(3,"div",162)(4,"div",163)(5,"div",164)(6,"span",41),l(7,"Procesando..."),n()(),i(8,"h6",165),l(9,"Matriculando Usuarios"),n(),i(10,"small",166),l(11),n()(),i(12,"div",167),s(13,"div",168),n(),i(14,"small",169),l(15),n()()()()()),a&2){let e=c();o(11),M(" Procesando ",e.processedCount()," de ",e.checkedUsers().length," "),o(2),V("width",e.getProgressPercentage(),"%"),B("aria-valuenow",e.getProgressPercentage()),o(2),x("",e.getProgressPercentage().toFixed(0),"% completado")}}function Ue(a,t){if(a&1&&(i(0,"div",173)(1,"div",114),s(2,"i",175),i(3,"div")(4,"h6",176),l(5,"Matr\xEDcula Exitosa"),n(),i(6,"p",177),l(7),n()()()()),a&2){let e=c(2);o(7),x(" ",e.matriculationResults().success.length," usuarios fueron matriculados correctamente ")}}function we(a,t){if(a&1&&(i(0,"div",181)(1,"div",182),s(2,"i",183),i(3,"div")(4,"div",184),l(5),n(),i(6,"div",46),l(7),n()()()()),a&2){let e=t.$implicit;o(5),E(e.user.fullName||e.user.email),o(2),E(e.error)}}function Re(a,t){if(a&1&&(i(0,"div",174)(1,"div",178),s(2,"i",179),i(3,"div")(4,"h6",176),l(5,"Errores Encontrados"),n(),i(6,"p",177),l(7),n()()(),i(8,"div",180),w(9,we,8,2,"div",181,ne),n()()),a&2){let e=c(2);o(7),x(" ",e.matriculationResults().errors.length," usuarios no pudieron ser matriculados "),o(2),R(e.matriculationResults().errors)}}function Me(a,t){if(a&1){let e=S();i(0,"div",26)(1,"div",170)(2,"div",140)(3,"div",141)(4,"h5",171),s(5,"i",172),l(6," Resultados de Matr\xEDcula "),n(),i(7,"button",144),v("click",function(){g(e);let d=c();return h(d.closeResultsModal())}),n()(),i(8,"div",145),u(9,Ue,8,1,"div",173),u(10,Re,11,1,"div",174),n(),i(11,"div",157)(12,"button",160),v("click",function(){g(e);let d=c();return h(d.closeResultsModal())}),s(13,"i",91),i(14,"span",13),l(15,"Continuar"),n()()()()()()}if(a&2){let e=c();o(9),p(e.matriculationResults().success.length>0?9:-1),o(),p(e.matriculationResults().errors.length>0?10:-1)}}var ie=class a{destroyRef=_(T);router=_($);fb=_(W);registrationService=_(ee);eventService=_(Z);userService=_(X);staticDataService=_(Y);authService=_(j);autocompleteConfig=I.autocomplete;loadingState=b("idle");loading=U(()=>this.loadingState()==="loading");error=b(null);matriculating=b(!1);searchingUsers=b(!1);showMatriculationModal=b(!1);showProgressModal=b(!1);showResultsModal=b(!1);processedCount=b(0);availableRoles=b([]);availableEvents=b([]);selectedEventId=null;selectedRoleId=null;selectedEvent=b(null);displayEvent=t=>{if(!t)return"";let e=new Date(t.startDate).toLocaleDateString("es-CO");return`${t.title} (${e})`};onEventSelected(t){this.selectedEvent.set(t),this.selectedEventId=t?.id||null,this.selectedEventId&&this.selectedRoleId&&(this.loadRegisteredUserIds(),this.updateEligibility())}displayRole=t=>t?`${t.name} - ${t.description}`:"";onRoleSelected(t){if(t){let r=this.availableRoles().findIndex(d=>d.name===t.name);this.selectedRoleId=r!==-1?r+1:null,this.onRoleChange()}else this.selectedRoleId=null}userSearchTerm="";searchResults=b([]);userSearchOptions=U(()=>this.searchResults().map(t=>`${t.fullName||"Sin nombre"} - ${t.email} - ${t.documentNumber||"Sin DNI"}`));selectedUsersForTable=b([]);checkedUsers=b([]);registeredUserIds=b([]);matriculationResults=b({success:[],errors:[]});availableSpots=U(()=>1/0);trackByUserId=(t,e)=>e.id;trackByEventId=(t,e)=>e.id;trackByRoleId=(t,e)=>e.name;currentUser=this.authService.currentUser;ngOnInit(){return y(this,null,function*(){this.loadingState.set("loading");try{yield Promise.all([this.loadEvents(),this.loadRoles()])}catch(t){console.error("Error initializing component:",t),this.error.set("Error al cargar datos iniciales")}finally{this.loadingState.set("success")}})}loadEvents(){return y(this,null,function*(){try{let t=yield k(this.eventService.preloadEventsForAutocomplete(100));this.availableEvents.set(t)}catch(t){console.error("Error loading events:",t),this.availableEvents.set([])}})}loadRoles(){return y(this,null,function*(){this.staticDataService.participantRoles$.pipe(q(this.destroyRef)).subscribe(t=>{t&&this.availableRoles.set(Object.values(t))})})}onRoleChange(){this.selectedEventId&&this.selectedRoleId&&(this.loadRegisteredUserIds(),this.updateEligibility())}loadRegisteredUserIds(){return y(this,null,function*(){if(!(!this.selectedEventId||!this.selectedRoleId))try{let t=yield k(this.registrationService.getRegisteredUserIds(this.selectedEventId,this.selectedRoleId));this.registeredUserIds.set(t?.userIds||[])}catch(t){console.error("Error loading registered user IDs:",t),this.registeredUserIds.set([])}})}onUserSearch(){}displayUser=t=>t?`${t.fullName||"Sin nombre"} - ${t.email} - ${t.documentNumber||"Sin DNI"}`:"";searchUsers=(t,e)=>{let r={query:t.trim(),limit:e};return this.userService.queryUsersForAutocomplete(r)};preloadUsers=()=>this.userService.preloadUsersForAutocomplete(15);onUserSelected(t){t&&(this.addUserToTable(this.mapQueryUserToViewModel(t)),this.userSearchTerm="")}onUserAutoCompleteChange(t){let e=t.match(/- (.+?) -/);if(e&&e[1]){let r=e[1].trim(),d=this.searchResults().find(m=>m.email===r);d&&this.addUserToTable(this.mapQueryUserToViewModel(d))}this.userSearchTerm=t}mapQueryUserToViewModel(t){return{id:t.id,email:t.email,fullName:t.fullName,documentNumber:t.documentNumber,phone:void 0,institution:t.institution,role:"participant",isActive:!0,emailVerified:!1,phoneVerified:!1,roleLabel:"Participante",statusLabel:"Activo",statusColor:"success",eventsCount:0,certificatesCount:0,lastActivity:new Date().toISOString(),joinedDate:new Date().toISOString(),profileCompletion:100}}addUserToTable(t){let e=this.selectedUsersForTable();e.find(r=>r.id===t.id)||(this.selectedUsersForTable.set([...e,t]),this.updateEligibility())}addAllUsers(){let t=this.selectedUsersForTable(),e=this.searchResults().map(r=>this.mapQueryUserToViewModel(r)).filter(r=>!t.find(d=>d.id===r.id));this.selectedUsersForTable.set([...t,...e]),this.updateEligibility()}removeUserFromTable(t){this.selectedUsersForTable.update(e=>e.filter(r=>r.id!==t)),this.checkedUsers.update(e=>e.filter(r=>r!==t))}isUserInTable(t){return this.selectedUsersForTable().some(e=>e.id===t)}isUserEligible(t){return!this.registeredUserIds().includes(t)}isUserChecked(t){return this.checkedUsers().includes(t)}toggleUserCheck(t){this.isUserEligible(t)&&(this.isUserChecked(t)?this.checkedUsers.update(e=>e.filter(r=>r!==t)):this.checkedUsers.update(e=>[...e,t]))}toggleAllEligibleUsers(){let t=this.selectedUsersForTable().filter(e=>this.isUserEligible(e.id));if(this.allEligibleUsersChecked())this.checkedUsers.update(e=>e.filter(r=>!t.some(d=>d.id===r)));else{let e=[...this.checkedUsers()];t.forEach(r=>{e.includes(r.id)||e.push(r.id)}),this.checkedUsers.set(e)}}allEligibleUsersChecked(){let t=this.selectedUsersForTable().filter(e=>this.isUserEligible(e.id));return t.length>0&&t.every(e=>this.isUserChecked(e.id))}someEligibleUsersChecked(){return this.selectedUsersForTable().filter(e=>this.isUserEligible(e.id)).some(e=>this.isUserChecked(e.id))&&!this.allEligibleUsersChecked()}updateEligibility(){this.checkedUsers.update(t=>t.filter(e=>this.isUserEligible(e)))}matriculateUsers(){this.checkedUsers().length!==0&&this.showMatriculationModal.set(!0)}confirmMatriculation(){return y(this,null,function*(){this.showMatriculationModal.set(!1),this.showProgressModal.set(!0),this.matriculating.set(!0),this.processedCount.set(0);let t={success:[],errors:[]},e=this.selectedUsersForTable().filter(r=>this.checkedUsers().includes(r.id));try{for(let r of e)try{let d={userId:r.id,eventId:this.selectedEventId,participantRoleId:this.selectedRoleId,initialState:I.registrationStateDefault.registrationBulk,notes:"Matr\xEDcula masiva - Estado directo: Confirmado"},m=yield k(this.registrationService.createRegistration(d));m&&t.success.push(m)}catch(d){t.errors.push({userId:r.id,error:d instanceof Error?d.message:"Error desconocido",user:r})}finally{this.processedCount.update(d=>d+1)}this.matriculationResults.set(t),yield this.loadRegisteredUserIds(),this.updateEligibility()}catch(r){console.error("Error in matriculation:",r)}finally{this.showProgressModal.set(!1),this.matriculating.set(!1),this.showResultsModal.set(!0)}})}closeResultsModal(){this.showResultsModal.set(!1);let t=this.matriculationResults().success.map(e=>e.userId);this.selectedUsersForTable.update(e=>e.filter(r=>!t.includes(r.id))),this.checkedUsers.update(e=>e.filter(r=>!t.includes(r)))}navigateToUserCreate(){this.router.navigate(["/usuarios/nuevo"])}getSelectedRoleName(){return this.availableRoles()[this.selectedRoleId-1]?.name||"Rol desconocido"}Math=Math;formatEventDate(t){try{return new Date(t).toLocaleDateString("es-CO",{year:"numeric",month:"long",day:"numeric"})}catch{return t}}getUserInitials(t){return t?t.split(" ").slice(0,2).map(e=>e.charAt(0)).join("").toUpperCase():"??"}getProgressPercentage(){return this.checkedUsers().length===0?0:Math.round(this.processedCount()/this.checkedUsers().length*100)}goBack(){this.router.navigate(["/inscripciones"])}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=D({type:a,selectors:[["app-registration-bulk-create"]],decls:40,vars:5,consts:[[1,"container-fluid","py-3"],["aria-label","breadcrumb",1,"mb-3"],[1,"breadcrumb","mb-0","small"],[1,"breadcrumb-item"],["routerLink","/",1,"text-decoration-none","link-primary"],[1,"bi","bi-house-door","me-1"],[1,"d-none","d-sm-inline"],["routerLink","/inscripciones",1,"text-decoration-none","link-primary"],["aria-current","page",1,"breadcrumb-item","active"],[1,"d-flex","flex-column","flex-sm-row","align-items-start","align-items-sm-center","justify-content-between","gap-2","mb-3"],[1,"order-1","order-sm-0"],[1,"h6","mb-1","fw-normal","d-flex","align-items-center"],[1,"bi","bi-people-fill","me-2","text-primary"],[1,"small"],[1,"text-muted","small","mb-0","d-none","d-sm-block"],[1,"d-flex","flex-wrap","gap-1","order-0","order-sm-1"],["type","button","title","Volver a la lista",1,"btn","btn-outline-secondary","btn-sm","d-flex","align-items-center","px-2",3,"click"],[1,"bi","bi-arrow-left","me-1"],[1,"card","border-0","shadow-sm","mb-3"],[1,"card-header","bg-light","border-bottom","py-2"],[1,"card-title","mb-0","fw-normal","small","d-flex","align-items-center"],[1,"bi","bi-1-circle-fill","me-2","text-primary"],[1,"card-body","py-3"],[1,"alert","alert-warning","py-2","d-flex","align-items-center","gap-2"],["tabindex","-1","aria-labelledby","matriculationModalTitle",1,"modal","d-block",2,"background-color","rgba(0,0,0,0.5)"],["tabindex","-1","aria-labelledby","progressModalTitle",1,"modal","d-block",2,"background-color","rgba(0,0,0,0.7)"],["tabindex","-1","aria-labelledby","resultsModalTitle",1,"modal","d-block",2,"background-color","rgba(0,0,0,0.5)"],[1,"row","g-2"],[1,"col-12","col-md-6"],[1,"form-label","fw-normal","small","mb-1"],[1,"bi","bi-calendar-event","text-primary","me-1"],[1,"text-danger"],[1,"input-group","input-group-sm"],[1,"input-group-text","bg-light","border-end-0"],[1,"placeholder","bg-secondary","rounded",2,"width","14px","height","14px"],[1,"form-control","border-start-0","bg-light","form-control-sm"],[1,"placeholder","col-8"],[1,"bi","bi-person-badge","text-success","me-1"],[1,"placeholder","col-6"],[1,"text-center","mt-3"],["role","status",1,"spinner-border","text-primary","me-2",2,"width","1.25rem","height","1.25rem"],[1,"visually-hidden"],[1,"text-muted","fs-7"],["for","eventAutoComplete",1,"form-label","fw-normal","small","mb-1"],[1,"bi","bi-search","text-muted"],["id","eventAutoComplete","placeholder","Buscar evento o hacer click para ver todos...","inputClass","form-control border-start-0 bg-light form-control-sm",3,"optionSelected","options","displayFn","required","minChars","highlightSearch","inInputGroup"],[1,"text-muted","fs-8"],[1,"text-danger","fs-8","mt-1"],["for","roleAutoComplete",1,"form-label","fw-normal","small","mb-1"],[1,"bi","bi-people","text-muted"],["id","roleAutoComplete","placeholder","Buscar rol o hacer click para ver todos...","inputClass","form-control border-start-0 bg-light form-control-sm",3,"optionSelected","options","displayFn","required","minChars","highlightSearch","inInputGroup"],[1,"alert","alert-info","mt-3","py-2"],[1,"bi","bi-check-circle","text-success","me-1"],[1,"bi","bi-exclamation-circle","me-1"],[1,"d-flex","flex-column","flex-md-row","align-items-start","align-items-md-center","gap-2"],[1,"flex-grow-1"],[1,"alert-heading","mb-1","fw-medium","small","d-flex","align-items-center"],[1,"bi","bi-info-circle","me-1"],[1,"d-flex","flex-wrap","gap-2","fs-8"],[1,"d-flex","align-items-center"],[1,"bi","bi-calendar-range","me-1","text-primary","fs-7"],[1,"bi","bi-people","me-1","text-success","fs-7"],[1,"text-md-end"],[1,"badge","text-bg-warning","small"],[1,"badge","text-bg-success","small"],[1,"bi","bi-cash","me-1"],[1,"bi","bi-check-circle","me-1"],[1,"bi","bi-2-circle-fill","me-2","text-success"],[1,"row","g-2","mb-3"],[1,"col-12","col-lg-8"],["for","userAutoComplete",1,"form-label","fw-normal","small","mb-1"],[1,"bi","bi-search","text-info","me-1"],[1,"bi","bi-person-search","text-muted"],["id","userAutoComplete",3,"ngModelChange","valueChange","searchFn","preloadFn","displayFn","placeholder","minChars","searchLimit","debounceMs","maxHeight","noResultsMessage","enablePreload","ngModel","inputClass","size","autocomplete","inInputGroup"],[1,"col-12","col-lg-4","d-flex","flex-wrap","gap-1","align-items-end"],["type","button","title","Registrar nuevo usuario",1,"btn","btn-success","btn-sm","px-2",3,"click"],[1,"bi","bi-person-plus","me-1"],[1,"d-none","d-sm-inline","small"],[1,"d-inline","d-sm-none","small"],[1,"card","border"],[1,"card-header","bg-light","py-2"],[1,"d-flex","flex-column","flex-lg-row","align-items-start","align-items-lg-center","justify-content-between","gap-2"],[1,"d-flex","flex-wrap","align-items-center","gap-1"],[1,"badge","text-bg-secondary","small"],[1,"bi","bi-people","me-1"],[1,"badge","text-bg-primary","small"],["type","button","title","Matricular usuarios seleccionados",1,"btn","btn-primary","btn-sm","px-2",3,"disabled"],[1,"card-body","text-center","py-4"],[1,"card-body","py-0"],["type","button","title","Matricular usuarios seleccionados",1,"btn","btn-primary","btn-sm","px-2",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"],[1,"bi","bi-check-lg","me-1"],[1,"text-muted","mb-3"],[1,"bi","bi-people","opacity-25",2,"font-size","3rem"],[1,"text-muted","mb-2"],[1,"text-muted","small","mb-0"],[1,"table-responsive"],[1,"table","table-sm","table-hover","align-middle","mb-0"],[1,"sticky-top","bg-white"],[1,"table-light"],["scope","col",1,"border-0","p-2",2,"width","40px"],[1,"form-check","m-0"],["type","checkbox","id","selectAllUsers","title","Seleccionar todos los elegibles","aria-label","Seleccionar todos los usuarios",1,"form-check-input","form-check-input-sm",3,"change","checked","indeterminate"],["for","selectAllUsers",1,"form-check-label","visually-hidden"],["scope","col",1,"border-0","p-2","fw-semibold","fs-7",2,"min-width","180px"],["scope","col",1,"border-0","p-2","fw-semibold","fs-7","d-none","d-md-table-cell",2,"min-width","200px"],["scope","col",1,"border-0","p-2","fw-semibold","fs-7","d-none","d-lg-table-cell",2,"min-width","120px"],["scope","col",1,"border-0","p-2","fw-semibold","fs-7","d-none","d-xl-table-cell",2,"min-width","150px"],["scope","col",1,"border-0","p-2","fw-semibold","fs-7","text-center",2,"min-width","80px"],["scope","col",1,"border-0","p-2","fw-semibold","fs-7","text-center",2,"width","80px"],[3,"table-success","table-warning","opacity-75"],[1,"border-0","p-2"],["type","checkbox",1,"form-check-input","form-check-input-sm",3,"change","id","checked","disabled"],[1,"form-check-label","visually-hidden",3,"for"],[1,"d-flex","align-items-center","gap-2"],[1,"text-bg-primary","rounded-circle","d-flex","align-items-center","justify-content-center","flex-shrink-0",2,"width","28px","height","28px"],[1,"fw-semibold","fs-8"],[1,"overflow-hidden"],[1,"fw-medium","text-truncate","fs-7"],[1,"text-muted","fs-8","d-md-none","text-truncate"],[1,"text-muted","d-none","d-lg-block","fs-8"],[1,"border-0","p-2","d-none","d-md-table-cell"],[1,"text-truncate","fs-7"],[1,"border-0","p-2","d-none","d-lg-table-cell"],[1,"fs-7"],[1,"border-0","p-2","d-none","d-xl-table-cell"],[1,"border-0","p-2","text-center"],[1,"badge","text-bg-warning","fs-8"],[1,"badge","text-bg-success","fs-8"],[1,"badge","text-bg-light","fs-8"],["type","button","title","Quitar de la lista",1,"btn","btn-outline-danger","btn-sm","px-2",3,"click"],[1,"bi","bi-trash","fs-7"],[1,"bi","bi-telephone","me-1"],[1,"bi","bi-exclamation-triangle","me-1"],[1,"bi","bi-check","me-1"],[1,"d-inline","d-sm-none"],[1,"bi","bi-exclamation-triangle-fill","text-warning","fs-7","flex-shrink-0"],[1,"mb-1","fw-normal","small"],[1,"mb-0","fs-7"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","border-0","shadow"],[1,"modal-header","py-2","border-bottom"],["id","matriculationModalTitle",1,"modal-title","fw-normal","d-flex","align-items-center","small"],[1,"bi","bi-exclamation-triangle-fill","text-warning","me-2"],["type","button","aria-label","Cerrar modal",1,"btn-close","btn-close-sm",3,"click"],[1,"modal-body","py-3"],[1,"alert","alert-info","py-2","mb-3"],[1,"fw-normal","mb-2","small"],[1,"row","g-2","small"],[1,"col-5","fw-medium","fs-8"],[1,"bi","bi-calendar-event","me-1","text-primary"],[1,"col-7","text-truncate","fs-8"],[1,"bi","bi-people","me-1","text-success"],[1,"col-7","fs-8"],[1,"bi","bi-person-badge","me-1","text-info"],[1,"bi","bi-check-circle","me-1","text-success"],[1,"text-muted","mb-0","fs-8","fst-italic"],[1,"modal-footer","py-2","border-top"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-x-lg","me-1"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"modal-dialog","modal-sm","modal-dialog-centered"],[1,"modal-body","text-center","py-3"],[1,"mb-3"],["role","status",1,"spinner-border","text-primary","mb-2",2,"width","2.5rem","height","2.5rem"],["id","progressModalTitle",1,"fw-normal","mb-1","small"],[1,"text-muted","d-block","mb-2","fs-8"],[1,"progress",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated"],[1,"text-muted","mt-2","d-block","fs-8"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],["id","resultsModalTitle",1,"modal-title","fw-normal","d-flex","align-items-center","small"],[1,"bi","bi-check-circle-fill","text-success","me-2"],[1,"alert","alert-success","py-2","mb-3"],[1,"alert","alert-danger","py-2","mb-0"],[1,"bi","bi-check-circle-fill","text-success","fs-7","flex-shrink-0"],[1,"mb-1","fw-semibold","small"],[1,"mb-0","fs-8"],[1,"d-flex","align-items-center","gap-2","mb-2"],[1,"bi","bi-exclamation-triangle-fill","text-danger","fs-7","flex-shrink-0"],[1,"list-group","list-group-flush","small"],[1,"list-group-item","py-2","px-0","border-0","text-danger"],[1,"d-flex","align-items-start","gap-2"],[1,"bi","bi-x-circle","flex-shrink-0","mt-1","fs-7"],[1,"fw-medium","fs-8"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),s(5,"i",5),i(6,"span",6),l(7,"Inicio"),n()()(),i(8,"li",3)(9,"a",7)(10,"span",6),l(11,"Inscripciones"),n()()(),i(12,"li",8),l(13,"Matr\xEDcula Masiva"),n()()(),i(14,"div",9)(15,"div",10)(16,"h1",11),s(17,"i",12),i(18,"span",13),l(19,"Matr\xEDcula Masiva"),n()(),i(20,"p",14),l(21,"Inscribir m\xFAltiples usuarios a un evento"),n()(),i(22,"div",15)(23,"button",16),v("click",function(){return r.goBack()}),s(24,"i",17),i(25,"span",13),l(26,"Volver"),n()()()(),i(27,"div",18)(28,"div",19)(29,"h6",20),s(30,"i",21),l(31," Paso 1: Seleccionar Evento y Rol "),n()(),i(32,"div",22),u(33,le,29,0)(34,me,25,16),n()(),u(35,Ee,35,19,"div",18)(36,Se,7,0,"div",23),n(),u(37,ye,45,3,"div",24),u(38,ke,16,6,"div",25),u(39,Me,16,2,"div",26)),e&2&&(o(33),p(r.loading()?33:34),o(2),p(r.selectedEvent()&&r.selectedRoleId?35:36),o(2),p(r.showMatriculationModal()?37:-1),o(),p(r.showProgressModal()?38:-1),o(),p(r.showResultsModal()?39:-1))},dependencies:[Q,G,O,J,z,K,H,te],encapsulation:2,changeDetection:0})};export{ie as RegistrationBulkCreateComponent};
