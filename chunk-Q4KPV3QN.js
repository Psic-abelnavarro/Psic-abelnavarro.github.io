import{a as pe}from"./chunk-3UQ6E4NA.js";import"./chunk-VF5TSERA.js";import"./chunk-YUNYRAF7.js";import"./chunk-FK6H3RFT.js";import{b as me}from"./chunk-TO7S5C7C.js";import{a as se}from"./chunk-PU57OF2V.js";import{a as de}from"./chunk-JJ6L3UIW.js";import{a as I}from"./chunk-IYGYDPGO.js";import{c as J,e as W,f as Y,h as Z,k as ee,l as te,m as ie,n as ne,o as ae,s as re,t as oe,u as le}from"./chunk-GFCFUV6K.js";import{a as ce}from"./chunk-MXHSEERB.js";import{e as Q,j as L}from"./chunk-CF2QCA26.js";import{h as H,i as q,l as U}from"./chunk-NUA5R5QO.js";import{$a as O,$b as h,Ab as $,Ac as K,Cb as E,D as R,Da as o,Eb as y,Fb as c,Gb as _,H as P,Hb as S,Ib as j,Na as N,Ub as V,Wb as T,_ as w,ab as M,bb as C,cb as g,da as p,ea as u,eb as k,fb as F,fc as G,gb as b,hb as a,ia as A,ib as i,jb as d,ma as x,qb as v,rb as f,tb as s,xc as X,yb as z,zb as B}from"./chunk-6O7NOF42.js";import"./chunk-LJ5XHLMQ.js";import{h as D}from"./chunk-FK42CRUA.js";var Ce=["confirmModal"],ge=(r,t)=>t.value;function be(r,t){if(r&1&&(a(0,"span",12),c(1),i()),r&2){let e=s();o(),_(e.totalItems())}}function _e(r,t){r&1&&d(0,"span",20)}function ve(r,t){r&1&&d(0,"i",21)}function xe(r,t){if(r&1){let e=v();a(0,"li")(1,"button",55),f("click",function(){p(e);let l=s(2);return u(l.exportSelectedToCSV())}),d(2,"i",57),c(3),i()()}if(r&2){let e=s(2);o(3),S(" Exportar seleccionados (",e.selectedCertificates().length,") ")}}function he(r,t){if(r&1){let e=v();a(0,"div",25)(1,"button",52),d(2,"i",53),i(),a(3,"ul",54)(4,"li")(5,"button",55),f("click",function(){p(e);let l=s();return u(l.exportToCSV())}),d(6,"i",56),c(7," Exportar todos "),i()(),C(8,xe,4,1,"li"),i()()}if(r&2){let e=s();o(8),g(e.selectedCertificates().length>0?8:-1)}}function Se(r,t){if(r&1&&(a(0,"span",32),c(1),i()),r&2){let e=s();o(),_(e.activeFiltersCount())}}function we(r,t){if(r&1){let e=v();a(0,"button",58),f("click",function(){p(e);let l=s();return u(l.clearAllFilters())}),d(1,"i",59),i()}}function ye(r,t){if(r&1){let e=v();a(0,"button",74),f("click",function(){p(e),s();let l=$(8);return s().clearSearch(),u(l.focus())}),d(1,"i",75),i()}}function Ee(r,t){if(r&1&&(a(0,"option",70),c(1),i()),r&2){let e=t.$implicit;b("value",e.value),o(),_(e.label)}}function Ve(r,t){if(r&1&&(a(0,"option",70),c(1),i()),r&2){let e=t.$implicit;b("value",e.id),o(),_(e.name)}}function Te(r,t){if(r&1&&(a(0,"div",35)(1,"form",60)(2,"div",61)(3,"div",62)(4,"div",63)(5,"span",64),d(6,"i",65),i(),d(7,"input",66,1),C(9,ye,2,0,"button",67),i()(),a(10,"div",68)(11,"select",69)(12,"option",70),c(13,"Estado"),i(),k(14,Ee,2,2,"option",70,ge),i()(),a(16,"div",68)(17,"select",71)(18,"option",70),c(19,"Plantilla"),i(),k(20,Ve,2,2,"option",70,M().trackByTemplateId,!0),i()(),a(22,"div",68),d(23,"input",72),i(),a(24,"div",68),d(25,"input",73),i()()()()),r&2){let e,n=s();o(),b("formGroup",n.filtersForm),o(8),g((e=n.filtersForm.get("searchText"))!=null&&e.value?9:-1),o(3),b("value",null),o(2),F(n.statusOptions()),o(4),b("value",null),o(2),F(n.templates())}}function ke(r,t){if(r&1&&(a(0,"span",38),c(1),i()),r&2){let e=s();o(),_(e.totalItems())}}function Fe(r,t){if(r&1&&(a(0,"span",39),c(1),i()),r&2){let e=s();o(),S("",e.selectedCertificates().length," seleccionados")}}function Ie(r,t){r&1&&(a(0,"div",49)(1,"div",76)(2,"div",77)(3,"span",78),c(4,"Cargando..."),i()(),a(5,"p",79),c(6,"Cargando certificados..."),i()()())}function De(r,t){if(r&1){let e=v();a(0,"div")(1,"h6",82),c(2,"No se encontraron certificados"),i(),a(3,"p",83),c(4," No hay certificados que coincidan con los filtros aplicados. "),i(),a(5,"div",84)(6,"button",85),f("click",function(){p(e);let l=s(2);return u(l.clearAllFilters())}),d(7,"i",30),c(8,"Limpiar filtros "),i(),a(9,"button",86),f("click",function(){p(e);let l=s(2);return u(l.refreshData())}),d(10,"i",87),c(11,"Actualizar "),i()()()}}function Me(r,t){r&1&&(a(0,"div")(1,"h6",82),c(2,"No hay certificados"),i(),a(3,"p",83),c(4," A\xFAn no se han generado certificados."),d(5,"br"),c(6," Comienza creando los primeros certificados. "),i(),a(7,"a",88),d(8,"i",23),c(9,"Generar Certificados "),i()())}function Le(r,t){if(r&1&&(a(0,"div",50)(1,"div",80),d(2,"i",81),i(),C(3,De,12,0,"div")(4,Me,10,0,"div"),i()),r&2){let e=s();o(3),g(e.hasActiveFilters()?3:4)}}function Re(r,t){if(r&1){let e=v();a(0,"button",119),f("click",function(){p(e);let l=s().$implicit,m=s(3);return u(m.confirmRegenerateCertificate(l))}),d(1,"i",120),i()}}function Pe(r,t){if(r&1){let e=v();a(0,"button",121),f("click",function(){p(e);let l=s().$implicit,m=s(3);return u(m.confirmRevokeCertificate(l))}),d(1,"i",59),i()}if(r&2){let e=s(4);b("disabled",e.loading())}}function Ae(r,t){if(r&1){let e=v();a(0,"div",92)(1,"div",93)(2,"div",94)(3,"div",95)(4,"input",96),f("change",function(){let l=p(e).$implicit,m=s(3);return u(m.toggleSelection(l.id))}),i()(),a(5,"span",97),d(6,"i",98),i()(),a(7,"div",35)(8,"div",99)(9,"div",100),d(10,"i",101),i(),a(11,"div",102)(12,"div",103),c(13),i(),a(14,"div",104),c(15),i()()(),a(16,"div",105)(17,"div",106),d(18,"i",107),a(19,"span",108),c(20),i()(),a(21,"div",109)(22,"span"),c(23),V(24,"date"),i(),a(25,"span",110),c(26),i()()(),a(27,"div",111)(28,"div")(29,"div",112),c(30),i(),a(31,"div",113),c(32,"Descargas"),i()(),a(33,"div")(34,"div",112),c(35),i(),a(36,"div",113),c(37,"Verificaciones"),i()(),a(38,"div")(39,"div",112),c(40),i(),a(41,"div",113),c(42,"Emitido"),i()()()(),a(43,"div",114)(44,"div",115)(45,"button",116),f("click",function(){let l=p(e).$implicit,m=s(3);return u(m.confirmDownloadCertificate(l))}),d(46,"i",53),i(),C(47,Re,2,0,"button",117),C(48,Pe,2,1,"button",118),i()()()()}if(r&2){let e=t.$implicit,n=s(3);o(),y(n.getTableRowClass(e.status)),E("border-primary",n.selectedCertificates().includes(e.id))("bg-primary-subtle",n.selectedCertificates().includes(e.id)),o(3),b("id","card-select-"+e.id)("checked",n.selectedCertificates().includes(e.id)),o(),y(n.getStatusBadgeClass(e.status)),o(),y("bi-"+n.getStatusIcon(e.status)),o(7),_(e.participantName),o(2),_(e.participantEmail),o(4),b("title",e.eventTitle),o(),S(" ",e.eventTitle," "),o(3),_(T(24,24,e.eventDate,"dd/MM/yyyy")),o(3),_(e.roleName),o(4),_(e.downloadCount),o(5),_(e.verificationCount),o(5),_(n.formatDate(e.issuedAt)),o(5),b("disabled",!n.canDownload(e)),o(2),g(n.canRegenerate(e)?47:-1),o(),g(n.canRevoke(e)?48:-1)}}function Ne(r,t){if(r&1&&(a(0,"div",89)(1,"div",91),k(2,Ae,49,27,"div",92,M().trackByCertificateId,!0),i()()),r&2){let e=s(2);o(2),F(e.certificates())}}function Oe(r,t){if(r&1){let e=v();a(0,"button",155),f("click",function(){p(e);let l=s().$implicit,m=s(3);return u(m.confirmRegenerateCertificate(l))}),d(1,"i",120),i()}}function ze(r,t){if(r&1){let e=v();a(0,"button",156),f("click",function(){p(e);let l=s().$implicit,m=s(3);return u(m.confirmRevokeCertificate(l))}),d(1,"i",59),i()}if(r&2){let e=s(4);b("disabled",e.loading())}}function Be(r,t){if(r&1){let e=v();a(0,"tr")(1,"td",133)(2,"div",125)(3,"input",96),f("change",function(){let l=p(e).$implicit,m=s(3);return u(m.toggleSelection(l.id))}),i()()(),a(4,"td",133)(5,"div",9)(6,"div",134),d(7,"i",101),i(),a(8,"div",8)(9,"div",103),c(10),i(),a(11,"div",135),c(12),i(),a(13,"div",40),c(14),V(15,"date"),i()()()(),a(16,"td",136)(17,"div",8)(18,"div",137),c(19),i(),a(20,"div",138),c(21),V(22,"date"),i()()(),a(23,"td",139)(24,"span",140),c(25),i()(),a(26,"td",133)(27,"span",97),d(28,"i",98),a(29,"span",141),c(30),i()()(),a(31,"td",142)(32,"div",143)(33,"span",144),d(34,"i",145),c(35),i(),a(36,"span",144),d(37,"i",146),c(38),i()()(),a(39,"td",142)(40,"div",147)(41,"div",148),c(42),V(43,"date"),i(),a(44,"div",149),c(45),V(46,"date"),i()()(),a(47,"td",150)(48,"div",151)(49,"button",152),f("click",function(){let l=p(e).$implicit,m=s(3);return u(m.confirmDownloadCertificate(l))}),d(50,"i",53),i(),C(51,Oe,2,0,"button",153),C(52,ze,2,1,"button",154),i()()()}if(r&2){let e=t.$implicit,n=s(3);y(n.getTableRowClass(e.status)),E("table-active",n.selectedCertificates().includes(e.id)),o(3),b("id","select-"+e.id)("checked",n.selectedCertificates().includes(e.id)),o(7),_(e.participantName),o(2),_(e.eventTitle),o(2),_(T(15,25,e.eventDate,"dd/MM/yyyy")),o(4),b("title",e.eventTitle),o(),S(" ",e.eventTitle," "),o(2),_(T(22,28,e.eventDate,"dd/MM/yyyy")),o(4),S(" ",e.roleName," "),o(2),y(n.getStatusBadgeClass(e.status)),o(),y("bi-"+n.getStatusIcon(e.status)),o(2),_(n.getStatusLabel(e.status)),o(5),S("",e.downloadCount," "),o(3),S("",e.verificationCount," "),o(4),_(T(43,31,e.issuedAt,"dd/MM/yyyy")),o(3),_(T(46,34,e.issuedAt,"HH:mm")),o(4),b("disabled",!n.canDownload(e)),o(2),g(n.canRegenerate(e)?51:-1),o(),g(n.canRevoke(e)?52:-1)}}function $e(r,t){if(r&1){let e=v();a(0,"div",90)(1,"table",122)(2,"thead",123)(3,"tr")(4,"th",124)(5,"div",125)(6,"input",126),f("change",function(){p(e);let l=s(2);return u(l.toggleSelectAll())}),i()()(),a(7,"th",127),c(8,"Participante"),i(),a(9,"th",128),c(10,"Evento"),i(),a(11,"th",129),c(12,"Rol"),i(),a(13,"th",127),c(14,"Estado"),i(),a(15,"th",130),c(16,"Estad\xEDsticas"),i(),a(17,"th",130),c(18,"Fecha"),i(),a(19,"th",131),c(20,"Acciones"),i()()(),a(21,"tbody"),k(22,Be,53,37,"tr",132,M().trackByCertificateId,!0),i()()()}if(r&2){let e=s(2);o(6),b("checked",e.areAllSelected())("indeterminate",e.areSomeSelected()),o(16),F(e.certificates())}}function je(r,t){if(r&1&&(C(0,Ne,4,0,"div",89),C(1,$e,24,2,"div",90)),r&2){let e=s();g(e.viewMode()==="cards"?0:-1),o(),g(e.viewMode()==="table"?1:-1)}}function Ge(r,t){if(r&1){let e=v();a(0,"div",51)(1,"app-pagination",157),f("pageChange",function(l){p(e);let m=s();return u(m.goToPage(l))})("pageSizeChange",function(l){p(e);let m=s();return u(m.onPageSizeChange(l))}),i()()}if(r&2){let e=s();o(),b("totalItems",e.totalItems())("pageSize",e.pageSize())("currentPage",e.currentPage())("showPageSizeSelector",!0)("pageSizeOptions",e.pageSizeOptions)("showGoToPage",!1)("showRangeInfo",!0)("showFirstLastButtons",!1)("maxVisiblePages",5)("density","compact")}}var ue=class r{fb=w(re);router=w(H);destroyRef=w(A);certificateService=w(me);staticDataService=w(ce);CertificateGeneratorService=w(pe);confirmModal=G("confirmModal");pageSizeOptions=L.pagination.pageSizeOptions;loadingState=x("idle");loading=h(()=>this.loadingState()==="loading");error=x(null);showFilters=x(!0);viewMode=x("cards");currentPage=x(1);pageSize=x(L.pagination.defaultPageSize);totalItems=x(0);totalPages=h(()=>Math.ceil(this.totalItems()/this.pageSize()));certificates=x([]);templates=x([]);selectedCertificates=x([]);sortOptions=x({field:"issued_at",direction:"desc"});filtersForm=this.fb.group({searchText:this.fb.control(null),status:this.fb.control(null),templateId:this.fb.control(null),issuedFrom:this.fb.control(null),issuedTo:this.fb.control(null)});CertificateStatus=Q;confirmAction=x({title:"Confirmar Acci\xF3n",message:"\xBFEst\xE1 seguro?",confirmText:"Confirmar",callback:()=>{}});formFilters=x({searchText:null,status:null,templateId:null,issuedFrom:null,issuedTo:null});statusOptions=h(()=>[{value:"valid",label:"V\xE1lido"},{value:"revoked",label:"Revocado"},{value:"expired",label:"Expirado"}]);statusSelectItems=h(()=>this.statusOptions().map(t=>({id:t.value,label:t.label,badge:{text:t.label,color:this.getStatusBadgeColorForMultiSelect(t.value)},icon:this.getStatusIcon(t.value)})));hasActiveFilters=h(()=>{let t=this.formFilters();return!!(t.searchText?.trim()||t.status||t.templateId||t.issuedFrom||t.issuedTo)});activeFiltersCount=h(()=>{let t=this.formFilters(),e=0;return t.searchText?.trim()&&e++,t.status&&e++,t.templateId&&e++,(t.issuedFrom||t.issuedTo)&&e++,e});areAllSelected=h(()=>{let t=this.certificates(),e=this.selectedCertificates();return t.length>0&&t.every(n=>e.includes(n.id))});areSomeSelected=h(()=>{let t=this.certificates(),e=this.selectedCertificates();return t.some(n=>e.includes(n.id))&&!this.areAllSelected()});trackByCertificateId=(t,e)=>e.id;trackByTemplateId=(t,e)=>e.id;trackByStatusId=(t,e)=>e.id;Math=Math;ngOnInit(){this.formFilters.set(this.filtersForm.value),this.loadInitialData(),this.setupSubscriptions(),this.loadViewMode()}loadInitialData(){this.templates.set([{id:1,name:"Plantilla Est\xE1ndar",description:"Plantilla por defecto"},{id:2,name:"Plantilla Premium",description:"Plantilla con dise\xF1o premium"}]),this.loadCertificates()}setupSubscriptions(){this.filtersForm.valueChanges.pipe(R(300),P(),I(this.destroyRef)).subscribe(t=>{this.formFilters.set(t),this.currentPage.set(1),this.loadCertificates()})}loadViewMode(){let t=localStorage.getItem("certificate-view-mode");t&&this.viewMode.set(t)}loadCertificates(){this.loadingState.set("loading"),this.error.set(null);let t=this.buildFilters();this.certificateService.getCertificates(this.currentPage(),this.pageSize(),t,this.sortOptions()).pipe(I(this.destroyRef)).subscribe({next:e=>{this.certificates.set(e.items),this.totalItems.set(e.pagination.totalItems),this.loadingState.set("success")},error:e=>{console.error("Error loading certificates:",e),this.error.set("Error al cargar los certificados"),this.loadingState.set("error")}})}buildFilters(){let t=this.filtersForm.value,e={};return t.searchText?.trim()&&(e.search=t.searchText.trim()),t.status&&(e.status=[t.status]),t.templateId&&(e.templateId=t.templateId),t.issuedFrom&&(e.issuedFrom=t.issuedFrom),t.issuedTo&&(e.issuedTo=t.issuedTo),e}toggleFiltersPanel(){this.showFilters.update(t=>!t)}clearAllFilters(){this.selectedCertificates.set([]),this.currentPage.set(1),this.formFilters.set({searchText:null,status:null,templateId:null,issuedFrom:null,issuedTo:null}),this.filtersForm.reset()}clearSearch(){this.filtersForm.patchValue({searchText:""})}onSortChange(t){let e=t.target,[n,l]=e.value.split("|");this.sortOptions.set({field:n,direction:l}),this.loadCertificates()}onPageSizeChange(t){if(typeof t=="number")this.pageSize.set(t);else{let e=t.target;this.pageSize.set(Number(e.value))}this.currentPage.set(1),this.loadCertificates()}goToPage(t){t>=1&&t<=this.totalPages()&&(this.currentPage.set(t),this.loadCertificates())}onPageChange(t){this.goToPage(t)}setViewMode(t){this.viewMode.set(t),localStorage.setItem("certificate-view-mode",t)}toggleSelection(t){this.selectedCertificates.update(e=>e.indexOf(t)>=0?e.filter(l=>l!==t):[...e,t])}toggleSelectAll(){this.areAllSelected()?this.selectedCertificates.set([]):this.selectedCertificates.set(this.certificates().map(e=>e.id))}isSelected(t){return this.selectedCertificates().includes(t)}getStatusBadgeClass(t){switch(t){case"valid":return"bg-success-subtle text-success-emphasis border border-success-subtle";case"revoked":return"bg-danger-subtle text-danger-emphasis border border-danger-subtle";case"expired":return"bg-warning-subtle text-warning-emphasis border border-warning-subtle";default:return"bg-secondary-subtle text-secondary-emphasis border border-secondary-subtle"}}getStatusIcon(t){return{valid:"check-circle",revoked:"x-circle",expired:"clock"}[t]||"question-circle"}getStatusLabel(t){return{valid:"V\xE1lido",revoked:"Revocado",expired:"Expirado"}[t]||"Estado Desconocido"}getStatusBadgeColorForMultiSelect(t){switch(t){case"valid":return"success";case"revoked":return"danger";case"expired":return"warning";default:return"secondary"}}getTableRowClass(t){switch(t){case"valid":return"";case"revoked":return"table-danger";case"expired":return"table-warning";default:return""}}formatDate(t){try{return new Date(t).toLocaleDateString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return t}}formatDateTime(t){try{return new Date(t).toLocaleString("es-PE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return t}}canDownload(t){return t.status==="valid"}canRegenerate(t){return t.status==="valid"||t.status==="expired"}canRevoke(t){return t.status==="valid"}exportToCSV(){let t=this.generateCSVData(this.certificates());this.downloadCSV(t,"certificados.csv")}exportSelectedToCSV(){let t=this.certificates().filter(n=>this.selectedCertificates().includes(n.id)),e=this.generateCSVData(t);this.downloadCSV(e,"certificados_seleccionados.csv")}generateCSVData(t){let n=[["ID","Participante","Email","Evento","Fecha Evento","Rol","Estado","C\xF3digo Verificaci\xF3n","Fecha Emisi\xF3n","Descargas","Verificaciones"].join(",")];return t.forEach(l=>{let m=[l.id,`"${l.participantName}"`,l.participantEmail,`"${l.eventTitle}"`,l.eventDate,`"${l.roleName}"`,this.getStatusLabel(l.status),l.verificationCode||"",l.issuedAt,l.downloadCount,l.verificationCount];n.push(m.join(","))}),n.join(`
`)}downloadCSV(t,e){let n=new Blob([t],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),m=URL.createObjectURL(n);l.setAttribute("href",m),l.setAttribute("download",e),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}refreshData(){this.loadCertificates()}confirmDownloadCertificate(t){this.canDownload(t)&&(this.confirmAction.set({title:"Descargar Certificado",message:`\xBFDescargar el certificado de ${t.participantName}?`,confirmText:"S\xED, Descargar",callback:()=>D(this,null,function*(){return yield this.downloadCertificate(t.id)})}),this.confirmModal()?.show())}confirmRegenerateCertificate(t){this.canRegenerate(t)&&(this.confirmAction.set({title:"Regenerar Certificado",message:`\xBFRegenerar el certificado de ${t.participantName}? Esto crear\xE1 una nueva versi\xF3n.`,confirmText:"S\xED, Regenerar",callback:()=>this.regenerateCertificate(t.id)}),this.confirmModal()?.show())}confirmRevokeCertificate(t){this.canRevoke(t)&&(this.confirmAction.set({title:"Revocar Certificado",message:`\xBFRevocar el certificado de ${t.participantName}? Esta acci\xF3n no se puede deshacer.`,confirmText:"S\xED, Revocar",callback:()=>this.revokeCertificate(t.id)}),this.confirmModal()?.show())}downloadCertificate(t){return D(this,null,function*(){try{let e=this.certificates().find(fe=>fe.id===t);if(!e){console.error("Certificado no encontrado");return}let n=yield fetch("/template/certificado-1756515494650.json");if(!n.ok)throw new Error("No se pudo cargar la plantilla del certificado");let l=yield n.json(),m=yield this.CertificateGeneratorService.generarCertificadoPDFPorCodigo(l,e.shortCode,{formato:"A4",orientacion:"landscape",nombreArchivo:`certificado-${e.verificationCode}`});m.success?console.log("Certificado descargado exitosamente desde lista"):console.error("Error al generar certificado:",m.message)}catch(e){console.error("Error al descargar certificado:",e)}})}regenerateCertificate(t){this.certificateService.regenerateCertificate(t).pipe(I(this.destroyRef)).subscribe({next:e=>{e.success?this.loadCertificates():this.error.set(e.message||"Error al regenerar el certificado")},error:e=>{console.error("Error regenerating certificate:",e),this.error.set("Error al regenerar el certificado")}})}revokeCertificate(t){this.certificateService.revokeCertificate(t,"Revocado desde lista de certificados").pipe(I(this.destroyRef)).subscribe({next:e=>{e?this.loadCertificates():this.error.set("Error al revocar el certificado")},error:e=>{console.error("Error revoking certificate:",e),this.error.set("Error al revocar el certificado")}})}onConfirmAccepted(){return D(this,null,function*(){yield this.confirmAction().callback()})}onConfirmCancelled(){}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-certificate-list"]],viewQuery:function(e,n){e&1&&z(n.confirmModal,Ce,5),e&2&&B()},decls:61,vars:27,consts:[["confirmModal",""],["searchInput",""],[1,"container-fluid","px-2","px-sm-3","py-2"],[3,"accepted","cancelled","title","message","confirmText"],[1,"d-flex","align-items-center","justify-content-between","mb-2"],[1,"d-flex","align-items-center","gap-2","min-w-0","flex-grow-1"],["routerLink","/","title","Inicio",1,"btn","btn-link","p-0","text-decoration-none","d-sm-none"],[1,"bi","bi-chevron-left","fs-5"],[1,"min-w-0"],[1,"d-flex","align-items-center","gap-2"],[1,"bi","bi-award","text-primary","d-none","d-sm-inline"],[1,"h6","mb-0","fw-semibold","text-truncate"],[1,"badge","bg-primary","rounded-pill","small"],["aria-label","breadcrumb",1,"d-none","d-sm-block"],[1,"breadcrumb","mb-0","small"],[1,"breadcrumb-item"],["routerLink","/",1,"text-decoration-none"],["aria-current","page",1,"breadcrumb-item","active"],[1,"d-flex","gap-1"],["type","button","title","Actualizar",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"bi","bi-arrow-clockwise"],["routerLink","/certificados/generar","title","Generar certificados",1,"btn","btn-primary","btn-sm"],[1,"bi","bi-plus-circle","me-1"],[1,"d-none","d-md-inline"],[1,"dropdown"],[1,"card","border-0","shadow-sm","mb-2"],[1,"card-header","border-0","py-2"],[1,"d-flex","align-items-center","justify-content-between"],["type","button",1,"btn","btn-link","p-0","text-decoration-none",3,"click"],[1,"bi","bi-funnel","me-1"],[1,"fw-medium","small"],[1,"badge","bg-primary","rounded-pill","ms-1","small"],[1,"bi","ms-1"],["type","button","title","Limpiar filtros",1,"btn","btn-outline-danger","btn-sm"],[1,"card-body","py-2"],[1,"card","border-0","shadow-sm"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","gap-2"],[1,"badge","bg-body-secondary","text-body","small"],[1,"badge","bg-primary","small"],[1,"text-muted","small","d-md-none"],["role","group",1,"btn-group","btn-group-sm"],["type","radio","name","viewMode","id","cardsView","autocomplete","off",1,"btn-check",3,"change","checked"],["for","cardsView","title","Vista tarjetas",1,"btn","btn-outline-primary"],[1,"bi","bi-grid-3x3-gap"],["type","radio","name","viewMode","id","tableView","autocomplete","off",1,"btn-check",3,"change","checked"],["for","tableView","title","Vista tabla",1,"btn","btn-outline-primary"],[1,"bi","bi-table"],[1,"card-body","p-0"],[1,"d-flex","justify-content-center","align-items-center","py-4"],[1,"text-center","py-4"],[1,"card-footer","border-0","py-2"],["data-bs-toggle","dropdown","title","Exportar",1,"btn","btn-success","btn-sm","dropdown-toggle"],[1,"bi","bi-download"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"bi","bi-file-earmark-spreadsheet","me-2"],[1,"bi","bi-check-square","me-2"],["type","button","title","Limpiar filtros",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"bi","bi-x-circle"],[3,"formGroup"],[1,"row","g-2"],[1,"col-12"],[1,"input-group","input-group-sm"],[1,"input-group-text","border-end-0","bg-body-secondary"],[1,"bi","bi-search"],["type","text","placeholder","Buscar participante, evento, c\xF3digo...","formControlName","searchText",1,"form-control","border-start-0","bg-body-secondary"],["type","button",1,"btn","btn-outline-secondary","btn-sm","border-start-0"],[1,"col-6","col-md-3"],["formControlName","status",1,"form-select","form-select-sm"],[3,"value"],["formControlName","templateId",1,"form-select","form-select-sm"],["type","date","placeholder","Desde","formControlName","issuedFrom",1,"form-control","form-control-sm"],["type","date","placeholder","Hasta","formControlName","issuedTo",1,"form-control","form-control-sm"],["type","button",1,"btn","btn-outline-secondary","btn-sm","border-start-0",3,"click"],[1,"bi","bi-x"],[1,"text-center"],["role","status",1,"spinner-border","text-primary","mb-2"],[1,"visually-hidden"],[1,"text-muted","small","mb-0"],[1,"text-muted","mb-3"],[1,"bi","bi-award",2,"font-size","3rem","opacity","0.3"],[1,"text-muted","mb-2"],[1,"text-muted","small","mb-3"],[1,"d-flex","gap-2","justify-content-center","flex-wrap"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-arrow-clockwise","me-1"],["routerLink","/certificados/generar",1,"btn","btn-primary","btn-sm"],[1,"p-2"],[1,"table-responsive"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-lg-3","row-cols-xl-4","g-2"],[1,"col"],[1,"card","h-100","border-0","shadow-sm"],[1,"card-header","border-0","py-1","d-flex","align-items-center","justify-content-between"],[1,"form-check","form-check-sm","mb-0"],["type","checkbox",1,"form-check-input",3,"change","id","checked"],[1,"badge","rounded-pill","small"],[1,"bi"],[1,"d-flex","align-items-center","gap-2","mb-2"],[1,"bg-primary","bg-opacity-10","rounded-circle","d-flex","align-items-center","justify-content-center","flex-shrink-0",2,"width","32px","height","32px"],[1,"bi","bi-person-fill","text-primary","small"],[1,"min-w-0","flex-grow-1"],[1,"fw-medium","small","text-truncate"],[1,"text-muted","small","text-truncate"],[1,"mb-2"],[1,"d-flex","align-items-start","gap-1","mb-1"],[1,"bi","bi-calendar-event","text-primary","small","mt-1","flex-shrink-0"],[1,"small","text-truncate",3,"title"],[1,"d-flex","align-items-center","justify-content-between","small","text-muted"],[1,"badge","bg-info","bg-opacity-10","text-info"],[1,"d-flex","justify-content-between","text-center","small","mb-2"],[1,"fw-medium","text-body"],[1,"text-muted",2,"font-size","0.7rem"],[1,"card-footer","border-0","py-1"],[1,"d-flex","gap-1","justify-content-center"],["title","Descargar",1,"btn","btn-outline-info","btn-sm",3,"click","disabled"],["title","Regenerar",1,"btn","btn-outline-warning","btn-sm"],["title","Revocar",1,"btn","btn-outline-danger","btn-sm",3,"disabled"],["title","Regenerar",1,"btn","btn-outline-warning","btn-sm",3,"click"],[1,"bi","bi-arrow-repeat"],["title","Revocar",1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],[1,"table","table-hover","table-sm","align-middle","mb-0"],[1,"table-light"],["scope","col",1,"border-0",2,"width","40px"],[1,"form-check","form-check-sm"],["type","checkbox","id","selectAll",1,"form-check-input",3,"change","checked","indeterminate"],["scope","col",1,"border-0","fw-medium"],["scope","col",1,"border-0","fw-medium","d-none","d-md-table-cell"],["scope","col",1,"border-0","fw-medium","d-none","d-lg-table-cell"],["scope","col",1,"border-0","fw-medium","d-none","d-xl-table-cell"],["scope","col",1,"border-0","text-center",2,"width","120px"],[3,"table-active","class"],[1,"border-0"],[1,"bg-primary","bg-opacity-10","rounded-circle","d-flex","align-items-center","justify-content-center","flex-shrink-0",2,"width","28px","height","28px"],[1,"text-muted","small","text-truncate","d-md-none"],[1,"border-0","d-none","d-md-table-cell"],[1,"fw-medium","small","text-truncate",3,"title"],[1,"text-muted","small"],[1,"border-0","d-none","d-lg-table-cell"],[1,"badge","bg-info","bg-opacity-10","text-info","small"],[1,"d-none","d-lg-inline","ms-1"],[1,"border-0","d-none","d-xl-table-cell"],[1,"d-flex","gap-2","small"],[1,"badge","bg-body-secondary","text-body"],[1,"bi","bi-download","me-1"],[1,"bi","bi-shield-check","me-1"],[1,"small"],[1,"fw-medium"],[1,"text-muted"],[1,"border-0","text-center"],[1,"btn-group","btn-group-sm"],["title","Descargar",1,"btn","btn-outline-info",3,"click","disabled"],["title","Regenerar",1,"btn","btn-outline-warning"],["title","Revocar",1,"btn","btn-outline-danger",3,"disabled"],["title","Regenerar",1,"btn","btn-outline-warning",3,"click"],["title","Revocar",1,"btn","btn-outline-danger",3,"click","disabled"],[3,"pageChange","pageSizeChange","totalItems","pageSize","currentPage","showPageSizeSelector","pageSizeOptions","showGoToPage","showRangeInfo","showFirstLastButtons","maxVisiblePages","density"]],template:function(e,n){if(e&1){let l=v();a(0,"div",2)(1,"app-confirm-modal",3,0),f("accepted",function(){return p(l),u(n.onConfirmAccepted())})("cancelled",function(){return p(l),u(n.onConfirmCancelled())}),i(),a(3,"div",4)(4,"div",5)(5,"button",6),d(6,"i",7),i(),a(7,"div",8)(8,"div",9),d(9,"i",10),a(10,"h1",11),c(11,"Certificados"),i(),C(12,be,2,1,"span",12),i(),a(13,"nav",13)(14,"ol",14)(15,"li",15)(16,"a",16),c(17,"Inicio"),i()(),a(18,"li",17),c(19,"Certificados"),i()()()()(),a(20,"div",18)(21,"button",19),f("click",function(){return p(l),u(n.refreshData())}),C(22,_e,1,0,"span",20)(23,ve,1,0,"i",21),i(),a(24,"button",22),d(25,"i",23),a(26,"span",24),c(27,"Generar"),i()(),C(28,he,9,1,"div",25),i()(),a(29,"div",26)(30,"div",27)(31,"div",28)(32,"div",9)(33,"button",29),f("click",function(){return p(l),u(n.toggleFiltersPanel())}),d(34,"i",30),a(35,"span",31),c(36,"Filtros"),i(),C(37,Se,2,1,"span",32),d(38,"i",33),i()(),C(39,we,2,0,"button",34),i()(),C(40,Te,26,4,"div",35),i(),a(41,"div",36)(42,"div",27)(43,"div",37)(44,"div",9),C(45,ke,2,1,"span",38),C(46,Fe,2,1,"span",39),a(47,"span",40),c(48),i()(),a(49,"div",41)(50,"input",42),f("change",function(){return p(l),u(n.setViewMode("cards"))}),i(),a(51,"label",43),d(52,"i",44),i(),a(53,"input",45),f("change",function(){return p(l),u(n.setViewMode("table"))}),i(),a(54,"label",46),d(55,"i",47),i()()()(),a(56,"div",48),C(57,Ie,7,0,"div",49)(58,Le,5,1,"div",50)(59,je,2,2),i(),C(60,Ge,2,10,"div",51),i()()}e&2&&(o(),b("title",n.confirmAction().title)("message",n.confirmAction().message)("confirmText",n.confirmAction().confirmText),o(11),g(n.totalItems()>0?12:-1),o(9),b("disabled",n.loading()),o(),g(n.loading()?22:23),o(6),g(n.certificates().length>0?28:-1),o(),E("border-primary",n.hasActiveFilters()),o(4),O("aria-expanded",n.showFilters()),o(),E("text-primary",n.hasActiveFilters()),o(3),g(n.hasActiveFilters()?37:-1),o(),E("bi-chevron-up",n.showFilters())("bi-chevron-down",!n.showFilters()),o(),g(n.hasActiveFilters()?39:-1),o(),g(n.showFilters()?40:-1),o(5),g(n.totalItems()>0?45:-1),o(),g(n.selectedCertificates().length>0?46:-1),o(2),j(" P\xE1gina ",n.currentPage()," de ",n.totalPages()," "),o(2),b("checked",n.viewMode()==="cards"),o(3),b("checked",n.viewMode()==="table"),o(4),g(n.loading()?57:n.certificates().length===0?58:59),o(3),g(n.totalPages()>1?60:-1))},dependencies:[K,U,q,le,Z,ne,ae,J,ie,W,Y,ee,te,oe,de,se,X],encapsulation:2,changeDetection:0})};export{ue as CertificateListComponent};
